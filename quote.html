<!DOCTYPE>
<html manifest="manifest.appcache">
<head>
    <style>
        [ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak], .ng-cloak, .x-ng-cloak, .ng-hide {
            display: none !important;
        }
    </style>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>IATA | NDC Demonstrator | Find a flight</title>
    <meta name="description" content="">
    <meta id="Viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1">
    <link rel="stylesheet" href="gallery.css" media="all">
    <link href="images/app/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon">
    <link href="images/app/favicon.png" rel="icon" type="image/png">
    <link href="images/app/touch.png" rel="apple-touch-icon" type="image/png">
    <link rel="stylesheet" href="bootstrap.min.css" media="all">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Pacifico">
    <link rel="stylesheet" href="cbt.css" media="all">
</head>
<body class="tmc-search tmc sidebar-off">
<nav ng-controller="menuController" class="iata ng-scope">
    <button type="button" ng-click="showXSMenu = !showXSMenu" class="btn-default btn-xs-menu visible-xs"><i class="fa fa-bars"></i></button><a href="#/">
    <div class="logo">NDC<span>Demonstrator</span></div></a>
    <div class="user-data pull-right">
        <div class="column">
            <div><span class="adjust-span-position text-right ng-binding">Marsha Anderson</span></div>
            <div class="text-gray text-right"><span class="ng-binding">Executive</span></div>
        </div>
        <div class="column align-middle"><img ng-src="images/app/profile/marsha.jpg" width="35px" height="35px" class="persona-picture img-circle" src="images/app/profile/marsha.jpg"></div>
    </div>
    <ul ng-class="{'hidden-xs': !showXSMenu}" class="toggles hidden-xs">
        <li><a href="#/personas" ng-click="personas()" class="">Personas</a></li>
        <li><a href="#/search" ng-click="search()">Search</a></li>
        <li><a href="#/admin" ng-click="admin()">Admin</a></li>
        <li><a uib-dropdown="" ng-click="showReports = !showReports" class="dropdown">Reports</a>
            <ul ng-class="{'hidden-xs': !showReports}" class="hidden-xs">
                <!-- ngRepeat: link in items --><li ng-repeat="link in items" class="ng-scope"><a ng-click="ancillaryInfo();" class="ng-binding">Ancillary Info</a></li><!-- end ngRepeat: link in items --><li ng-repeat="link in items" class="ng-scope"><a ng-click="ancillaryDashboard();" class="ng-binding">Ancillary Dashboard</a></li><!-- end ngRepeat: link in items -->
            </ul>
        </li>
    </ul>
    <div class="bar"></div>
</nav>
<!-- ngView: undefined --><div class="page-wrap ng-view ng-scope">
    <div class="progress ng-scope">
        <div class="contentWrapper">
            <div class="content"></div>
        </div>
    </div>
    <!--.side.hidden-xs
      .side-bar-tabs
        .side-bar-tab.upsell(data-tab-content="#upsell-side") Upsell
        .side-bar-tab.policy.active(data-tab-content="#profile-side") Policy

      //.side-bar
        #upsell-side.side-bar-section
          .nano
            .sliderContent
              include sidebar/upsell

        #profile-side.side-bar-section
          .nano
            .sliderContent
              include sidebar/policyYe

      -->
    <div id="tmc_journey" class="container-fluid ng-scope">
        <div class="search-container">
            <div ng-click="hideSearchPanel = !hideSearchPanel" class="row mobile-search-panel visible-xs">
                <div class="col-xs-10">
                    <div class="row">
                        <div class="col-xs-12 text-center"><span class="ng-binding">Paris&nbsp;<span class="strong ng-binding">(CDG)&nbsp;</span></span><span class="ng-binding">- New York&nbsp;<span class="strong ng-binding">(JFK)</span></span></div>
                    </div>
                    <div class="text-center ng-binding">24 Dec 2015</div>
                </div>
                <div class="col-xs-2 search-panel-icon"><i class="fa fa-search"></i></div>
            </div>
            <div ng-init="hideSearchPanel=true" ng-class="{ 'hidden-xs': hideSearchPanel }" class="row search-row hidden-xs">
                <div class="col-md-5 col-search-fields">
                    <div class="search-panel from-to">
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <div class="col-sm-3">
                                        <label for="from" title="From" class="bs-height">From</label>
                                    </div>
                                    <div class="col-sm-9">
                                        <input id="from" type="text" name="origin" ng-model="origin" disabled="" class="form-control ng-pristine ng-untouched ng-valid">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <div class="col-sm-3">
                                        <label for="destination" title="To" class="bs-height">To</label>
                                    </div>
                                    <div class="col-sm-9">
                                        <input id="to" type="text" name="destination" ng-model="destination" disabled="" class="form-control ng-pristine ng-untouched ng-valid">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-5 col-search-fields">
                    <div class="search-panel">
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group has-feedback">
                                    <div class="col-sm-3">
                                        <label title="Departure" class="bs-height control-label">Depart</label>
                                    </div>
                                    <div class="col-sm-9">
                                        <input id="from-date" type="text" name="origin-date" ng-click="departureDate.opened = !departureDate.opened" uib-datepicker-popup="dd-MMMM-yyyy" is-open="departureDate.opened" datepicker-options="dateOptions" show-weeks="false" ng-model="departureDate" disabled="" class="form-control ng-pristine ng-untouched ng-valid ng-isolate-scope ng-valid-date"><!-- ngIf: isOpen --><i class="form-control-feedback"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group has-feedback">
                                    <div class="col-sm-3">
                                        <label title="Return" class="bs-height control-label">Return</label>
                                    </div>
                                    <div class="col-sm-9">
                                        <input id="to-date" type="text" name="destination-date" ng-click="returnDate.opened = !returnDate.opened" uib-datepicker-popup="dd-MMMM-yyyy" is-open="returnDate.opened" datepicker-options="dateOptions" ng-model="returnDate" disabled="" class="form-control ng-pristine ng-untouched ng-valid ng-isolate-scope ng-valid-date"><!-- ngIf: isOpen --><i class="form-control-feedback"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-2 col-search-btn">
                    <div class="search-btn">
                        <button ng-click="collapseAdvancedFilters()" class="btn btn-warning btn-block-binoculars"><span class="fa fa-binoculars"></span></button>
                        <div class="search-btn-wrapper">
                            <button id="search" type="submit" ng-click="triggerSearch(); hideSearchPanel = !hideSearchPanel" ng-disabled="ancillaryService.loaded" class="btn btn-warning btn-block-search">SEARCH<span class="fa fa-search pull-right"></span></button>
                        </div>
                    </div>
                    <div ng-controller="filtersController" class="personalized-search capital clearfix ng-scope">
                        <div education-popup="http://search/personalizedSearchToggle" direction="bottom|right" class="pull-left ng-isolate-scope" icon-type="1" icon-color="blue" style="position:relative;"><ng-transclude><span class="personalized-text ng-scope">Personalized search</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|right" ns-popover-timeout="0"></div></div>
                        <!-- ngIf: ! isPersonalizedOutOfPolicy() --><div ng-if="! isPersonalizedOutOfPolicy()" class="pull-right ng-scope">
                        <label class="switch">
                            <input type="checkbox" ng-model="personalization.status" ng-change="setPersonalization(); changeSortOrder()" class="switch-input ng-pristine ng-untouched ng-valid"><span data-on="On" data-off="Off" class="switch-label"></span><span class="switch-handle"></span>
                        </label>
                    </div><!-- end ngIf: ! isPersonalizedOutOfPolicy() -->
                        <!-- ngIf: isPersonalizedOutOfPolicy() -->
                    </div>
                </div>
            </div>
            <!-- ngInclude: 'form-filters.html' --><div uib-collapse="isCollapsed" ng-include="'form-filters.html'" class="search-row filters-advanced ng-scope collapse" style="height: 0px;">
            <div class="row ng-scope">
                <!-- ngRepeat: direction in ['outbound', 'inbound'] --><div ng-repeat="direction in ['outbound', 'inbound']" class="col-sm-6 form-filters no-side-padding ng-scope">
                <div class="form-filters-direction text-center text-capitalize ng-binding">outbound</div>
                <div ng-controller="advancedFiltersController" class="row ng-scope">
                    <div class="col-xs-4">
                        <div class="green-menu-header"><span class="text-bold">AIRPORT</span></div>
                        <ul class="filter-list-green form-filters-list selection-denied">
                            <!-- ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isAirportAncillary(ancillary)" class="ng-scope">
                            <label class="ng-binding">Fast track
                                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                            </label>
                        </li><!-- end ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isAirportAncillary(ancillary)" class="ng-scope">
                            <label class="ng-binding">Lounge
                                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                            </label>
                        </li><!-- end ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isAirportAncillary(ancillary)" class="ng-scope">
                            <label class="ng-binding">Priority boarding
                                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                            </label>
                        </li><!-- end ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index -->
                        </ul>
                    </div>
                    <div class="col-xs-4">
                        <div class="green-menu-header"><span class="text-bold">IN FLIGHT</span></div>
                        <ul class="filter-list-green form-filters-list selection-denied">
                            <!-- ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isInFlightAncillary(ancillary)" class="ng-scope">
                            <label class="ng-binding">Entertainment
                                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                            </label>
                        </li><!-- end ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isInFlightAncillary(ancillary)" class="ng-scope">
                            <label class="ng-binding">Economy comfort
                                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                            </label>
                        </li><!-- end ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isInFlightAncillary(ancillary)" class="ng-scope">
                            <label class="ng-binding">Meal
                                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                            </label>
                        </li><!-- end ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isInFlightAncillary(ancillary)" class="ng-scope">
                            <label class="ng-binding">Wifi
                                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                            </label>
                        </li><!-- end ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index -->
                        </ul>
                    </div>
                    <div class="col-xs-4">
                        <div class="green-menu-header"><span class="text-bold">BAGGAGE</span></div>
                        <ul class="filter-list-green form-filters-list selection-denied">
                            <!-- ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isBagAncillary(ancillary)" class="ng-scope">
                            <label class="ng-binding">First bag
                                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                            </label>
                        </li><!-- end ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isBagAncillary(ancillary)" class="ng-scope">
                            <label class="ng-binding">Second bag
                                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                            </label>
                        </li><!-- end ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isBagAncillary(ancillary)" class="ng-scope">
                            <label class="ng-binding">Third bag
                                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                            </label>
                        </li><!-- end ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index -->
                        </ul>
                    </div>
                </div>
            </div><!-- end ngRepeat: direction in ['outbound', 'inbound'] --><div ng-repeat="direction in ['outbound', 'inbound']" class="col-sm-6 form-filters no-side-padding ng-scope">
                <div class="form-filters-direction text-center text-capitalize ng-binding">inbound</div>
                <div ng-controller="advancedFiltersController" class="row ng-scope">
                    <div class="col-xs-4">
                        <div class="green-menu-header"><span class="text-bold">AIRPORT</span></div>
                        <ul class="filter-list-green form-filters-list selection-denied">
                            <!-- ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isAirportAncillary(ancillary)" class="ng-scope">
                            <label class="ng-binding">Fast track
                                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                            </label>
                        </li><!-- end ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isAirportAncillary(ancillary)" class="ng-scope">
                            <label class="ng-binding">Lounge
                                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                            </label>
                        </li><!-- end ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isAirportAncillary(ancillary)" class="ng-scope">
                            <label class="ng-binding">Priority boarding
                                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                            </label>
                        </li><!-- end ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index -->
                        </ul>
                    </div>
                    <div class="col-xs-4">
                        <div class="green-menu-header"><span class="text-bold">IN FLIGHT</span></div>
                        <ul class="filter-list-green form-filters-list selection-denied">
                            <!-- ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isInFlightAncillary(ancillary)" class="ng-scope">
                            <label class="ng-binding">Entertainment
                                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                            </label>
                        </li><!-- end ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isInFlightAncillary(ancillary)" class="ng-scope">
                            <label class="ng-binding">Economy comfort
                                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                            </label>
                        </li><!-- end ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isInFlightAncillary(ancillary)" class="ng-scope">
                            <label class="ng-binding">Meal
                                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                            </label>
                        </li><!-- end ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isInFlightAncillary(ancillary)" class="ng-scope">
                            <label class="ng-binding">Wifi
                                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                            </label>
                        </li><!-- end ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index -->
                        </ul>
                    </div>
                    <div class="col-xs-4">
                        <div class="green-menu-header"><span class="text-bold">BAGGAGE</span></div>
                        <ul class="filter-list-green form-filters-list selection-denied">
                            <!-- ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isBagAncillary(ancillary)" class="ng-scope">
                            <label class="ng-binding">First bag
                                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                            </label>
                        </li><!-- end ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isBagAncillary(ancillary)" class="ng-scope">
                            <label class="ng-binding">Second bag
                                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                            </label>
                        </li><!-- end ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isBagAncillary(ancillary)" class="ng-scope">
                            <label class="ng-binding">Third bag
                                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                            </label>
                        </li><!-- end ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index -->
                        </ul>
                    </div>
                </div>
            </div><!-- end ngRepeat: direction in ['outbound', 'inbound'] -->
            </div>
        </div>
        </div>
        <div id="results-container" ng-controller="resultsController" class="results-container ng-scope">
            <!-- ngInclude: 'results.html' --><div id="results-view" ng-include="'results.html'" class="ng-scope">
            <!-- ngIf: noVisibleResults -->
            <!-- ngRepeat: direction in ['outbound', 'inbound'] --><div ng-repeat="direction in ['outbound', 'inbound']" ng-show="journeys[direction] &amp;&amp; !noVisibleResults" class="ng-scope">
            <!-- ngIf: showResultsContainer --><div id="filters-container" ng-if="showResultsContainer" class="ng-scope">
            <div class="row header-results-bar-section">
                <div education-popup="http://search/comparisonAlternatives" icon-color="orange" class="col-md-2 col-xs-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" style="position:relative;"><ng-transclude>
                    <div ng-click="doCompare()" class="header-results-bar-option selection-denied hidden-xs hidden-sm ng-scope"><span>Compare</span></div>
                    <div ng-click="doCompare()" class="header-results-bar-option selection-denied hidden-md hidden-lg ng-scope"><span class="fa fa-files-o"></span></div>
                </ng-transclude><div class="education-element-1 educational-color-orange" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                <!--.col-md-1.col-xs-3
            .header-results-bar-option.selection-denied
              span.filter-picture Airline
            -->
                <div class="col-md-4 col-xs-6 text-left">
                    <div ns-popover="" ns-popover-template="flight-details.html" ns-popover-trigger="click" ns-popover-placement="bottom|left" ns-popover-timeout="-1" ns-popover-hide-on-click="false" ns-popover-theme="ns-popover-filters-green-bar-theme flight-details-filter" class="header-results-bar-option selection-denied text-center ng-scope"><span class="filter-picture">Flight Details</span></div>
                </div>
                <div education-popup="http://search/ancillariesServicesRichContent" icon-color="orange" class="col-md-3 hidden-sm hidden-xs text-left ng-isolate-scope" icon-type="1" direction="bottom|left" style="position:relative;"><ng-transclude>
                    <div ns-popover="" ns-popover-template="ancillary-services.html" ns-popover-trigger="click" ns-popover-placement="bottom|left" ns-popover-timeout="-1" ns-popover-theme="ns-popover-filters-green-bar-theme" class="header-results-bar-option selection-denied text-center ng-scope"><span class="filter-picture">Ancillary Services</span></div>
                </ng-transclude><div class="education-element-1 educational-color-orange" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                <div class="col-md-1 hidden-sm hidden-xs">
                    <div ns-popover="" ns-popover-template="flexibility.html" ns-popover-trigger="click" ns-popover-placement="bottom|left" ns-popover-timeout="-1" ns-popover-theme="ns-popover-filters-green-bar-theme" class="header-results-bar-option selection-denied ng-scope"><span class="filter-picture">Flexibility</span></div>
                </div>
                <div class="col-md-2 col-xs-3 pos-relative">
                    <div ns-popover="" ns-popover-template="sort-by-filter.html" ns-popover-trigger="click" ns-popover-placement="bottom|right" ns-popover-timeout="-1" ns-popover-theme="ns-popover-filters-green-bar-theme" class="header-results-bar-option selection-denied sort-by-filter text-center ng-scope"><span>Sort by:&nbsp;</span><span class="sort-by-span ng-binding">Departure</span><!-- ngIf: sortOrder === 'asc' --><!-- ngIf: sortOrder === 'desc' --><i ng-if="sortOrder === 'desc'" ng-click="changeSortOrder('asc')" class="sort-type-caret fa fa-caret-up ng-scope"></i><!-- end ngIf: sortOrder === 'desc' --></div>
                </div>
            </div>
            <div class="results-panel-direction ng-binding">Outbound</div>
        </div><!-- end ngIf: showResultsContainer -->
            <!-- ngRepeat: leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse --><!-- ngInclude: 'resultItem.html' --><div ng-include="'resultItem.html'" ng-repeat="leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse" ng-model="leg" ng-show="isVisible() &amp;&amp; isFilterAllowed() &amp;&amp; isFlightDetailsFilterAllowed() &amp;&amp; isAdvancedFilterAllowed()" ng-controller="legController" class="ng-pristine ng-untouched ng-valid ng-scope ng-hide">
            <div ng-show="leg.selectedClass === undefined" data-operating-airline="CO" ng-class="{'has-segments': leg.segments.length > 1, 'leg-details-hidden': !smDetailsVisible, 'just-for-you': personalizationService.isApplicableToPersona(leg) }" class="results-item ng-scope leg-details-hidden">
                <div ng-show="policyService.violatesRules(leg)" class="pos-absolute-full-height out-of-policy"></div>
                <!-- ngRepeat: segment in leg.segments track by $index --><div ng-repeat="segment in leg.segments track by $index" ng-controller="segmentController" ng-class="{'leg-segment-nth': $index > 0}" class="row leg-segment ng-scope">
                <dl class="just-for-you-cover col-md-2 col-xs-3 col-xs-offset-9 col-md-offset-10 pos-absolute-full-height">
                    <!-- ngIf: $index == 0 --><dt ng-if="$index == 0" education-popup="http://search/personalizedSearch" icon-type="2" icon-color="orange" direction="bottom|right" override-position-relative="true" class="pos-absolute-full-parent ng-scope ng-isolate-scope"><ng-transclude>
                    <h4 class="ng-scope">Just for you</h4>
                </ng-transclude><div class="education-element-2 educational-color-orange" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|right" ns-popover-timeout="0"></div></dt><!-- end ngIf: $index == 0 -->
                    <!-- ngIf: $index > 0 -->
                </dl>
                <div class="col-airline col-md-2 col-xs-3 text-center">
                    <!--.gamification(ng-if="$index === 0") Collect {{ leg.gamificationPoints }} upsell points--><img ng-src="images/app/logos/co.jpg" alt="Airline logo" class="airline-logo-gamification" src="images/app/logos/co.jpg">
                    <div class="flight-code hidden-sm hidden-xs ng-binding">CO-65</div>
                    <!-- ngIf: $index == 0 && leg.segments.length == 1 --><div ng-if="$index == 0 &amp;&amp; leg.segments.length == 1" class="airline-data-sm hidden-md hidden-lg text-center ng-scope">
                    <div class="flight-code ng-binding">CO-65</div>
                    <div class="flight-equipment ng-binding">(767 jet)</div>
                </div><!-- end ngIf: $index == 0 && leg.segments.length == 1 -->
                </div>
                <div class="flight-details col-md-4 col-md-offset-2 hidden-sm hidden-xs">
                    <div class="row top">
                        <div class="col-xs-4 time-from"><span class="ng-binding">06:10</span></div>
                        <div class="col-xs-4 time-to"><span class="ng-binding">11:00</span></div>
                        <div class="col-xs-4 time-duration"><span class="ng-binding">10h 50m</span></div>
                    </div>
                    <div class="row bottom text-left text-gray">
                        <div class="col-xs-4 iata-from"><strong class="ng-binding">CDG</strong></div>
                        <div class="pos-absolute col-xs-3 col-xs-offset-1 arrow-picture"></div>
                        <div class="col-xs-4 iata-to"><strong class="ng-binding">JFK(767 jet)</strong></div>
                        <div class="col-xs-4 percent-on-time text-dark"><strong class="ng-binding">78 %</strong><span>&nbsp;on time</span></div>
                    </div>
                </div>
                <!-- ngIf: $index == 0 --><div ng-if="$index == 0" class="flight-details-sm flight-details-shortcut col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">06:10</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <!-- ngIf: leg.segments.length > 1 -->
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">11:00</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">CDG</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">JFK</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 && leg.segments.length == 1 --><div ng-if="ancillaries.included &amp;&amp; ancillaries.included.length > 0 &amp;&amp; leg.segments.length == 1" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price ng-scope">
                <div class="text-center">Included in price</div>
                <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries center-block ng-scope">
                <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
            </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
            </div><!-- end ngIf: ancillaries.included && ancillaries.included.length > 0 && leg.segments.length == 1 -->
                <!-- ngIf: leg.segments.length > 1 -->
            </div><!-- end ngIf: $index == 0 -->
                <!-- ngIf: leg.segments.length > 1 -->
                <div ng-class="{'has-optional-extras': policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0}" class="col-md-3 col-md-offset-4 col-ancillaries hidden-sm hidden-xs has-optional-extras">
                    <div ng-show="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price">
                        <div education-popup="http://search/ancillariesIncludedInPrice" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Included </span><br class="ng-scope"><span class="ng-scope">in price</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
                    </div>
                    <div ng-show="policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0" class="row optional-extras">
                        <div education-popup="http://search/ancillariesOptional" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Optional </span><br class="ng-scope"><span class="ng-scope">extras</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.optional] --><!-- ngInclude: 'inline_ancillary.html' --><ul ng-repeat="ancillaries in [ancillaries.optional]" ng-include="'inline_ancillary.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/second_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">100</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/third_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">200</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.optional] -->
                    </div>
                </div>
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="col-md-1 col-fares pos-absolute-full-height col-md-offset-9 text-dark hidden-sm hidden-xs ng-scope">
                <div class="text-gray ng-binding">Econ Flex</div>
                <div class="strong ng-binding">economy</div>
                <div class="show-all-fares pos-absolute-bottom-left border-top-colored"><a ng-click="showAllFares(leg)">Show all<span class="arrow-part"> fares&nbsp;<span class="fa fa-angle-right"></span></span></a></div>
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="price-block col-md-2 col-xs-3 col-xs-offset-6 col-md-offset-1 ng-scope">
                <p><span class="currency"></span><span class="price ng-binding">931</span></p>
                <!-- ngIf: roundTripPrice(leg) > 0 -->
                <div ng-show="leg.combinable" ng-init="leg.combinable = true" ng-class="selectionMode" class="book">
                    <label ng-class="{ 'orange-color-unselect': leg.selected === true }" class="btn btn-primary select-btn">
                        <input type="checkbox" ng-model="leg.selected" ng-click="toggleFlight(leg)" class="hidden ng-pristine ng-untouched ng-valid"><span ng-show="selectionMode == 'book'" class="ng-binding">Select</span><span ng-show="selectionMode == 'compare'" class="ng-binding ng-hide">Compare</span>
                    </label>
                </div>
                <!-- ngIf: personalizationService.isApplicableToPersona(leg) -->
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: leg.segments.length > 1 && !leg.segments.length == $index -->
                <!-- ngIf: $index == 0 --><label ng-if="$index == 0" class="select-flight ng-scope">
                <input type="checkbox" ng-click="selectFlightToCompare(leg)" class="hidden"><span class="checkbox"></span>
            </label><!-- end ngIf: $index == 0 -->
                <div class="vr col-md-offset-9 border-right-colored hidden-sm hidden-xs"></div>
                <div class="vr col-md-offset-10 border-right-colored hidden-sm hidden-xs"></div>
            </div><!-- end ngRepeat: segment in leg.segments track by $index -->
                <!-- ngIf: leg.segments.length > 1 -->
            </div>
        </div><!-- end ngRepeat: leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse --><!-- ngInclude: 'resultItem.html' --><div ng-include="'resultItem.html'" ng-repeat="leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse" ng-model="leg" ng-show="isVisible() &amp;&amp; isFilterAllowed() &amp;&amp; isFlightDetailsFilterAllowed() &amp;&amp; isAdvancedFilterAllowed()" ng-controller="legController" class="ng-pristine ng-untouched ng-valid ng-scope ng-hide">
            <div ng-show="leg.selectedClass === undefined" data-operating-airline="ZS" ng-class="{'has-segments': leg.segments.length > 1, 'leg-details-hidden': !smDetailsVisible, 'just-for-you': personalizationService.isApplicableToPersona(leg) }" class="results-item ng-scope has-segments leg-details-hidden">
                <div ng-show="policyService.violatesRules(leg)" class="pos-absolute-full-height out-of-policy"></div>
                <!-- ngRepeat: segment in leg.segments track by $index --><div ng-repeat="segment in leg.segments track by $index" ng-controller="segmentController" ng-class="{'leg-segment-nth': $index > 0}" class="row leg-segment ng-scope">
                <dl class="just-for-you-cover col-md-2 col-xs-3 col-xs-offset-9 col-md-offset-10 pos-absolute-full-height">
                    <!-- ngIf: $index == 0 --><dt ng-if="$index == 0" education-popup="http://search/personalizedSearch" icon-type="2" icon-color="orange" direction="bottom|right" override-position-relative="true" class="pos-absolute-full-parent ng-scope ng-isolate-scope"><ng-transclude>
                    <h4 class="ng-scope">Just for you</h4>
                </ng-transclude><div class="education-element-2 educational-color-orange" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|right" ns-popover-timeout="0"></div></dt><!-- end ngIf: $index == 0 -->
                    <!-- ngIf: $index > 0 -->
                </dl>
                <div class="col-airline col-md-2 col-xs-3 text-center">
                    <!--.gamification(ng-if="$index === 0") Collect {{ leg.gamificationPoints }} upsell points--><img ng-src="images/app/logos/zs.jpg" alt="Airline logo" class="airline-logo-gamification" src="images/app/logos/zs.jpg">
                    <div class="flight-code hidden-sm hidden-xs ng-binding">ZS-31</div>
                    <!-- ngIf: $index == 0 && leg.segments.length == 1 -->
                </div>
                <div class="flight-details col-md-4 col-md-offset-2 hidden-sm hidden-xs">
                    <div class="row top">
                        <div class="col-xs-4 time-from"><span class="ng-binding">07:05</span></div>
                        <div class="col-xs-4 time-to"><span class="ng-binding">08:25</span></div>
                        <div class="col-xs-4 time-duration"><span class="ng-binding">01h 20m</span></div>
                    </div>
                    <div class="row bottom text-left text-gray">
                        <div class="col-xs-4 iata-from"><strong class="ng-binding">CDG</strong></div>
                        <div class="pos-absolute col-xs-3 col-xs-offset-1 arrow-picture"></div>
                        <div class="col-xs-4 iata-to"><strong class="ng-binding">FRA(Boeing 32A)</strong></div>
                        <div class="col-xs-4 percent-on-time text-dark"><strong class="ng-binding">88 %</strong><span>&nbsp;on time</span></div>
                    </div>
                </div>
                <!-- ngIf: $index == 0 --><div ng-if="$index == 0" class="flight-details-sm flight-details-shortcut col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">07:05</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <!-- ngIf: leg.segments.length > 1 --><div ng-if="leg.segments.length > 1" class="stops col-xs-offset-5 col-xs-2 ng-binding ng-scope">1 stop</div><!-- end ngIf: leg.segments.length > 1 -->
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">13:35</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">CDG</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">JFK</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 && leg.segments.length == 1 -->
                <!-- ngIf: leg.segments.length > 1 --><div ng-if="leg.segments.length > 1" class="row view-details text-center ng-scope">
                <button type="button" ng-click="smViewDetails()" class="btn btn-success btn-details">View Details</button>
            </div><!-- end ngIf: leg.segments.length > 1 -->
            </div><!-- end ngIf: $index == 0 -->
                <!-- ngIf: leg.segments.length > 1 --><div ng-if="leg.segments.length > 1" class="flight-details-sm col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">07:05</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">08:25</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">CDG</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">FRA</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 --><div ng-if="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price ng-scope">
                <div class="text-center">Included in price</div>
                <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries center-block ng-scope">
                <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
            </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
            </div><!-- end ngIf: ancillaries.included && ancillaries.included.length > 0 -->
            </div><!-- end ngIf: leg.segments.length > 1 -->
                <div ng-class="{'has-optional-extras': policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0}" class="col-md-3 col-md-offset-4 col-ancillaries hidden-sm hidden-xs has-optional-extras">
                    <div ng-show="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price">
                        <div education-popup="http://search/ancillariesIncludedInPrice" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Included </span><br class="ng-scope"><span class="ng-scope">in price</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
                    </div>
                    <div ng-show="policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0" class="row optional-extras">
                        <div education-popup="http://search/ancillariesOptional" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Optional </span><br class="ng-scope"><span class="ng-scope">extras</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.optional] --><!-- ngInclude: 'inline_ancillary.html' --><ul ng-repeat="ancillaries in [ancillaries.optional]" ng-include="'inline_ancillary.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/second_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">50</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/third_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">100</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.optional] -->
                    </div>
                </div>
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="col-md-1 col-fares pos-absolute-full-height col-md-offset-9 text-dark hidden-sm hidden-xs ng-scope">
                <div class="text-gray ng-binding">Changeable</div>
                <div class="strong ng-binding">economy</div>
                <div class="show-all-fares pos-absolute-bottom-left border-top-colored"><a ng-click="showAllFares(leg)">Show all<span class="arrow-part"> fares&nbsp;<span class="fa fa-angle-right"></span></span></a></div>
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="price-block col-md-2 col-xs-3 col-xs-offset-6 col-md-offset-1 ng-scope">
                <p><span class="currency"></span><span class="price ng-binding">944</span></p>
                <!-- ngIf: roundTripPrice(leg) > 0 -->
                <div ng-show="leg.combinable" ng-init="leg.combinable = true" ng-class="selectionMode" class="book">
                    <label ng-class="{ 'orange-color-unselect': leg.selected === true }" class="btn btn-primary select-btn">
                        <input type="checkbox" ng-model="leg.selected" ng-click="toggleFlight(leg)" class="hidden ng-pristine ng-untouched ng-valid"><span ng-show="selectionMode == 'book'" class="ng-binding">Select</span><span ng-show="selectionMode == 'compare'" class="ng-binding ng-hide">Compare</span>
                    </label>
                </div>
                <!-- ngIf: personalizationService.isApplicableToPersona(leg) -->
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: leg.segments.length > 1 && !leg.segments.length == $index --><div ng-if="leg.segments.length > 1 &amp;&amp; !leg.segments.length == $index" class="hr col-md-10 col-xs-9 ng-scope"></div><!-- end ngIf: leg.segments.length > 1 && !leg.segments.length == $index -->
                <!-- ngIf: $index == 0 --><label ng-if="$index == 0" class="select-flight ng-scope">
                <input type="checkbox" ng-click="selectFlightToCompare(leg)" class="hidden"><span class="checkbox"></span>
            </label><!-- end ngIf: $index == 0 -->
                <div class="vr col-md-offset-9 border-right-colored hidden-sm hidden-xs"></div>
                <div class="vr col-md-offset-10 border-right-colored hidden-sm hidden-xs"></div>
            </div><!-- end ngRepeat: segment in leg.segments track by $index --><div ng-repeat="segment in leg.segments track by $index" ng-controller="segmentController" ng-class="{'leg-segment-nth': $index > 0}" class="row leg-segment ng-scope leg-segment-nth">
                <dl class="just-for-you-cover col-md-2 col-xs-3 col-xs-offset-9 col-md-offset-10 pos-absolute-full-height">
                    <!-- ngIf: $index == 0 -->
                    <!-- ngIf: $index > 0 --><dt ng-if="$index > 0" class="pos-absolute-full-parent ng-scope"></dt><!-- end ngIf: $index > 0 -->
                </dl>
                <div class="col-airline col-md-2 col-xs-3 text-center">
                    <!--.gamification(ng-if="$index === 0") Collect {{ leg.gamificationPoints }} upsell points--><img ng-src="images/app/logos/zs.jpg" alt="Airline logo" class="airline-logo-gamification" src="images/app/logos/zs.jpg">
                    <div class="flight-code hidden-sm hidden-xs ng-binding">ZS-99</div>
                    <!-- ngIf: $index == 0 && leg.segments.length == 1 -->
                </div>
                <div class="flight-details col-md-4 col-md-offset-2 hidden-sm hidden-xs">
                    <div class="row top">
                        <div class="col-xs-4 time-from"><span class="ng-binding">10:55</span></div>
                        <div class="col-xs-4 time-to"><span class="ng-binding">13:35</span></div>
                        <div class="col-xs-4 time-duration"><span class="ng-binding">08h 40m</span></div>
                    </div>
                    <div class="row bottom text-left text-gray">
                        <div class="col-xs-4 iata-from"><strong class="ng-binding">FRA</strong></div>
                        <div class="pos-absolute col-xs-3 col-xs-offset-1 arrow-picture"></div>
                        <div class="col-xs-4 iata-to"><strong class="ng-binding">JFK(747-400)</strong></div>
                        <div class="col-xs-4 percent-on-time text-dark"><strong class="ng-binding">88 %</strong><span>&nbsp;on time</span></div>
                    </div>
                </div>
                <!-- ngIf: $index == 0 -->
                <!-- ngIf: leg.segments.length > 1 --><div ng-if="leg.segments.length > 1" class="flight-details-sm col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">10:55</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">13:35</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">FRA</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">JFK</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 --><div ng-if="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price ng-scope">
                <div class="text-center">Included in price</div>
                <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries center-block ng-scope">
                <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Meal &amp; Bar" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
            </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
            </div><!-- end ngIf: ancillaries.included && ancillaries.included.length > 0 -->
            </div><!-- end ngIf: leg.segments.length > 1 -->
                <div ng-class="{'has-optional-extras': policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0}" class="col-md-3 col-md-offset-4 col-ancillaries hidden-sm hidden-xs has-optional-extras">
                    <div ng-show="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price">
                        <div education-popup="http://search/ancillariesIncludedInPrice" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Included </span><br class="ng-scope"><span class="ng-scope">in price</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Meal &amp; Bar" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
                    </div>
                    <div ng-show="policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0" class="row optional-extras">
                        <div education-popup="http://search/ancillariesOptional" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Optional </span><br class="ng-scope"><span class="ng-scope">extras</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.optional] --><!-- ngInclude: 'inline_ancillary.html' --><ul ng-repeat="ancillaries in [ancillaries.optional]" ng-include="'inline_ancillary.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/second_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">50</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/third_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">100</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.optional] -->
                    </div>
                </div>
                <!-- ngIf: !leg.segments.length == $index -->
                <!-- ngIf: !leg.segments.length == $index -->
                <!-- ngIf: leg.segments.length > 1 && !leg.segments.length == $index -->
                <!-- ngIf: $index == 0 -->
                <div class="vr col-md-offset-9 border-right-colored hidden-sm hidden-xs"></div>
                <div class="vr col-md-offset-10 border-right-colored hidden-sm hidden-xs"></div>
            </div><!-- end ngRepeat: segment in leg.segments track by $index -->
                <!-- ngIf: leg.segments.length > 1 --><button ng-if="leg.segments.length > 1" type="button" ng-click="smViewDetails()" title="Hide Details" class="pos-absolute-bottom-right btn btn-default btn-details-collapse hidden-md hidden-lg ng-scope"><i class="fa fa-toggle-up"></i></button><!-- end ngIf: leg.segments.length > 1 -->
            </div>
        </div><!-- end ngRepeat: leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse --><!-- ngInclude: 'resultItem.html' --><div ng-include="'resultItem.html'" ng-repeat="leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse" ng-model="leg" ng-show="isVisible() &amp;&amp; isFilterAllowed() &amp;&amp; isFlightDetailsFilterAllowed() &amp;&amp; isAdvancedFilterAllowed()" ng-controller="legController" class="ng-pristine ng-untouched ng-valid ng-scope">
            <div ng-show="leg.selectedClass === undefined" data-operating-airline="DM" ng-class="{'has-segments': leg.segments.length > 1, 'leg-details-hidden': !smDetailsVisible, 'just-for-you': personalizationService.isApplicableToPersona(leg) }" class="results-item ng-scope has-segments leg-details-hidden">
                <div ng-show="policyService.violatesRules(leg)" class="pos-absolute-full-height out-of-policy ng-hide"></div>
                <!-- ngRepeat: segment in leg.segments track by $index --><div ng-repeat="segment in leg.segments track by $index" ng-controller="segmentController" ng-class="{'leg-segment-nth': $index > 0}" class="row leg-segment ng-scope">
                <dl class="just-for-you-cover col-md-2 col-xs-3 col-xs-offset-9 col-md-offset-10 pos-absolute-full-height">
                    <!-- ngIf: $index == 0 --><dt ng-if="$index == 0" education-popup="http://search/personalizedSearch" icon-type="2" icon-color="orange" direction="bottom|right" override-position-relative="true" class="pos-absolute-full-parent ng-scope ng-isolate-scope"><ng-transclude>
                    <h4 class="ng-scope">Just for you</h4>
                </ng-transclude><div class="education-element-2 educational-color-orange" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|right" ns-popover-timeout="0"></div></dt><!-- end ngIf: $index == 0 -->
                    <!-- ngIf: $index > 0 -->
                </dl>
                <div class="col-airline col-md-2 col-xs-3 text-center">
                    <!--.gamification(ng-if="$index === 0") Collect {{ leg.gamificationPoints }} upsell points--><img ng-src="images/app/logos/dm.jpg" alt="Airline logo" class="airline-logo-gamification" src="images/app/logos/dm.jpg">
                    <div class="flight-code hidden-sm hidden-xs ng-binding">DM-75</div>
                    <!-- ngIf: $index == 0 && leg.segments.length == 1 -->
                </div>
                <div class="flight-details col-md-4 col-md-offset-2 hidden-sm hidden-xs">
                    <div class="row top">
                        <div class="col-xs-4 time-from"><span class="ng-binding">07:30</span></div>
                        <div class="col-xs-4 time-to"><span class="ng-binding">07:40</span></div>
                        <div class="col-xs-4 time-duration"><span class="ng-binding">01h 10m</span></div>
                    </div>
                    <div class="row bottom text-left text-gray">
                        <div class="col-xs-4 iata-from"><strong class="ng-binding">CDG</strong></div>
                        <div class="pos-absolute col-xs-3 col-xs-offset-1 arrow-picture"></div>
                        <div class="col-xs-4 iata-to"><strong class="ng-binding">LHR(A320)</strong></div>
                        <div class="col-xs-4 percent-on-time text-dark"><strong class="ng-binding">78 %</strong><span>&nbsp;on time</span></div>
                    </div>
                </div>
                <!-- ngIf: $index == 0 --><div ng-if="$index == 0" class="flight-details-sm flight-details-shortcut col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">07:30</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <!-- ngIf: leg.segments.length > 1 --><div ng-if="leg.segments.length > 1" class="stops col-xs-offset-5 col-xs-2 ng-binding ng-scope">1 stop</div><!-- end ngIf: leg.segments.length > 1 -->
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">11:40</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">CDG</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">JFK</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 && leg.segments.length == 1 -->
                <!-- ngIf: leg.segments.length > 1 --><div ng-if="leg.segments.length > 1" class="row view-details text-center ng-scope">
                <button type="button" ng-click="smViewDetails()" class="btn btn-success btn-details">View Details</button>
            </div><!-- end ngIf: leg.segments.length > 1 -->
            </div><!-- end ngIf: $index == 0 -->
                <!-- ngIf: leg.segments.length > 1 --><div ng-if="leg.segments.length > 1" class="flight-details-sm col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">07:30</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">07:40</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">CDG</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">LHR</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 --><div ng-if="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price ng-scope included-ancillaries-solo">
                <div class="text-center">Included in price</div>
                <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries center-block ng-scope">
                <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Fast Track" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/fast_track_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/fast_track_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Lounge" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/lounge_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/lounge_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
            </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
            </div><!-- end ngIf: ancillaries.included && ancillaries.included.length > 0 -->
            </div><!-- end ngIf: leg.segments.length > 1 -->
                <div ng-class="{'has-optional-extras': policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0}" class="col-md-3 col-md-offset-4 col-ancillaries hidden-sm hidden-xs">
                    <div ng-show="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price included-ancillaries-solo">
                        <div education-popup="http://search/ancillariesIncludedInPrice" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Included </span><br class="ng-scope"><span class="ng-scope">in price</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Fast Track" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/fast_track_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/fast_track_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Lounge" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/lounge_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/lounge_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
                    </div>
                    <div ng-show="policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0" class="row optional-extras ng-hide">
                        <div education-popup="http://search/ancillariesOptional" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Optional </span><br class="ng-scope"><span class="ng-scope">extras</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.optional] --><!-- ngInclude: 'inline_ancillary.html' --><ul ng-repeat="ancillaries in [ancillaries.optional]" ng-include="'inline_ancillary.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.optional] -->
                    </div>
                </div>
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="col-md-1 col-fares pos-absolute-full-height col-md-offset-9 text-dark hidden-sm hidden-xs ng-scope">
                <div class="text-gray ng-binding">Non-Flex</div>
                <div class="strong ng-binding">economy</div>
                <div class="show-all-fares pos-absolute-bottom-left border-top-colored"><a ng-click="showAllFares(leg)">Show all<span class="arrow-part"> fares&nbsp;<span class="fa fa-angle-right"></span></span></a></div>
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="price-block col-md-2 col-xs-3 col-xs-offset-6 col-md-offset-1 ng-scope">
                <p><span class="currency"></span><span class="price ng-binding">840</span></p>
                <!-- ngIf: roundTripPrice(leg) > 0 -->
                <div ng-show="leg.combinable" ng-init="leg.combinable = true" ng-class="selectionMode" class="book">
                    <label ng-class="{ 'orange-color-unselect': leg.selected === true }" class="btn btn-primary select-btn">
                        <input type="checkbox" ng-model="leg.selected" ng-click="toggleFlight(leg)" class="hidden ng-pristine ng-untouched ng-valid"><span ng-show="selectionMode == 'book'" class="ng-binding">Select</span><span ng-show="selectionMode == 'compare'" class="ng-binding ng-hide">Compare</span>
                    </label>
                </div>
                <!-- ngIf: personalizationService.isApplicableToPersona(leg) -->
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: leg.segments.length > 1 && !leg.segments.length == $index --><div ng-if="leg.segments.length > 1 &amp;&amp; !leg.segments.length == $index" class="hr col-md-10 col-xs-9 ng-scope"></div><!-- end ngIf: leg.segments.length > 1 && !leg.segments.length == $index -->
                <!-- ngIf: $index == 0 --><label ng-if="$index == 0" class="select-flight ng-scope">
                <input type="checkbox" ng-click="selectFlightToCompare(leg)" class="hidden"><span class="checkbox"></span>
            </label><!-- end ngIf: $index == 0 -->
                <div class="vr col-md-offset-9 border-right-colored hidden-sm hidden-xs"></div>
                <div class="vr col-md-offset-10 border-right-colored hidden-sm hidden-xs"></div>
            </div><!-- end ngRepeat: segment in leg.segments track by $index --><div ng-repeat="segment in leg.segments track by $index" ng-controller="segmentController" ng-class="{'leg-segment-nth': $index > 0}" class="row leg-segment ng-scope leg-segment-nth">
                <dl class="just-for-you-cover col-md-2 col-xs-3 col-xs-offset-9 col-md-offset-10 pos-absolute-full-height">
                    <!-- ngIf: $index == 0 -->
                    <!-- ngIf: $index > 0 --><dt ng-if="$index > 0" class="pos-absolute-full-parent ng-scope"></dt><!-- end ngIf: $index > 0 -->
                </dl>
                <div class="col-airline col-md-2 col-xs-3 text-center">
                    <!--.gamification(ng-if="$index === 0") Collect {{ leg.gamificationPoints }} upsell points--><img ng-src="images/app/logos/dm.jpg" alt="Airline logo" class="airline-logo-gamification" src="images/app/logos/dm.jpg">
                    <div class="flight-code hidden-sm hidden-xs ng-binding">DM-68</div>
                    <!-- ngIf: $index == 0 && leg.segments.length == 1 -->
                </div>
                <div class="flight-details col-md-4 col-md-offset-2 hidden-sm hidden-xs">
                    <div class="row top">
                        <div class="col-xs-4 time-from"><span class="ng-binding">08:50</span></div>
                        <div class="col-xs-4 time-to"><span class="ng-binding">11:40</span></div>
                        <div class="col-xs-4 time-duration"><span class="ng-binding">07h 50m</span></div>
                    </div>
                    <div class="row bottom text-left text-gray">
                        <div class="col-xs-4 iata-from"><strong class="ng-binding">LHR</strong></div>
                        <div class="pos-absolute col-xs-3 col-xs-offset-1 arrow-picture"></div>
                        <div class="col-xs-4 iata-to"><strong class="ng-binding">JFK(747)</strong></div>
                        <div class="col-xs-4 percent-on-time text-dark"><strong class="ng-binding">98 %</strong><span>&nbsp;on time</span></div>
                    </div>
                </div>
                <!-- ngIf: $index == 0 -->
                <!-- ngIf: leg.segments.length > 1 --><div ng-if="leg.segments.length > 1" class="flight-details-sm col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">08:50</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">11:40</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">LHR</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">JFK</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 --><div ng-if="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price ng-scope included-ancillaries-solo">
                <div class="text-center">Included in price</div>
                <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries center-block ng-scope">
                <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Meal &amp; Bar" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Priority Boarding" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/priority_boarding_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/priority_boarding_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Fast Track" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/fast_track_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/fast_track_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Lounge" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/lounge_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/lounge_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
            </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
            </div><!-- end ngIf: ancillaries.included && ancillaries.included.length > 0 -->
            </div><!-- end ngIf: leg.segments.length > 1 -->
                <div ng-class="{'has-optional-extras': policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0}" class="col-md-3 col-md-offset-4 col-ancillaries hidden-sm hidden-xs">
                    <div ng-show="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price included-ancillaries-solo">
                        <div education-popup="http://search/ancillariesIncludedInPrice" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Included </span><br class="ng-scope"><span class="ng-scope">in price</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Meal &amp; Bar" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Priority Boarding" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/priority_boarding_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/priority_boarding_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Fast Track" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/fast_track_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/fast_track_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Lounge" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/lounge_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/lounge_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
                    </div>
                    <div ng-show="policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0" class="row optional-extras ng-hide">
                        <div education-popup="http://search/ancillariesOptional" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Optional </span><br class="ng-scope"><span class="ng-scope">extras</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.optional] --><!-- ngInclude: 'inline_ancillary.html' --><ul ng-repeat="ancillaries in [ancillaries.optional]" ng-include="'inline_ancillary.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.optional] -->
                    </div>
                </div>
                <!-- ngIf: !leg.segments.length == $index -->
                <!-- ngIf: !leg.segments.length == $index -->
                <!-- ngIf: leg.segments.length > 1 && !leg.segments.length == $index -->
                <!-- ngIf: $index == 0 -->
                <div class="vr col-md-offset-9 border-right-colored hidden-sm hidden-xs"></div>
                <div class="vr col-md-offset-10 border-right-colored hidden-sm hidden-xs"></div>
            </div><!-- end ngRepeat: segment in leg.segments track by $index -->
                <!-- ngIf: leg.segments.length > 1 --><button ng-if="leg.segments.length > 1" type="button" ng-click="smViewDetails()" title="Hide Details" class="pos-absolute-bottom-right btn btn-default btn-details-collapse hidden-md hidden-lg ng-scope"><i class="fa fa-toggle-up"></i></button><!-- end ngIf: leg.segments.length > 1 -->
            </div>
        </div><!-- end ngRepeat: leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse --><!-- ngInclude: 'resultItem.html' --><div ng-include="'resultItem.html'" ng-repeat="leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse" ng-model="leg" ng-show="isVisible() &amp;&amp; isFilterAllowed() &amp;&amp; isFlightDetailsFilterAllowed() &amp;&amp; isAdvancedFilterAllowed()" ng-controller="legController" class="ng-pristine ng-untouched ng-valid ng-scope">
            <div ng-show="leg.selectedClass === undefined" data-operating-airline="OL" ng-class="{'has-segments': leg.segments.length > 1, 'leg-details-hidden': !smDetailsVisible, 'just-for-you': personalizationService.isApplicableToPersona(leg) }" class="results-item ng-scope has-segments leg-details-hidden">
                <div ng-show="policyService.violatesRules(leg)" class="pos-absolute-full-height out-of-policy ng-hide"></div>
                <!-- ngRepeat: segment in leg.segments track by $index --><div ng-repeat="segment in leg.segments track by $index" ng-controller="segmentController" ng-class="{'leg-segment-nth': $index > 0}" class="row leg-segment ng-scope">
                <dl class="just-for-you-cover col-md-2 col-xs-3 col-xs-offset-9 col-md-offset-10 pos-absolute-full-height">
                    <!-- ngIf: $index == 0 --><dt ng-if="$index == 0" education-popup="http://search/personalizedSearch" icon-type="2" icon-color="orange" direction="bottom|right" override-position-relative="true" class="pos-absolute-full-parent ng-scope ng-isolate-scope"><ng-transclude>
                    <h4 class="ng-scope">Just for you</h4>
                </ng-transclude><div class="education-element-2 educational-color-orange" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|right" ns-popover-timeout="0"></div></dt><!-- end ngIf: $index == 0 -->
                    <!-- ngIf: $index > 0 -->
                </dl>
                <div class="col-airline col-md-2 col-xs-3 text-center">
                    <!--.gamification(ng-if="$index === 0") Collect {{ leg.gamificationPoints }} upsell points--><img ng-src="images/app/logos/ol.jpg" alt="Airline logo" class="airline-logo-gamification" src="images/app/logos/ol.jpg">
                    <div class="flight-code hidden-sm hidden-xs ng-binding">OL-75</div>
                    <!-- ngIf: $index == 0 && leg.segments.length == 1 -->
                </div>
                <div class="flight-details col-md-4 col-md-offset-2 hidden-sm hidden-xs">
                    <div class="row top">
                        <div class="col-xs-4 time-from"><span class="ng-binding">10:15</span></div>
                        <div class="col-xs-4 time-to"><span class="ng-binding">11:10</span></div>
                        <div class="col-xs-4 time-duration"><span class="ng-binding">01h 55m</span></div>
                    </div>
                    <div class="row bottom text-left text-gray">
                        <div class="col-xs-4 iata-from"><strong class="ng-binding">CDG</strong></div>
                        <div class="pos-absolute col-xs-3 col-xs-offset-1 arrow-picture"></div>
                        <div class="col-xs-4 iata-to"><strong class="ng-binding">LHR(777-300)</strong></div>
                        <div class="col-xs-4 percent-on-time text-dark"><strong class="ng-binding">78 %</strong><span>&nbsp;on time</span></div>
                    </div>
                </div>
                <!-- ngIf: $index == 0 --><div ng-if="$index == 0" class="flight-details-sm flight-details-shortcut col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">10:15</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <!-- ngIf: leg.segments.length > 1 --><div ng-if="leg.segments.length > 1" class="stops col-xs-offset-5 col-xs-2 ng-binding ng-scope">1 stop</div><!-- end ngIf: leg.segments.length > 1 -->
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">17:55</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">CDG</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">JFK</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 && leg.segments.length == 1 -->
                <!-- ngIf: leg.segments.length > 1 --><div ng-if="leg.segments.length > 1" class="row view-details text-center ng-scope">
                <button type="button" ng-click="smViewDetails()" class="btn btn-success btn-details">View Details</button>
            </div><!-- end ngIf: leg.segments.length > 1 -->
            </div><!-- end ngIf: $index == 0 -->
                <!-- ngIf: leg.segments.length > 1 --><div ng-if="leg.segments.length > 1" class="flight-details-sm col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">10:15</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">11:10</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">CDG</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">LHR</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 --><div ng-if="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price ng-scope">
                <div class="text-center">Included in price</div>
                <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries center-block ng-scope">
                <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
            </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
            </div><!-- end ngIf: ancillaries.included && ancillaries.included.length > 0 -->
            </div><!-- end ngIf: leg.segments.length > 1 -->
                <div ng-class="{'has-optional-extras': policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0}" class="col-md-3 col-md-offset-4 col-ancillaries hidden-sm hidden-xs has-optional-extras">
                    <div ng-show="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price">
                        <div education-popup="http://search/ancillariesIncludedInPrice" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Included </span><br class="ng-scope"><span class="ng-scope">in price</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
                    </div>
                    <div ng-show="policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0" class="row optional-extras">
                        <div education-popup="http://search/ancillariesOptional" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Optional </span><br class="ng-scope"><span class="ng-scope">extras</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.optional] --><!-- ngInclude: 'inline_ancillary.html' --><ul ng-repeat="ancillaries in [ancillaries.optional]" ng-include="'inline_ancillary.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Snacks &amp; Drinks" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/meal.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">15</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/first_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">25</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/second_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">50</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/third_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">100</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.optional] -->
                    </div>
                </div>
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="col-md-1 col-fares pos-absolute-full-height col-md-offset-9 text-dark hidden-sm hidden-xs ng-scope">
                <div class="text-gray ng-binding">Non-Flex</div>
                <div class="strong ng-binding">economy</div>
                <div class="show-all-fares pos-absolute-bottom-left border-top-colored"><a ng-click="showAllFares(leg)">Show all<span class="arrow-part"> fares&nbsp;<span class="fa fa-angle-right"></span></span></a></div>
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="price-block col-md-2 col-xs-3 col-xs-offset-6 col-md-offset-1 ng-scope">
                <p><span class="currency"></span><span class="price ng-binding">657</span></p>
                <!-- ngIf: roundTripPrice(leg) > 0 -->
                <div ng-show="leg.combinable" ng-init="leg.combinable = true" ng-class="selectionMode" class="book">
                    <label ng-class="{ 'orange-color-unselect': leg.selected === true }" class="btn btn-primary select-btn">
                        <input type="checkbox" ng-model="leg.selected" ng-click="toggleFlight(leg)" class="hidden ng-pristine ng-untouched ng-valid"><span ng-show="selectionMode == 'book'" class="ng-binding">Select</span><span ng-show="selectionMode == 'compare'" class="ng-binding ng-hide">Compare</span>
                    </label>
                </div>
                <!-- ngIf: personalizationService.isApplicableToPersona(leg) -->
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: leg.segments.length > 1 && !leg.segments.length == $index --><div ng-if="leg.segments.length > 1 &amp;&amp; !leg.segments.length == $index" class="hr col-md-10 col-xs-9 ng-scope"></div><!-- end ngIf: leg.segments.length > 1 && !leg.segments.length == $index -->
                <!-- ngIf: $index == 0 --><label ng-if="$index == 0" class="select-flight ng-scope">
                <input type="checkbox" ng-click="selectFlightToCompare(leg)" class="hidden"><span class="checkbox"></span>
            </label><!-- end ngIf: $index == 0 -->
                <div class="vr col-md-offset-9 border-right-colored hidden-sm hidden-xs"></div>
                <div class="vr col-md-offset-10 border-right-colored hidden-sm hidden-xs"></div>
            </div><!-- end ngRepeat: segment in leg.segments track by $index --><div ng-repeat="segment in leg.segments track by $index" ng-controller="segmentController" ng-class="{'leg-segment-nth': $index > 0}" class="row leg-segment ng-scope leg-segment-nth">
                <dl class="just-for-you-cover col-md-2 col-xs-3 col-xs-offset-9 col-md-offset-10 pos-absolute-full-height">
                    <!-- ngIf: $index == 0 -->
                    <!-- ngIf: $index > 0 --><dt ng-if="$index > 0" class="pos-absolute-full-parent ng-scope"></dt><!-- end ngIf: $index > 0 -->
                </dl>
                <div class="col-airline col-md-2 col-xs-3 text-center">
                    <!--.gamification(ng-if="$index === 0") Collect {{ leg.gamificationPoints }} upsell points--><img ng-src="images/app/logos/ol.jpg" alt="Airline logo" class="airline-logo-gamification" src="images/app/logos/ol.jpg">
                    <div class="flight-code hidden-sm hidden-xs ng-binding">OL-63</div>
                    <!-- ngIf: $index == 0 && leg.segments.length == 1 -->
                </div>
                <div class="flight-details col-md-4 col-md-offset-2 hidden-sm hidden-xs">
                    <div class="row top">
                        <div class="col-xs-4 time-from"><span class="ng-binding">14:05</span></div>
                        <div class="col-xs-4 time-to"><span class="ng-binding">17:55</span></div>
                        <div class="col-xs-4 time-duration"><span class="ng-binding">08h 50m</span></div>
                    </div>
                    <div class="row bottom text-left text-gray">
                        <div class="col-xs-4 iata-from"><strong class="ng-binding">LHR</strong></div>
                        <div class="pos-absolute col-xs-3 col-xs-offset-1 arrow-picture"></div>
                        <div class="col-xs-4 iata-to"><strong class="ng-binding">JFK(777-300)</strong></div>
                        <div class="col-xs-4 percent-on-time text-dark"><strong class="ng-binding">78 %</strong><span>&nbsp;on time</span></div>
                    </div>
                </div>
                <!-- ngIf: $index == 0 -->
                <!-- ngIf: leg.segments.length > 1 --><div ng-if="leg.segments.length > 1" class="flight-details-sm col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">14:05</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">17:55</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">LHR</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">JFK</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 --><div ng-if="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price ng-scope">
                <div class="text-center">Included in price</div>
                <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries center-block ng-scope">
                <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
            </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
            </div><!-- end ngIf: ancillaries.included && ancillaries.included.length > 0 -->
            </div><!-- end ngIf: leg.segments.length > 1 -->
                <div ng-class="{'has-optional-extras': policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0}" class="col-md-3 col-md-offset-4 col-ancillaries hidden-sm hidden-xs has-optional-extras">
                    <div ng-show="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price">
                        <div education-popup="http://search/ancillariesIncludedInPrice" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Included </span><br class="ng-scope"><span class="ng-scope">in price</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
                    </div>
                    <div ng-show="policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0" class="row optional-extras">
                        <div education-popup="http://search/ancillariesOptional" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Optional </span><br class="ng-scope"><span class="ng-scope">extras</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.optional] --><!-- ngInclude: 'inline_ancillary.html' --><ul ng-repeat="ancillaries in [ancillaries.optional]" ng-include="'inline_ancillary.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Snacks &amp; Drinks" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/meal.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">15</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/first_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">25</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/second_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">50</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/third_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">100</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.optional] -->
                    </div>
                </div>
                <!-- ngIf: !leg.segments.length == $index -->
                <!-- ngIf: !leg.segments.length == $index -->
                <!-- ngIf: leg.segments.length > 1 && !leg.segments.length == $index -->
                <!-- ngIf: $index == 0 -->
                <div class="vr col-md-offset-9 border-right-colored hidden-sm hidden-xs"></div>
                <div class="vr col-md-offset-10 border-right-colored hidden-sm hidden-xs"></div>
            </div><!-- end ngRepeat: segment in leg.segments track by $index -->
                <!-- ngIf: leg.segments.length > 1 --><button ng-if="leg.segments.length > 1" type="button" ng-click="smViewDetails()" title="Hide Details" class="pos-absolute-bottom-right btn btn-default btn-details-collapse hidden-md hidden-lg ng-scope"><i class="fa fa-toggle-up"></i></button><!-- end ngIf: leg.segments.length > 1 -->
            </div>
        </div><!-- end ngRepeat: leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse --><!-- ngInclude: 'resultItem.html' --><div ng-include="'resultItem.html'" ng-repeat="leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse" ng-model="leg" ng-show="isVisible() &amp;&amp; isFilterAllowed() &amp;&amp; isFlightDetailsFilterAllowed() &amp;&amp; isAdvancedFilterAllowed()" ng-controller="legController" class="ng-pristine ng-untouched ng-valid ng-scope ng-hide">
            <div ng-show="leg.selectedClass === undefined" data-operating-airline="CO" ng-class="{'has-segments': leg.segments.length > 1, 'leg-details-hidden': !smDetailsVisible, 'just-for-you': personalizationService.isApplicableToPersona(leg) }" class="results-item ng-scope leg-details-hidden">
                <div ng-show="policyService.violatesRules(leg)" class="pos-absolute-full-height out-of-policy"></div>
                <!-- ngRepeat: segment in leg.segments track by $index --><div ng-repeat="segment in leg.segments track by $index" ng-controller="segmentController" ng-class="{'leg-segment-nth': $index > 0}" class="row leg-segment ng-scope">
                <dl class="just-for-you-cover col-md-2 col-xs-3 col-xs-offset-9 col-md-offset-10 pos-absolute-full-height">
                    <!-- ngIf: $index == 0 --><dt ng-if="$index == 0" education-popup="http://search/personalizedSearch" icon-type="2" icon-color="orange" direction="bottom|right" override-position-relative="true" class="pos-absolute-full-parent ng-scope ng-isolate-scope"><ng-transclude>
                    <h4 class="ng-scope">Just for you</h4>
                </ng-transclude><div class="education-element-2 educational-color-orange" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|right" ns-popover-timeout="0"></div></dt><!-- end ngIf: $index == 0 -->
                    <!-- ngIf: $index > 0 -->
                </dl>
                <div class="col-airline col-md-2 col-xs-3 text-center">
                    <!--.gamification(ng-if="$index === 0") Collect {{ leg.gamificationPoints }} upsell points--><img ng-src="images/app/logos/co.jpg" alt="Airline logo" class="airline-logo-gamification" src="images/app/logos/co.jpg">
                    <div class="flight-code hidden-sm hidden-xs ng-binding">CO-75</div>
                    <!-- ngIf: $index == 0 && leg.segments.length == 1 --><div ng-if="$index == 0 &amp;&amp; leg.segments.length == 1" class="airline-data-sm hidden-md hidden-lg text-center ng-scope">
                    <div class="flight-code ng-binding">CO-75</div>
                    <div class="flight-equipment ng-binding">(767 jet)</div>
                </div><!-- end ngIf: $index == 0 && leg.segments.length == 1 -->
                </div>
                <div class="flight-details col-md-4 col-md-offset-2 hidden-sm hidden-xs">
                    <div class="row top">
                        <div class="col-xs-4 time-from"><span class="ng-binding">11:10</span></div>
                        <div class="col-xs-4 time-to"><span class="ng-binding">14:00</span></div>
                        <div class="col-xs-4 time-duration"><span class="ng-binding">08h 50m</span></div>
                    </div>
                    <div class="row bottom text-left text-gray">
                        <div class="col-xs-4 iata-from"><strong class="ng-binding">CDG</strong></div>
                        <div class="pos-absolute col-xs-3 col-xs-offset-1 arrow-picture"></div>
                        <div class="col-xs-4 iata-to"><strong class="ng-binding">JFK(767 jet)</strong></div>
                        <div class="col-xs-4 percent-on-time text-dark"><strong class="ng-binding">78 %</strong><span>&nbsp;on time</span></div>
                    </div>
                </div>
                <!-- ngIf: $index == 0 --><div ng-if="$index == 0" class="flight-details-sm flight-details-shortcut col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">11:10</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <!-- ngIf: leg.segments.length > 1 -->
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">14:00</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">CDG</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">JFK</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 && leg.segments.length == 1 --><div ng-if="ancillaries.included &amp;&amp; ancillaries.included.length > 0 &amp;&amp; leg.segments.length == 1" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price ng-scope">
                <div class="text-center">Included in price</div>
                <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries center-block ng-scope">
                <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
            </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
            </div><!-- end ngIf: ancillaries.included && ancillaries.included.length > 0 && leg.segments.length == 1 -->
                <!-- ngIf: leg.segments.length > 1 -->
            </div><!-- end ngIf: $index == 0 -->
                <!-- ngIf: leg.segments.length > 1 -->
                <div ng-class="{'has-optional-extras': policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0}" class="col-md-3 col-md-offset-4 col-ancillaries hidden-sm hidden-xs has-optional-extras">
                    <div ng-show="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price">
                        <div education-popup="http://search/ancillariesIncludedInPrice" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Included </span><br class="ng-scope"><span class="ng-scope">in price</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
                    </div>
                    <div ng-show="policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0" class="row optional-extras">
                        <div education-popup="http://search/ancillariesOptional" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Optional </span><br class="ng-scope"><span class="ng-scope">extras</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.optional] --><!-- ngInclude: 'inline_ancillary.html' --><ul ng-repeat="ancillaries in [ancillaries.optional]" ng-include="'inline_ancillary.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/second_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">100</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/third_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">200</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.optional] -->
                    </div>
                </div>
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="col-md-1 col-fares pos-absolute-full-height col-md-offset-9 text-dark hidden-sm hidden-xs ng-scope">
                <div class="text-gray ng-binding">Econ Flex</div>
                <div class="strong ng-binding">economy</div>
                <div class="show-all-fares pos-absolute-bottom-left border-top-colored"><a ng-click="showAllFares(leg)">Show all<span class="arrow-part"> fares&nbsp;<span class="fa fa-angle-right"></span></span></a></div>
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="price-block col-md-2 col-xs-3 col-xs-offset-6 col-md-offset-1 ng-scope">
                <p><span class="currency"></span><span class="price ng-binding">931</span></p>
                <!-- ngIf: roundTripPrice(leg) > 0 -->
                <div ng-show="leg.combinable" ng-init="leg.combinable = true" ng-class="selectionMode" class="book">
                    <label ng-class="{ 'orange-color-unselect': leg.selected === true }" class="btn btn-primary select-btn">
                        <input type="checkbox" ng-model="leg.selected" ng-click="toggleFlight(leg)" class="hidden ng-pristine ng-untouched ng-valid"><span ng-show="selectionMode == 'book'" class="ng-binding">Select</span><span ng-show="selectionMode == 'compare'" class="ng-binding ng-hide">Compare</span>
                    </label>
                </div>
                <!-- ngIf: personalizationService.isApplicableToPersona(leg) -->
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: leg.segments.length > 1 && !leg.segments.length == $index -->
                <!-- ngIf: $index == 0 --><label ng-if="$index == 0" class="select-flight ng-scope">
                <input type="checkbox" ng-click="selectFlightToCompare(leg)" class="hidden"><span class="checkbox"></span>
            </label><!-- end ngIf: $index == 0 -->
                <div class="vr col-md-offset-9 border-right-colored hidden-sm hidden-xs"></div>
                <div class="vr col-md-offset-10 border-right-colored hidden-sm hidden-xs"></div>
            </div><!-- end ngRepeat: segment in leg.segments track by $index -->
                <!-- ngIf: leg.segments.length > 1 -->
            </div>
        </div><!-- end ngRepeat: leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse --><!-- ngInclude: 'resultItem.html' --><div ng-include="'resultItem.html'" ng-repeat="leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse" ng-model="leg" ng-show="isVisible() &amp;&amp; isFilterAllowed() &amp;&amp; isFlightDetailsFilterAllowed() &amp;&amp; isAdvancedFilterAllowed()" ng-controller="legController" class="ng-pristine ng-untouched ng-valid ng-scope ng-hide">
            <div ng-show="leg.selectedClass === undefined" data-operating-airline="CO" ng-class="{'has-segments': leg.segments.length > 1, 'leg-details-hidden': !smDetailsVisible, 'just-for-you': personalizationService.isApplicableToPersona(leg) }" class="results-item ng-scope leg-details-hidden">
                <div ng-show="policyService.violatesRules(leg)" class="pos-absolute-full-height out-of-policy"></div>
                <!-- ngRepeat: segment in leg.segments track by $index --><div ng-repeat="segment in leg.segments track by $index" ng-controller="segmentController" ng-class="{'leg-segment-nth': $index > 0}" class="row leg-segment ng-scope">
                <dl class="just-for-you-cover col-md-2 col-xs-3 col-xs-offset-9 col-md-offset-10 pos-absolute-full-height">
                    <!-- ngIf: $index == 0 --><dt ng-if="$index == 0" education-popup="http://search/personalizedSearch" icon-type="2" icon-color="orange" direction="bottom|right" override-position-relative="true" class="pos-absolute-full-parent ng-scope ng-isolate-scope"><ng-transclude>
                    <h4 class="ng-scope">Just for you</h4>
                </ng-transclude><div class="education-element-2 educational-color-orange" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|right" ns-popover-timeout="0"></div></dt><!-- end ngIf: $index == 0 -->
                    <!-- ngIf: $index > 0 -->
                </dl>
                <div class="col-airline col-md-2 col-xs-3 text-center">
                    <!--.gamification(ng-if="$index === 0") Collect {{ leg.gamificationPoints }} upsell points--><img ng-src="images/app/logos/co.jpg" alt="Airline logo" class="airline-logo-gamification" src="images/app/logos/co.jpg">
                    <div class="flight-code hidden-sm hidden-xs ng-binding">CO-85</div>
                    <!-- ngIf: $index == 0 && leg.segments.length == 1 --><div ng-if="$index == 0 &amp;&amp; leg.segments.length == 1" class="airline-data-sm hidden-md hidden-lg text-center ng-scope">
                    <div class="flight-code ng-binding">CO-85</div>
                    <div class="flight-equipment ng-binding">(767 jet)</div>
                </div><!-- end ngIf: $index == 0 && leg.segments.length == 1 -->
                </div>
                <div class="flight-details col-md-4 col-md-offset-2 hidden-sm hidden-xs">
                    <div class="row top">
                        <div class="col-xs-4 time-from"><span class="ng-binding">14:10</span></div>
                        <div class="col-xs-4 time-to"><span class="ng-binding">17:00</span></div>
                        <div class="col-xs-4 time-duration"><span class="ng-binding">08h 50m</span></div>
                    </div>
                    <div class="row bottom text-left text-gray">
                        <div class="col-xs-4 iata-from"><strong class="ng-binding">CDG</strong></div>
                        <div class="pos-absolute col-xs-3 col-xs-offset-1 arrow-picture"></div>
                        <div class="col-xs-4 iata-to"><strong class="ng-binding">JFK(767 jet)</strong></div>
                        <div class="col-xs-4 percent-on-time text-dark"><strong class="ng-binding">78 %</strong><span>&nbsp;on time</span></div>
                    </div>
                </div>
                <!-- ngIf: $index == 0 --><div ng-if="$index == 0" class="flight-details-sm flight-details-shortcut col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">14:10</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <!-- ngIf: leg.segments.length > 1 -->
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">17:00</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">CDG</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">JFK</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 && leg.segments.length == 1 --><div ng-if="ancillaries.included &amp;&amp; ancillaries.included.length > 0 &amp;&amp; leg.segments.length == 1" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price ng-scope">
                <div class="text-center">Included in price</div>
                <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries center-block ng-scope">
                <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
            </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
            </div><!-- end ngIf: ancillaries.included && ancillaries.included.length > 0 && leg.segments.length == 1 -->
                <!-- ngIf: leg.segments.length > 1 -->
            </div><!-- end ngIf: $index == 0 -->
                <!-- ngIf: leg.segments.length > 1 -->
                <div ng-class="{'has-optional-extras': policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0}" class="col-md-3 col-md-offset-4 col-ancillaries hidden-sm hidden-xs has-optional-extras">
                    <div ng-show="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price">
                        <div education-popup="http://search/ancillariesIncludedInPrice" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Included </span><br class="ng-scope"><span class="ng-scope">in price</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
                    </div>
                    <div ng-show="policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0" class="row optional-extras">
                        <div education-popup="http://search/ancillariesOptional" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Optional </span><br class="ng-scope"><span class="ng-scope">extras</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.optional] --><!-- ngInclude: 'inline_ancillary.html' --><ul ng-repeat="ancillaries in [ancillaries.optional]" ng-include="'inline_ancillary.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/second_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">100</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/third_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">200</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.optional] -->
                    </div>
                </div>
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="col-md-1 col-fares pos-absolute-full-height col-md-offset-9 text-dark hidden-sm hidden-xs ng-scope">
                <div class="text-gray ng-binding">Econ Flex</div>
                <div class="strong ng-binding">economy</div>
                <div class="show-all-fares pos-absolute-bottom-left border-top-colored"><a ng-click="showAllFares(leg)">Show all<span class="arrow-part"> fares&nbsp;<span class="fa fa-angle-right"></span></span></a></div>
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="price-block col-md-2 col-xs-3 col-xs-offset-6 col-md-offset-1 ng-scope">
                <p><span class="currency"></span><span class="price ng-binding">931</span></p>
                <!-- ngIf: roundTripPrice(leg) > 0 -->
                <div ng-show="leg.combinable" ng-init="leg.combinable = true" ng-class="selectionMode" class="book">
                    <label ng-class="{ 'orange-color-unselect': leg.selected === true }" class="btn btn-primary select-btn">
                        <input type="checkbox" ng-model="leg.selected" ng-click="toggleFlight(leg)" class="hidden ng-pristine ng-untouched ng-valid"><span ng-show="selectionMode == 'book'" class="ng-binding">Select</span><span ng-show="selectionMode == 'compare'" class="ng-binding ng-hide">Compare</span>
                    </label>
                </div>
                <!-- ngIf: personalizationService.isApplicableToPersona(leg) -->
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: leg.segments.length > 1 && !leg.segments.length == $index -->
                <!-- ngIf: $index == 0 --><label ng-if="$index == 0" class="select-flight ng-scope">
                <input type="checkbox" ng-click="selectFlightToCompare(leg)" class="hidden"><span class="checkbox"></span>
            </label><!-- end ngIf: $index == 0 -->
                <div class="vr col-md-offset-9 border-right-colored hidden-sm hidden-xs"></div>
                <div class="vr col-md-offset-10 border-right-colored hidden-sm hidden-xs"></div>
            </div><!-- end ngRepeat: segment in leg.segments track by $index -->
                <!-- ngIf: leg.segments.length > 1 -->
            </div>
        </div><!-- end ngRepeat: leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse --><!-- ngInclude: 'resultItem.html' --><div ng-include="'resultItem.html'" ng-repeat="leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse" ng-model="leg" ng-show="isVisible() &amp;&amp; isFilterAllowed() &amp;&amp; isFlightDetailsFilterAllowed() &amp;&amp; isAdvancedFilterAllowed()" ng-controller="legController" class="ng-pristine ng-untouched ng-valid ng-scope ng-hide">
            <div ng-show="leg.selectedClass === undefined" data-operating-airline="CO" ng-class="{'has-segments': leg.segments.length > 1, 'leg-details-hidden': !smDetailsVisible, 'just-for-you': personalizationService.isApplicableToPersona(leg) }" class="results-item ng-scope leg-details-hidden">
                <div ng-show="policyService.violatesRules(leg)" class="pos-absolute-full-height out-of-policy"></div>
                <!-- ngRepeat: segment in leg.segments track by $index --><div ng-repeat="segment in leg.segments track by $index" ng-controller="segmentController" ng-class="{'leg-segment-nth': $index > 0}" class="row leg-segment ng-scope">
                <dl class="just-for-you-cover col-md-2 col-xs-3 col-xs-offset-9 col-md-offset-10 pos-absolute-full-height">
                    <!-- ngIf: $index == 0 --><dt ng-if="$index == 0" education-popup="http://search/personalizedSearch" icon-type="2" icon-color="orange" direction="bottom|right" override-position-relative="true" class="pos-absolute-full-parent ng-scope ng-isolate-scope"><ng-transclude>
                    <h4 class="ng-scope">Just for you</h4>
                </ng-transclude><div class="education-element-2 educational-color-orange" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|right" ns-popover-timeout="0"></div></dt><!-- end ngIf: $index == 0 -->
                    <!-- ngIf: $index > 0 -->
                </dl>
                <div class="col-airline col-md-2 col-xs-3 text-center">
                    <!--.gamification(ng-if="$index === 0") Collect {{ leg.gamificationPoints }} upsell points--><img ng-src="images/app/logos/co.jpg" alt="Airline logo" class="airline-logo-gamification" src="images/app/logos/co.jpg">
                    <div class="flight-code hidden-sm hidden-xs ng-binding">CO-95</div>
                    <!-- ngIf: $index == 0 && leg.segments.length == 1 --><div ng-if="$index == 0 &amp;&amp; leg.segments.length == 1" class="airline-data-sm hidden-md hidden-lg text-center ng-scope">
                    <div class="flight-code ng-binding">CO-95</div>
                    <div class="flight-equipment ng-binding">(767 jet)</div>
                </div><!-- end ngIf: $index == 0 && leg.segments.length == 1 -->
                </div>
                <div class="flight-details col-md-4 col-md-offset-2 hidden-sm hidden-xs">
                    <div class="row top">
                        <div class="col-xs-4 time-from"><span class="ng-binding">17:10</span></div>
                        <div class="col-xs-4 time-to"><span class="ng-binding">20:00</span></div>
                        <div class="col-xs-4 time-duration"><span class="ng-binding">08h 50m</span></div>
                    </div>
                    <div class="row bottom text-left text-gray">
                        <div class="col-xs-4 iata-from"><strong class="ng-binding">CDG</strong></div>
                        <div class="pos-absolute col-xs-3 col-xs-offset-1 arrow-picture"></div>
                        <div class="col-xs-4 iata-to"><strong class="ng-binding">JFK(767 jet)</strong></div>
                        <div class="col-xs-4 percent-on-time text-dark"><strong class="ng-binding">78 %</strong><span>&nbsp;on time</span></div>
                    </div>
                </div>
                <!-- ngIf: $index == 0 --><div ng-if="$index == 0" class="flight-details-sm flight-details-shortcut col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">17:10</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <!-- ngIf: leg.segments.length > 1 -->
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">20:00</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">CDG</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">JFK</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 && leg.segments.length == 1 --><div ng-if="ancillaries.included &amp;&amp; ancillaries.included.length > 0 &amp;&amp; leg.segments.length == 1" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price ng-scope">
                <div class="text-center">Included in price</div>
                <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries center-block ng-scope">
                <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
            </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
            </div><!-- end ngIf: ancillaries.included && ancillaries.included.length > 0 && leg.segments.length == 1 -->
                <!-- ngIf: leg.segments.length > 1 -->
            </div><!-- end ngIf: $index == 0 -->
                <!-- ngIf: leg.segments.length > 1 -->
                <div ng-class="{'has-optional-extras': policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0}" class="col-md-3 col-md-offset-4 col-ancillaries hidden-sm hidden-xs has-optional-extras">
                    <div ng-show="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price">
                        <div education-popup="http://search/ancillariesIncludedInPrice" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Included </span><br class="ng-scope"><span class="ng-scope">in price</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
                    </div>
                    <div ng-show="policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0" class="row optional-extras">
                        <div education-popup="http://search/ancillariesOptional" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Optional </span><br class="ng-scope"><span class="ng-scope">extras</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.optional] --><!-- ngInclude: 'inline_ancillary.html' --><ul ng-repeat="ancillaries in [ancillaries.optional]" ng-include="'inline_ancillary.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/second_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">100</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/third_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">200</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.optional] -->
                    </div>
                </div>
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="col-md-1 col-fares pos-absolute-full-height col-md-offset-9 text-dark hidden-sm hidden-xs ng-scope">
                <div class="text-gray ng-binding">Econ Flex</div>
                <div class="strong ng-binding">economy</div>
                <div class="show-all-fares pos-absolute-bottom-left border-top-colored"><a ng-click="showAllFares(leg)">Show all<span class="arrow-part"> fares&nbsp;<span class="fa fa-angle-right"></span></span></a></div>
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="price-block col-md-2 col-xs-3 col-xs-offset-6 col-md-offset-1 ng-scope">
                <p><span class="currency"></span><span class="price ng-binding">931</span></p>
                <!-- ngIf: roundTripPrice(leg) > 0 -->
                <div ng-show="leg.combinable" ng-init="leg.combinable = true" ng-class="selectionMode" class="book">
                    <label ng-class="{ 'orange-color-unselect': leg.selected === true }" class="btn btn-primary select-btn">
                        <input type="checkbox" ng-model="leg.selected" ng-click="toggleFlight(leg)" class="hidden ng-pristine ng-untouched ng-valid"><span ng-show="selectionMode == 'book'" class="ng-binding">Select</span><span ng-show="selectionMode == 'compare'" class="ng-binding ng-hide">Compare</span>
                    </label>
                </div>
                <!-- ngIf: personalizationService.isApplicableToPersona(leg) -->
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: leg.segments.length > 1 && !leg.segments.length == $index -->
                <!-- ngIf: $index == 0 --><label ng-if="$index == 0" class="select-flight ng-scope">
                <input type="checkbox" ng-click="selectFlightToCompare(leg)" class="hidden"><span class="checkbox"></span>
            </label><!-- end ngIf: $index == 0 -->
                <div class="vr col-md-offset-9 border-right-colored hidden-sm hidden-xs"></div>
                <div class="vr col-md-offset-10 border-right-colored hidden-sm hidden-xs"></div>
            </div><!-- end ngRepeat: segment in leg.segments track by $index -->
                <!-- ngIf: leg.segments.length > 1 -->
            </div>
        </div><!-- end ngRepeat: leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse --><!-- ngInclude: 'resultItem.html' --><div ng-include="'resultItem.html'" ng-repeat="leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse" ng-model="leg" ng-show="isVisible() &amp;&amp; isFilterAllowed() &amp;&amp; isFlightDetailsFilterAllowed() &amp;&amp; isAdvancedFilterAllowed()" ng-controller="legController" class="ng-pristine ng-untouched ng-valid ng-scope">
            <div ng-show="leg.selectedClass === undefined" data-operating-airline="DM" ng-class="{'has-segments': leg.segments.length > 1, 'leg-details-hidden': !smDetailsVisible, 'just-for-you': personalizationService.isApplicableToPersona(leg) }" class="results-item ng-scope has-segments leg-details-hidden">
                <div ng-show="policyService.violatesRules(leg)" class="pos-absolute-full-height out-of-policy ng-hide"></div>
                <!-- ngRepeat: segment in leg.segments track by $index --><div ng-repeat="segment in leg.segments track by $index" ng-controller="segmentController" ng-class="{'leg-segment-nth': $index > 0}" class="row leg-segment ng-scope">
                <dl class="just-for-you-cover col-md-2 col-xs-3 col-xs-offset-9 col-md-offset-10 pos-absolute-full-height">
                    <!-- ngIf: $index == 0 --><dt ng-if="$index == 0" education-popup="http://search/personalizedSearch" icon-type="2" icon-color="orange" direction="bottom|right" override-position-relative="true" class="pos-absolute-full-parent ng-scope ng-isolate-scope"><ng-transclude>
                    <h4 class="ng-scope">Just for you</h4>
                </ng-transclude><div class="education-element-2 educational-color-orange" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|right" ns-popover-timeout="0"></div></dt><!-- end ngIf: $index == 0 -->
                    <!-- ngIf: $index > 0 -->
                </dl>
                <div class="col-airline col-md-2 col-xs-3 text-center">
                    <!--.gamification(ng-if="$index === 0") Collect {{ leg.gamificationPoints }} upsell points--><img ng-src="images/app/logos/dm.jpg" alt="Airline logo" class="airline-logo-gamification" src="images/app/logos/dm.jpg">
                    <div class="flight-code hidden-sm hidden-xs ng-binding">DM-77</div>
                    <!-- ngIf: $index == 0 && leg.segments.length == 1 -->
                </div>
                <div class="flight-details col-md-4 col-md-offset-2 hidden-sm hidden-xs">
                    <div class="row top">
                        <div class="col-xs-4 time-from"><span class="ng-binding">17:55</span></div>
                        <div class="col-xs-4 time-to"><span class="ng-binding">18:05</span></div>
                        <div class="col-xs-4 time-duration"><span class="ng-binding">01h 10m</span></div>
                    </div>
                    <div class="row bottom text-left text-gray">
                        <div class="col-xs-4 iata-from"><strong class="ng-binding">CDG</strong></div>
                        <div class="pos-absolute col-xs-3 col-xs-offset-1 arrow-picture"></div>
                        <div class="col-xs-4 iata-to"><strong class="ng-binding">LHR(A320)</strong></div>
                        <div class="col-xs-4 percent-on-time text-dark"><strong class="ng-binding">78 %</strong><span>&nbsp;on time</span></div>
                    </div>
                </div>
                <!-- ngIf: $index == 0 --><div ng-if="$index == 0" class="flight-details-sm flight-details-shortcut col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">17:55</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <!-- ngIf: leg.segments.length > 1 --><div ng-if="leg.segments.length > 1" class="stops col-xs-offset-5 col-xs-2 ng-binding ng-scope">1 stop</div><!-- end ngIf: leg.segments.length > 1 -->
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">22:40</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">CDG</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">JFK</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 && leg.segments.length == 1 -->
                <!-- ngIf: leg.segments.length > 1 --><div ng-if="leg.segments.length > 1" class="row view-details text-center ng-scope">
                <button type="button" ng-click="smViewDetails()" class="btn btn-success btn-details">View Details</button>
            </div><!-- end ngIf: leg.segments.length > 1 -->
            </div><!-- end ngIf: $index == 0 -->
                <!-- ngIf: leg.segments.length > 1 --><div ng-if="leg.segments.length > 1" class="flight-details-sm col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">17:55</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">18:05</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">CDG</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">LHR</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 --><div ng-if="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price ng-scope included-ancillaries-solo">
                <div class="text-center">Included in price</div>
                <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries center-block ng-scope">
                <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Fast Track" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/fast_track_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/fast_track_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Lounge" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/lounge_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/lounge_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
            </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
            </div><!-- end ngIf: ancillaries.included && ancillaries.included.length > 0 -->
            </div><!-- end ngIf: leg.segments.length > 1 -->
                <div ng-class="{'has-optional-extras': policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0}" class="col-md-3 col-md-offset-4 col-ancillaries hidden-sm hidden-xs">
                    <div ng-show="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price included-ancillaries-solo">
                        <div education-popup="http://search/ancillariesIncludedInPrice" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Included </span><br class="ng-scope"><span class="ng-scope">in price</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Fast Track" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/fast_track_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/fast_track_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Lounge" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/lounge_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/lounge_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
                    </div>
                    <div ng-show="policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0" class="row optional-extras ng-hide">
                        <div education-popup="http://search/ancillariesOptional" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Optional </span><br class="ng-scope"><span class="ng-scope">extras</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.optional] --><!-- ngInclude: 'inline_ancillary.html' --><ul ng-repeat="ancillaries in [ancillaries.optional]" ng-include="'inline_ancillary.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.optional] -->
                    </div>
                </div>
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="col-md-1 col-fares pos-absolute-full-height col-md-offset-9 text-dark hidden-sm hidden-xs ng-scope">
                <div class="text-gray ng-binding">Non-Flex</div>
                <div class="strong ng-binding">economy</div>
                <div class="show-all-fares pos-absolute-bottom-left border-top-colored"><a ng-click="showAllFares(leg)">Show all<span class="arrow-part"> fares&nbsp;<span class="fa fa-angle-right"></span></span></a></div>
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="price-block col-md-2 col-xs-3 col-xs-offset-6 col-md-offset-1 ng-scope">
                <p><span class="currency"></span><span class="price ng-binding">840</span></p>
                <!-- ngIf: roundTripPrice(leg) > 0 -->
                <div ng-show="leg.combinable" ng-init="leg.combinable = true" ng-class="selectionMode" class="book">
                    <label ng-class="{ 'orange-color-unselect': leg.selected === true }" class="btn btn-primary select-btn">
                        <input type="checkbox" ng-model="leg.selected" ng-click="toggleFlight(leg)" class="hidden ng-pristine ng-untouched ng-valid"><span ng-show="selectionMode == 'book'" class="ng-binding">Select</span><span ng-show="selectionMode == 'compare'" class="ng-binding ng-hide">Compare</span>
                    </label>
                </div>
                <!-- ngIf: personalizationService.isApplicableToPersona(leg) -->
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: leg.segments.length > 1 && !leg.segments.length == $index --><div ng-if="leg.segments.length > 1 &amp;&amp; !leg.segments.length == $index" class="hr col-md-10 col-xs-9 ng-scope"></div><!-- end ngIf: leg.segments.length > 1 && !leg.segments.length == $index -->
                <!-- ngIf: $index == 0 --><label ng-if="$index == 0" class="select-flight ng-scope">
                <input type="checkbox" ng-click="selectFlightToCompare(leg)" class="hidden"><span class="checkbox"></span>
            </label><!-- end ngIf: $index == 0 -->
                <div class="vr col-md-offset-9 border-right-colored hidden-sm hidden-xs"></div>
                <div class="vr col-md-offset-10 border-right-colored hidden-sm hidden-xs"></div>
            </div><!-- end ngRepeat: segment in leg.segments track by $index --><div ng-repeat="segment in leg.segments track by $index" ng-controller="segmentController" ng-class="{'leg-segment-nth': $index > 0}" class="row leg-segment ng-scope leg-segment-nth">
                <dl class="just-for-you-cover col-md-2 col-xs-3 col-xs-offset-9 col-md-offset-10 pos-absolute-full-height">
                    <!-- ngIf: $index == 0 -->
                    <!-- ngIf: $index > 0 --><dt ng-if="$index > 0" class="pos-absolute-full-parent ng-scope"></dt><!-- end ngIf: $index > 0 -->
                </dl>
                <div class="col-airline col-md-2 col-xs-3 text-center">
                    <!--.gamification(ng-if="$index === 0") Collect {{ leg.gamificationPoints }} upsell points--><img ng-src="images/app/logos/dm.jpg" alt="Airline logo" class="airline-logo-gamification" src="images/app/logos/dm.jpg">
                    <div class="flight-code hidden-sm hidden-xs ng-binding">DM-70</div>
                    <!-- ngIf: $index == 0 && leg.segments.length == 1 -->
                </div>
                <div class="flight-details col-md-4 col-md-offset-2 hidden-sm hidden-xs">
                    <div class="row top">
                        <div class="col-xs-4 time-from"><span class="ng-binding">20:00</span></div>
                        <div class="col-xs-4 time-to"><span class="ng-binding">22:40</span></div>
                        <div class="col-xs-4 time-duration"><span class="ng-binding">07h 40m</span></div>
                    </div>
                    <div class="row bottom text-left text-gray">
                        <div class="col-xs-4 iata-from"><strong class="ng-binding">LHR</strong></div>
                        <div class="pos-absolute col-xs-3 col-xs-offset-1 arrow-picture"></div>
                        <div class="col-xs-4 iata-to"><strong class="ng-binding">JFK(747)</strong></div>
                        <div class="col-xs-4 percent-on-time text-dark"><strong class="ng-binding">98 %</strong><span>&nbsp;on time</span></div>
                    </div>
                </div>
                <!-- ngIf: $index == 0 -->
                <!-- ngIf: leg.segments.length > 1 --><div ng-if="leg.segments.length > 1" class="flight-details-sm col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">20:00</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">22:40</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">LHR</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">JFK</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 --><div ng-if="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price ng-scope included-ancillaries-solo">
                <div class="text-center">Included in price</div>
                <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries center-block ng-scope">
                <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Meal &amp; Bar" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Priority Boarding" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/priority_boarding_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/priority_boarding_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Fast Track" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/fast_track_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/fast_track_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Lounge" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/lounge_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/lounge_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
            </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
            </div><!-- end ngIf: ancillaries.included && ancillaries.included.length > 0 -->
            </div><!-- end ngIf: leg.segments.length > 1 -->
                <div ng-class="{'has-optional-extras': policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0}" class="col-md-3 col-md-offset-4 col-ancillaries hidden-sm hidden-xs">
                    <div ng-show="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price included-ancillaries-solo">
                        <div education-popup="http://search/ancillariesIncludedInPrice" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Included </span><br class="ng-scope"><span class="ng-scope">in price</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Meal &amp; Bar" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Priority Boarding" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/priority_boarding_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/priority_boarding_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Fast Track" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/fast_track_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/fast_track_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Lounge" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/lounge_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/lounge_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
                    </div>
                    <div ng-show="policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0" class="row optional-extras ng-hide">
                        <div education-popup="http://search/ancillariesOptional" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Optional </span><br class="ng-scope"><span class="ng-scope">extras</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.optional] --><!-- ngInclude: 'inline_ancillary.html' --><ul ng-repeat="ancillaries in [ancillaries.optional]" ng-include="'inline_ancillary.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.optional] -->
                    </div>
                </div>
                <!-- ngIf: !leg.segments.length == $index -->
                <!-- ngIf: !leg.segments.length == $index -->
                <!-- ngIf: leg.segments.length > 1 && !leg.segments.length == $index -->
                <!-- ngIf: $index == 0 -->
                <div class="vr col-md-offset-9 border-right-colored hidden-sm hidden-xs"></div>
                <div class="vr col-md-offset-10 border-right-colored hidden-sm hidden-xs"></div>
            </div><!-- end ngRepeat: segment in leg.segments track by $index -->
                <!-- ngIf: leg.segments.length > 1 --><button ng-if="leg.segments.length > 1" type="button" ng-click="smViewDetails()" title="Hide Details" class="pos-absolute-bottom-right btn btn-default btn-details-collapse hidden-md hidden-lg ng-scope"><i class="fa fa-toggle-up"></i></button><!-- end ngIf: leg.segments.length > 1 -->
            </div>
        </div><!-- end ngRepeat: leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse -->
        </div><!-- end ngRepeat: direction in ['outbound', 'inbound'] --><div ng-repeat="direction in ['outbound', 'inbound']" ng-show="journeys[direction] &amp;&amp; !noVisibleResults" class="ng-scope">
            <!-- ngIf: showResultsContainer --><div id="filters-container" ng-if="showResultsContainer" class="ng-scope">
            <div class="row header-results-bar-section">
                <div education-popup="http://search/comparisonAlternatives" icon-color="orange" class="col-md-2 col-xs-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" style="position:relative;"><ng-transclude>
                    <div ng-click="doCompare()" class="header-results-bar-option selection-denied hidden-xs hidden-sm ng-scope"><span>Compare</span></div>
                    <div ng-click="doCompare()" class="header-results-bar-option selection-denied hidden-md hidden-lg ng-scope"><span class="fa fa-files-o"></span></div>
                </ng-transclude><div class="education-element-1 educational-color-orange" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                <!--.col-md-1.col-xs-3
            .header-results-bar-option.selection-denied
              span.filter-picture Airline
            -->
                <div class="col-md-4 col-xs-6 text-left">
                    <div ns-popover="" ns-popover-template="flight-details.html" ns-popover-trigger="click" ns-popover-placement="bottom|left" ns-popover-timeout="-1" ns-popover-hide-on-click="false" ns-popover-theme="ns-popover-filters-green-bar-theme flight-details-filter" class="header-results-bar-option selection-denied text-center ng-scope"><span class="filter-picture">Flight Details</span></div>
                </div>
                <div education-popup="http://search/ancillariesServicesRichContent" icon-color="orange" class="col-md-3 hidden-sm hidden-xs text-left ng-isolate-scope" icon-type="1" direction="bottom|left" style="position:relative;"><ng-transclude>
                    <div ns-popover="" ns-popover-template="ancillary-services.html" ns-popover-trigger="click" ns-popover-placement="bottom|left" ns-popover-timeout="-1" ns-popover-theme="ns-popover-filters-green-bar-theme" class="header-results-bar-option selection-denied text-center ng-scope"><span class="filter-picture">Ancillary Services</span></div>
                </ng-transclude><div class="education-element-1 educational-color-orange" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                <div class="col-md-1 hidden-sm hidden-xs">
                    <div ns-popover="" ns-popover-template="flexibility.html" ns-popover-trigger="click" ns-popover-placement="bottom|left" ns-popover-timeout="-1" ns-popover-theme="ns-popover-filters-green-bar-theme" class="header-results-bar-option selection-denied ng-scope"><span class="filter-picture">Flexibility</span></div>
                </div>
                <div class="col-md-2 col-xs-3 pos-relative">
                    <div ns-popover="" ns-popover-template="sort-by-filter.html" ns-popover-trigger="click" ns-popover-placement="bottom|right" ns-popover-timeout="-1" ns-popover-theme="ns-popover-filters-green-bar-theme" class="header-results-bar-option selection-denied sort-by-filter text-center ng-scope"><span>Sort by:&nbsp;</span><span class="sort-by-span ng-binding">Departure</span><!-- ngIf: sortOrder === 'asc' --><!-- ngIf: sortOrder === 'desc' --><i ng-if="sortOrder === 'desc'" ng-click="changeSortOrder('asc')" class="sort-type-caret fa fa-caret-up ng-scope"></i><!-- end ngIf: sortOrder === 'desc' --></div>
                </div>
            </div>
            <div class="results-panel-direction ng-binding">Inbound</div>
        </div><!-- end ngIf: showResultsContainer -->
            <!-- ngRepeat: leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse --><!-- ngInclude: 'resultItem.html' --><div ng-include="'resultItem.html'" ng-repeat="leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse" ng-model="leg" ng-show="isVisible() &amp;&amp; isFilterAllowed() &amp;&amp; isFlightDetailsFilterAllowed() &amp;&amp; isAdvancedFilterAllowed()" ng-controller="legController" class="ng-pristine ng-untouched ng-valid ng-scope ng-hide">
            <div ng-show="leg.selectedClass === undefined" data-operating-airline="CO" ng-class="{'has-segments': leg.segments.length > 1, 'leg-details-hidden': !smDetailsVisible, 'just-for-you': personalizationService.isApplicableToPersona(leg) }" class="results-item ng-scope leg-details-hidden">
                <div ng-show="policyService.violatesRules(leg)" class="pos-absolute-full-height out-of-policy"></div>
                <!-- ngRepeat: segment in leg.segments track by $index --><div ng-repeat="segment in leg.segments track by $index" ng-controller="segmentController" ng-class="{'leg-segment-nth': $index > 0}" class="row leg-segment ng-scope">
                <dl class="just-for-you-cover col-md-2 col-xs-3 col-xs-offset-9 col-md-offset-10 pos-absolute-full-height">
                    <!-- ngIf: $index == 0 --><dt ng-if="$index == 0" education-popup="http://search/personalizedSearch" icon-type="2" icon-color="orange" direction="bottom|right" override-position-relative="true" class="pos-absolute-full-parent ng-scope ng-isolate-scope"><ng-transclude>
                    <h4 class="ng-scope">Just for you</h4>
                </ng-transclude><div class="education-element-2 educational-color-orange" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|right" ns-popover-timeout="0"></div></dt><!-- end ngIf: $index == 0 -->
                    <!-- ngIf: $index > 0 -->
                </dl>
                <div class="col-airline col-md-2 col-xs-3 text-center">
                    <!--.gamification(ng-if="$index === 0") Collect {{ leg.gamificationPoints }} upsell points--><img ng-src="images/app/logos/co.jpg" alt="Airline logo" class="airline-logo-gamification" src="images/app/logos/co.jpg">
                    <div class="flight-code hidden-sm hidden-xs ng-binding">CO-66</div>
                    <!-- ngIf: $index == 0 && leg.segments.length == 1 --><div ng-if="$index == 0 &amp;&amp; leg.segments.length == 1" class="airline-data-sm hidden-md hidden-lg text-center ng-scope">
                    <div class="flight-code ng-binding">CO-66</div>
                    <div class="flight-equipment ng-binding">(767 jet)</div>
                </div><!-- end ngIf: $index == 0 && leg.segments.length == 1 -->
                </div>
                <div class="flight-details col-md-4 col-md-offset-2 hidden-sm hidden-xs">
                    <div class="row top">
                        <div class="col-xs-4 time-from"><span class="ng-binding">11:50</span></div>
                        <div class="col-xs-4 time-to"><span class="ng-binding">01:35</span></div>
                        <div class="col-xs-4 time-duration"><span class="ng-binding">07h 45m</span></div>
                    </div>
                    <div class="row bottom text-left text-gray">
                        <div class="col-xs-4 iata-from"><strong class="ng-binding">JFK</strong></div>
                        <div class="pos-absolute col-xs-3 col-xs-offset-1 arrow-picture"></div>
                        <div class="col-xs-4 iata-to"><strong class="ng-binding">CDG(767 jet)</strong></div>
                        <div class="col-xs-4 percent-on-time text-dark"><strong class="ng-binding">78 %</strong><span>&nbsp;on time</span></div>
                    </div>
                </div>
                <!-- ngIf: $index == 0 --><div ng-if="$index == 0" class="flight-details-sm flight-details-shortcut col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">11:50</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <!-- ngIf: leg.segments.length > 1 -->
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">01:35</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">JFK</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">CDG</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 && leg.segments.length == 1 --><div ng-if="ancillaries.included &amp;&amp; ancillaries.included.length > 0 &amp;&amp; leg.segments.length == 1" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price ng-scope">
                <div class="text-center">Included in price</div>
                <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries center-block ng-scope">
                <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
            </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
            </div><!-- end ngIf: ancillaries.included && ancillaries.included.length > 0 && leg.segments.length == 1 -->
                <!-- ngIf: leg.segments.length > 1 -->
            </div><!-- end ngIf: $index == 0 -->
                <!-- ngIf: leg.segments.length > 1 -->
                <div ng-class="{'has-optional-extras': policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0}" class="col-md-3 col-md-offset-4 col-ancillaries hidden-sm hidden-xs has-optional-extras">
                    <div ng-show="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price">
                        <div education-popup="http://search/ancillariesIncludedInPrice" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Included </span><br class="ng-scope"><span class="ng-scope">in price</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
                    </div>
                    <div ng-show="policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0" class="row optional-extras">
                        <div education-popup="http://search/ancillariesOptional" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Optional </span><br class="ng-scope"><span class="ng-scope">extras</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.optional] --><!-- ngInclude: 'inline_ancillary.html' --><ul ng-repeat="ancillaries in [ancillaries.optional]" ng-include="'inline_ancillary.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/second_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">100</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/third_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">200</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.optional] -->
                    </div>
                </div>
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="col-md-1 col-fares pos-absolute-full-height col-md-offset-9 text-dark hidden-sm hidden-xs ng-scope">
                <div class="text-gray ng-binding">Econ Flex</div>
                <div class="strong ng-binding">economy</div>
                <div class="show-all-fares pos-absolute-bottom-left border-top-colored"><a ng-click="showAllFares(leg)">Show all<span class="arrow-part"> fares&nbsp;<span class="fa fa-angle-right"></span></span></a></div>
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="price-block col-md-2 col-xs-3 col-xs-offset-6 col-md-offset-1 ng-scope">
                <p><span class="currency"></span><span class="price ng-binding">931</span></p>
                <!-- ngIf: roundTripPrice(leg) > 0 -->
                <div ng-show="leg.combinable" ng-init="leg.combinable = true" ng-class="selectionMode" class="book">
                    <label ng-class="{ 'orange-color-unselect': leg.selected === true }" class="btn btn-primary select-btn">
                        <input type="checkbox" ng-model="leg.selected" ng-click="toggleFlight(leg)" class="hidden ng-pristine ng-untouched ng-valid"><span ng-show="selectionMode == 'book'" class="ng-binding">Select</span><span ng-show="selectionMode == 'compare'" class="ng-binding ng-hide">Compare</span>
                    </label>
                </div>
                <!-- ngIf: personalizationService.isApplicableToPersona(leg) -->
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: leg.segments.length > 1 && !leg.segments.length == $index -->
                <!-- ngIf: $index == 0 --><label ng-if="$index == 0" class="select-flight ng-scope">
                <input type="checkbox" ng-click="selectFlightToCompare(leg)" class="hidden"><span class="checkbox"></span>
            </label><!-- end ngIf: $index == 0 -->
                <div class="vr col-md-offset-9 border-right-colored hidden-sm hidden-xs"></div>
                <div class="vr col-md-offset-10 border-right-colored hidden-sm hidden-xs"></div>
            </div><!-- end ngRepeat: segment in leg.segments track by $index -->
                <!-- ngIf: leg.segments.length > 1 -->
            </div>
        </div><!-- end ngRepeat: leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse --><!-- ngInclude: 'resultItem.html' --><div ng-include="'resultItem.html'" ng-repeat="leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse" ng-model="leg" ng-show="isVisible() &amp;&amp; isFilterAllowed() &amp;&amp; isFlightDetailsFilterAllowed() &amp;&amp; isAdvancedFilterAllowed()" ng-controller="legController" class="ng-pristine ng-untouched ng-valid ng-scope">
            <div ng-show="leg.selectedClass === undefined" data-operating-airline="OL" ng-class="{'has-segments': leg.segments.length > 1, 'leg-details-hidden': !smDetailsVisible, 'just-for-you': personalizationService.isApplicableToPersona(leg) }" class="results-item ng-scope leg-details-hidden">
                <div ng-show="policyService.violatesRules(leg)" class="pos-absolute-full-height out-of-policy ng-hide"></div>
                <!-- ngRepeat: segment in leg.segments track by $index --><div ng-repeat="segment in leg.segments track by $index" ng-controller="segmentController" ng-class="{'leg-segment-nth': $index > 0}" class="row leg-segment ng-scope">
                <dl class="just-for-you-cover col-md-2 col-xs-3 col-xs-offset-9 col-md-offset-10 pos-absolute-full-height">
                    <!-- ngIf: $index == 0 --><dt ng-if="$index == 0" education-popup="http://search/personalizedSearch" icon-type="2" icon-color="orange" direction="bottom|right" override-position-relative="true" class="pos-absolute-full-parent ng-scope ng-isolate-scope"><ng-transclude>
                    <h4 class="ng-scope">Just for you</h4>
                </ng-transclude><div class="education-element-2 educational-color-orange" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|right" ns-popover-timeout="0"></div></dt><!-- end ngIf: $index == 0 -->
                    <!-- ngIf: $index > 0 -->
                </dl>
                <div class="col-airline col-md-2 col-xs-3 text-center">
                    <!--.gamification(ng-if="$index === 0") Collect {{ leg.gamificationPoints }} upsell points--><img ng-src="images/app/logos/ol.jpg" alt="Airline logo" class="airline-logo-gamification" src="images/app/logos/ol.jpg">
                    <div class="flight-code hidden-sm hidden-xs ng-binding">OL-13</div>
                    <!-- ngIf: $index == 0 && leg.segments.length == 1 --><div ng-if="$index == 0 &amp;&amp; leg.segments.length == 1" class="airline-data-sm hidden-md hidden-lg text-center ng-scope">
                    <div class="flight-code ng-binding">OL-13</div>
                    <div class="flight-equipment ng-binding">(737-800)</div>
                </div><!-- end ngIf: $index == 0 && leg.segments.length == 1 -->
                </div>
                <div class="flight-details col-md-4 col-md-offset-2 hidden-sm hidden-xs">
                    <div class="row top">
                        <div class="col-xs-4 time-from"><span class="ng-binding">12:05</span></div>
                        <div class="col-xs-4 time-to"><span class="ng-binding">01:15</span></div>
                        <div class="col-xs-4 time-duration"><span class="ng-binding">07h 10m</span></div>
                    </div>
                    <div class="row bottom text-left text-gray">
                        <div class="col-xs-4 iata-from"><strong class="ng-binding">JFK</strong></div>
                        <div class="pos-absolute col-xs-3 col-xs-offset-1 arrow-picture"></div>
                        <div class="col-xs-4 iata-to"><strong class="ng-binding">CDG(737-800)</strong></div>
                        <div class="col-xs-4 percent-on-time text-dark"><strong class="ng-binding">98 %</strong><span>&nbsp;on time</span></div>
                    </div>
                </div>
                <!-- ngIf: $index == 0 --><div ng-if="$index == 0" class="flight-details-sm flight-details-shortcut col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">12:05</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <!-- ngIf: leg.segments.length > 1 -->
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">01:15</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">JFK</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">CDG</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 && leg.segments.length == 1 --><div ng-if="ancillaries.included &amp;&amp; ancillaries.included.length > 0 &amp;&amp; leg.segments.length == 1" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price ng-scope">
                <div class="text-center">Included in price</div>
                <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries center-block ng-scope">
                <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
            </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
            </div><!-- end ngIf: ancillaries.included && ancillaries.included.length > 0 && leg.segments.length == 1 -->
                <!-- ngIf: leg.segments.length > 1 -->
            </div><!-- end ngIf: $index == 0 -->
                <!-- ngIf: leg.segments.length > 1 -->
                <div ng-class="{'has-optional-extras': policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0}" class="col-md-3 col-md-offset-4 col-ancillaries hidden-sm hidden-xs has-optional-extras">
                    <div ng-show="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price">
                        <div education-popup="http://search/ancillariesIncludedInPrice" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Included </span><br class="ng-scope"><span class="ng-scope">in price</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
                    </div>
                    <div ng-show="policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0" class="row optional-extras">
                        <div education-popup="http://search/ancillariesOptional" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Optional </span><br class="ng-scope"><span class="ng-scope">extras</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.optional] --><!-- ngInclude: 'inline_ancillary.html' --><ul ng-repeat="ancillaries in [ancillaries.optional]" ng-include="'inline_ancillary.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Snacks &amp; Drinks" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/meal.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">15</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/first_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">50</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/second_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">100</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/third_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">200</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.optional] -->
                    </div>
                </div>
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="col-md-1 col-fares pos-absolute-full-height col-md-offset-9 text-dark hidden-sm hidden-xs ng-scope">
                <div class="text-gray ng-binding">Non-Flex</div>
                <div class="strong ng-binding">economy</div>
                <div class="show-all-fares pos-absolute-bottom-left border-top-colored"><a ng-click="showAllFares(leg)">Show all<span class="arrow-part"> fares&nbsp;<span class="fa fa-angle-right"></span></span></a></div>
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="price-block col-md-2 col-xs-3 col-xs-offset-6 col-md-offset-1 ng-scope">
                <p><span class="currency"></span><span class="price ng-binding">657</span></p>
                <!-- ngIf: roundTripPrice(leg) > 0 -->
                <div ng-show="leg.combinable" ng-init="leg.combinable = true" ng-class="selectionMode" class="book">
                    <label ng-class="{ 'orange-color-unselect': leg.selected === true }" class="btn btn-primary select-btn">
                        <input type="checkbox" ng-model="leg.selected" ng-click="toggleFlight(leg)" class="hidden ng-pristine ng-untouched ng-valid"><span ng-show="selectionMode == 'book'" class="ng-binding">Select</span><span ng-show="selectionMode == 'compare'" class="ng-binding ng-hide">Compare</span>
                    </label>
                </div>
                <!-- ngIf: personalizationService.isApplicableToPersona(leg) -->
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: leg.segments.length > 1 && !leg.segments.length == $index -->
                <!-- ngIf: $index == 0 --><label ng-if="$index == 0" class="select-flight ng-scope">
                <input type="checkbox" ng-click="selectFlightToCompare(leg)" class="hidden"><span class="checkbox"></span>
            </label><!-- end ngIf: $index == 0 -->
                <div class="vr col-md-offset-9 border-right-colored hidden-sm hidden-xs"></div>
                <div class="vr col-md-offset-10 border-right-colored hidden-sm hidden-xs"></div>
            </div><!-- end ngRepeat: segment in leg.segments track by $index -->
                <!-- ngIf: leg.segments.length > 1 -->
            </div>
        </div><!-- end ngRepeat: leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse --><!-- ngInclude: 'resultItem.html' --><div ng-include="'resultItem.html'" ng-repeat="leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse" ng-model="leg" ng-show="isVisible() &amp;&amp; isFilterAllowed() &amp;&amp; isFlightDetailsFilterAllowed() &amp;&amp; isAdvancedFilterAllowed()" ng-controller="legController" class="ng-pristine ng-untouched ng-valid ng-scope ng-hide">
            <div ng-show="leg.selectedClass === undefined" data-operating-airline="CO" ng-class="{'has-segments': leg.segments.length > 1, 'leg-details-hidden': !smDetailsVisible, 'just-for-you': personalizationService.isApplicableToPersona(leg) }" class="results-item ng-scope leg-details-hidden">
                <div ng-show="policyService.violatesRules(leg)" class="pos-absolute-full-height out-of-policy"></div>
                <!-- ngRepeat: segment in leg.segments track by $index --><div ng-repeat="segment in leg.segments track by $index" ng-controller="segmentController" ng-class="{'leg-segment-nth': $index > 0}" class="row leg-segment ng-scope">
                <dl class="just-for-you-cover col-md-2 col-xs-3 col-xs-offset-9 col-md-offset-10 pos-absolute-full-height">
                    <!-- ngIf: $index == 0 --><dt ng-if="$index == 0" education-popup="http://search/personalizedSearch" icon-type="2" icon-color="orange" direction="bottom|right" override-position-relative="true" class="pos-absolute-full-parent ng-scope ng-isolate-scope"><ng-transclude>
                    <h4 class="ng-scope">Just for you</h4>
                </ng-transclude><div class="education-element-2 educational-color-orange" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|right" ns-popover-timeout="0"></div></dt><!-- end ngIf: $index == 0 -->
                    <!-- ngIf: $index > 0 -->
                </dl>
                <div class="col-airline col-md-2 col-xs-3 text-center">
                    <!--.gamification(ng-if="$index === 0") Collect {{ leg.gamificationPoints }} upsell points--><img ng-src="images/app/logos/co.jpg" alt="Airline logo" class="airline-logo-gamification" src="images/app/logos/co.jpg">
                    <div class="flight-code hidden-sm hidden-xs ng-binding">CO-76</div>
                    <!-- ngIf: $index == 0 && leg.segments.length == 1 --><div ng-if="$index == 0 &amp;&amp; leg.segments.length == 1" class="airline-data-sm hidden-md hidden-lg text-center ng-scope">
                    <div class="flight-code ng-binding">CO-76</div>
                    <div class="flight-equipment ng-binding">(767 jet)</div>
                </div><!-- end ngIf: $index == 0 && leg.segments.length == 1 -->
                </div>
                <div class="flight-details col-md-4 col-md-offset-2 hidden-sm hidden-xs">
                    <div class="row top">
                        <div class="col-xs-4 time-from"><span class="ng-binding">14:50</span></div>
                        <div class="col-xs-4 time-to"><span class="ng-binding">04:35</span></div>
                        <div class="col-xs-4 time-duration"><span class="ng-binding">07h 45m</span></div>
                    </div>
                    <div class="row bottom text-left text-gray">
                        <div class="col-xs-4 iata-from"><strong class="ng-binding">JFK</strong></div>
                        <div class="pos-absolute col-xs-3 col-xs-offset-1 arrow-picture"></div>
                        <div class="col-xs-4 iata-to"><strong class="ng-binding">CDG(767 jet)</strong></div>
                        <div class="col-xs-4 percent-on-time text-dark"><strong class="ng-binding">78 %</strong><span>&nbsp;on time</span></div>
                    </div>
                </div>
                <!-- ngIf: $index == 0 --><div ng-if="$index == 0" class="flight-details-sm flight-details-shortcut col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">14:50</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <!-- ngIf: leg.segments.length > 1 -->
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">04:35</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">JFK</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">CDG</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 && leg.segments.length == 1 --><div ng-if="ancillaries.included &amp;&amp; ancillaries.included.length > 0 &amp;&amp; leg.segments.length == 1" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price ng-scope">
                <div class="text-center">Included in price</div>
                <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries center-block ng-scope">
                <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
            </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
            </div><!-- end ngIf: ancillaries.included && ancillaries.included.length > 0 && leg.segments.length == 1 -->
                <!-- ngIf: leg.segments.length > 1 -->
            </div><!-- end ngIf: $index == 0 -->
                <!-- ngIf: leg.segments.length > 1 -->
                <div ng-class="{'has-optional-extras': policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0}" class="col-md-3 col-md-offset-4 col-ancillaries hidden-sm hidden-xs has-optional-extras">
                    <div ng-show="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price">
                        <div education-popup="http://search/ancillariesIncludedInPrice" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Included </span><br class="ng-scope"><span class="ng-scope">in price</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
                    </div>
                    <div ng-show="policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0" class="row optional-extras">
                        <div education-popup="http://search/ancillariesOptional" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Optional </span><br class="ng-scope"><span class="ng-scope">extras</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.optional] --><!-- ngInclude: 'inline_ancillary.html' --><ul ng-repeat="ancillaries in [ancillaries.optional]" ng-include="'inline_ancillary.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/second_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">100</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/third_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">200</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.optional] -->
                    </div>
                </div>
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="col-md-1 col-fares pos-absolute-full-height col-md-offset-9 text-dark hidden-sm hidden-xs ng-scope">
                <div class="text-gray ng-binding">Econ Flex</div>
                <div class="strong ng-binding">economy</div>
                <div class="show-all-fares pos-absolute-bottom-left border-top-colored"><a ng-click="showAllFares(leg)">Show all<span class="arrow-part"> fares&nbsp;<span class="fa fa-angle-right"></span></span></a></div>
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="price-block col-md-2 col-xs-3 col-xs-offset-6 col-md-offset-1 ng-scope">
                <p><span class="currency"></span><span class="price ng-binding">931</span></p>
                <!-- ngIf: roundTripPrice(leg) > 0 -->
                <div ng-show="leg.combinable" ng-init="leg.combinable = true" ng-class="selectionMode" class="book">
                    <label ng-class="{ 'orange-color-unselect': leg.selected === true }" class="btn btn-primary select-btn">
                        <input type="checkbox" ng-model="leg.selected" ng-click="toggleFlight(leg)" class="hidden ng-pristine ng-untouched ng-valid"><span ng-show="selectionMode == 'book'" class="ng-binding">Select</span><span ng-show="selectionMode == 'compare'" class="ng-binding ng-hide">Compare</span>
                    </label>
                </div>
                <!-- ngIf: personalizationService.isApplicableToPersona(leg) -->
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: leg.segments.length > 1 && !leg.segments.length == $index -->
                <!-- ngIf: $index == 0 --><label ng-if="$index == 0" class="select-flight ng-scope">
                <input type="checkbox" ng-click="selectFlightToCompare(leg)" class="hidden"><span class="checkbox"></span>
            </label><!-- end ngIf: $index == 0 -->
                <div class="vr col-md-offset-9 border-right-colored hidden-sm hidden-xs"></div>
                <div class="vr col-md-offset-10 border-right-colored hidden-sm hidden-xs"></div>
            </div><!-- end ngRepeat: segment in leg.segments track by $index -->
                <!-- ngIf: leg.segments.length > 1 -->
            </div>
        </div><!-- end ngRepeat: leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse --><!-- ngInclude: 'resultItem.html' --><div ng-include="'resultItem.html'" ng-repeat="leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse" ng-model="leg" ng-show="isVisible() &amp;&amp; isFilterAllowed() &amp;&amp; isFlightDetailsFilterAllowed() &amp;&amp; isAdvancedFilterAllowed()" ng-controller="legController" class="ng-pristine ng-untouched ng-valid ng-scope ng-hide">
            <div ng-show="leg.selectedClass === undefined" data-operating-airline="ZS" ng-class="{'has-segments': leg.segments.length > 1, 'leg-details-hidden': !smDetailsVisible, 'just-for-you': personalizationService.isApplicableToPersona(leg) }" class="results-item ng-scope has-segments leg-details-hidden">
                <div ng-show="policyService.violatesRules(leg)" class="pos-absolute-full-height out-of-policy"></div>
                <!-- ngRepeat: segment in leg.segments track by $index --><div ng-repeat="segment in leg.segments track by $index" ng-controller="segmentController" ng-class="{'leg-segment-nth': $index > 0}" class="row leg-segment ng-scope">
                <dl class="just-for-you-cover col-md-2 col-xs-3 col-xs-offset-9 col-md-offset-10 pos-absolute-full-height">
                    <!-- ngIf: $index == 0 --><dt ng-if="$index == 0" education-popup="http://search/personalizedSearch" icon-type="2" icon-color="orange" direction="bottom|right" override-position-relative="true" class="pos-absolute-full-parent ng-scope ng-isolate-scope"><ng-transclude>
                    <h4 class="ng-scope">Just for you</h4>
                </ng-transclude><div class="education-element-2 educational-color-orange" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|right" ns-popover-timeout="0"></div></dt><!-- end ngIf: $index == 0 -->
                    <!-- ngIf: $index > 0 -->
                </dl>
                <div class="col-airline col-md-2 col-xs-3 text-center">
                    <!--.gamification(ng-if="$index === 0") Collect {{ leg.gamificationPoints }} upsell points--><img ng-src="images/app/logos/zs.jpg" alt="Airline logo" class="airline-logo-gamification" src="images/app/logos/zs.jpg">
                    <div class="flight-code hidden-sm hidden-xs ng-binding">ZS-100</div>
                    <!-- ngIf: $index == 0 && leg.segments.length == 1 -->
                </div>
                <div class="flight-details col-md-4 col-md-offset-2 hidden-sm hidden-xs">
                    <div class="row top">
                        <div class="col-xs-4 time-from"><span class="ng-binding">15:50</span></div>
                        <div class="col-xs-4 time-to"><span class="ng-binding">05:35</span></div>
                        <div class="col-xs-4 time-duration"><span class="ng-binding">07h 45m</span></div>
                    </div>
                    <div class="row bottom text-left text-gray">
                        <div class="col-xs-4 iata-from"><strong class="ng-binding">JFK</strong></div>
                        <div class="pos-absolute col-xs-3 col-xs-offset-1 arrow-picture"></div>
                        <div class="col-xs-4 iata-to"><strong class="ng-binding">FRA(747-400)</strong></div>
                        <div class="col-xs-4 percent-on-time text-dark"><strong class="ng-binding">88 %</strong><span>&nbsp;on time</span></div>
                    </div>
                </div>
                <!-- ngIf: $index == 0 --><div ng-if="$index == 0" class="flight-details-sm flight-details-shortcut col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">15:50</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <!-- ngIf: leg.segments.length > 1 --><div ng-if="leg.segments.length > 1" class="stops col-xs-offset-5 col-xs-2 ng-binding ng-scope">1 stop</div><!-- end ngIf: leg.segments.length > 1 -->
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">08:15</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">JFK</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">CDG</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 && leg.segments.length == 1 -->
                <!-- ngIf: leg.segments.length > 1 --><div ng-if="leg.segments.length > 1" class="row view-details text-center ng-scope">
                <button type="button" ng-click="smViewDetails()" class="btn btn-success btn-details">View Details</button>
            </div><!-- end ngIf: leg.segments.length > 1 -->
            </div><!-- end ngIf: $index == 0 -->
                <!-- ngIf: leg.segments.length > 1 --><div ng-if="leg.segments.length > 1" class="flight-details-sm col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">15:50</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">05:35</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">JFK</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">FRA</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 --><div ng-if="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price ng-scope">
                <div class="text-center">Included in price</div>
                <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries center-block ng-scope">
                <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Meal &amp; Bar" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
            </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
            </div><!-- end ngIf: ancillaries.included && ancillaries.included.length > 0 -->
            </div><!-- end ngIf: leg.segments.length > 1 -->
                <div ng-class="{'has-optional-extras': policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0}" class="col-md-3 col-md-offset-4 col-ancillaries hidden-sm hidden-xs has-optional-extras">
                    <div ng-show="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price">
                        <div education-popup="http://search/ancillariesIncludedInPrice" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Included </span><br class="ng-scope"><span class="ng-scope">in price</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Meal &amp; Bar" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
                    </div>
                    <div ng-show="policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0" class="row optional-extras">
                        <div education-popup="http://search/ancillariesOptional" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Optional </span><br class="ng-scope"><span class="ng-scope">extras</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.optional] --><!-- ngInclude: 'inline_ancillary.html' --><ul ng-repeat="ancillaries in [ancillaries.optional]" ng-include="'inline_ancillary.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/second_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">50</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/third_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">100</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.optional] -->
                    </div>
                </div>
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="col-md-1 col-fares pos-absolute-full-height col-md-offset-9 text-dark hidden-sm hidden-xs ng-scope">
                <div class="text-gray ng-binding">Changeable</div>
                <div class="strong ng-binding">economy</div>
                <div class="show-all-fares pos-absolute-bottom-left border-top-colored"><a ng-click="showAllFares(leg)">Show all<span class="arrow-part"> fares&nbsp;<span class="fa fa-angle-right"></span></span></a></div>
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="price-block col-md-2 col-xs-3 col-xs-offset-6 col-md-offset-1 ng-scope">
                <p><span class="currency"></span><span class="price ng-binding">944</span></p>
                <!-- ngIf: roundTripPrice(leg) > 0 -->
                <div ng-show="leg.combinable" ng-init="leg.combinable = true" ng-class="selectionMode" class="book">
                    <label ng-class="{ 'orange-color-unselect': leg.selected === true }" class="btn btn-primary select-btn">
                        <input type="checkbox" ng-model="leg.selected" ng-click="toggleFlight(leg)" class="hidden ng-pristine ng-untouched ng-valid"><span ng-show="selectionMode == 'book'" class="ng-binding">Select</span><span ng-show="selectionMode == 'compare'" class="ng-binding ng-hide">Compare</span>
                    </label>
                </div>
                <!-- ngIf: personalizationService.isApplicableToPersona(leg) -->
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: leg.segments.length > 1 && !leg.segments.length == $index --><div ng-if="leg.segments.length > 1 &amp;&amp; !leg.segments.length == $index" class="hr col-md-10 col-xs-9 ng-scope"></div><!-- end ngIf: leg.segments.length > 1 && !leg.segments.length == $index -->
                <!-- ngIf: $index == 0 --><label ng-if="$index == 0" class="select-flight ng-scope">
                <input type="checkbox" ng-click="selectFlightToCompare(leg)" class="hidden"><span class="checkbox"></span>
            </label><!-- end ngIf: $index == 0 -->
                <div class="vr col-md-offset-9 border-right-colored hidden-sm hidden-xs"></div>
                <div class="vr col-md-offset-10 border-right-colored hidden-sm hidden-xs"></div>
            </div><!-- end ngRepeat: segment in leg.segments track by $index --><div ng-repeat="segment in leg.segments track by $index" ng-controller="segmentController" ng-class="{'leg-segment-nth': $index > 0}" class="row leg-segment ng-scope leg-segment-nth">
                <dl class="just-for-you-cover col-md-2 col-xs-3 col-xs-offset-9 col-md-offset-10 pos-absolute-full-height">
                    <!-- ngIf: $index == 0 -->
                    <!-- ngIf: $index > 0 --><dt ng-if="$index > 0" class="pos-absolute-full-parent ng-scope"></dt><!-- end ngIf: $index > 0 -->
                </dl>
                <div class="col-airline col-md-2 col-xs-3 text-center">
                    <!--.gamification(ng-if="$index === 0") Collect {{ leg.gamificationPoints }} upsell points--><img ng-src="images/app/logos/zs.jpg" alt="Airline logo" class="airline-logo-gamification" src="images/app/logos/zs.jpg">
                    <div class="flight-code hidden-sm hidden-xs ng-binding">ZS-12</div>
                    <!-- ngIf: $index == 0 && leg.segments.length == 1 -->
                </div>
                <div class="flight-details col-md-4 col-md-offset-2 hidden-sm hidden-xs">
                    <div class="row top">
                        <div class="col-xs-4 time-from"><span class="ng-binding">07:00</span></div>
                        <div class="col-xs-4 time-to"><span class="ng-binding">08:15</span></div>
                        <div class="col-xs-4 time-duration"><span class="ng-binding">01h 15m</span></div>
                    </div>
                    <div class="row bottom text-left text-gray">
                        <div class="col-xs-4 iata-from"><strong class="ng-binding">FRA</strong></div>
                        <div class="pos-absolute col-xs-3 col-xs-offset-1 arrow-picture"></div>
                        <div class="col-xs-4 iata-to"><strong class="ng-binding">CDG(Boeing 32A)</strong></div>
                        <div class="col-xs-4 percent-on-time text-dark"><strong class="ng-binding">88 %</strong><span>&nbsp;on time</span></div>
                    </div>
                </div>
                <!-- ngIf: $index == 0 -->
                <!-- ngIf: leg.segments.length > 1 --><div ng-if="leg.segments.length > 1" class="flight-details-sm col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">07:00</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">08:15</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">FRA</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">CDG</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 --><div ng-if="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price ng-scope">
                <div class="text-center">Included in price</div>
                <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries center-block ng-scope">
                <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
            </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
            </div><!-- end ngIf: ancillaries.included && ancillaries.included.length > 0 -->
            </div><!-- end ngIf: leg.segments.length > 1 -->
                <div ng-class="{'has-optional-extras': policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0}" class="col-md-3 col-md-offset-4 col-ancillaries hidden-sm hidden-xs has-optional-extras">
                    <div ng-show="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price">
                        <div education-popup="http://search/ancillariesIncludedInPrice" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Included </span><br class="ng-scope"><span class="ng-scope">in price</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
                    </div>
                    <div ng-show="policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0" class="row optional-extras">
                        <div education-popup="http://search/ancillariesOptional" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Optional </span><br class="ng-scope"><span class="ng-scope">extras</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.optional] --><!-- ngInclude: 'inline_ancillary.html' --><ul ng-repeat="ancillaries in [ancillaries.optional]" ng-include="'inline_ancillary.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/second_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">50</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/third_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">100</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.optional] -->
                    </div>
                </div>
                <!-- ngIf: !leg.segments.length == $index -->
                <!-- ngIf: !leg.segments.length == $index -->
                <!-- ngIf: leg.segments.length > 1 && !leg.segments.length == $index -->
                <!-- ngIf: $index == 0 -->
                <div class="vr col-md-offset-9 border-right-colored hidden-sm hidden-xs"></div>
                <div class="vr col-md-offset-10 border-right-colored hidden-sm hidden-xs"></div>
            </div><!-- end ngRepeat: segment in leg.segments track by $index -->
                <!-- ngIf: leg.segments.length > 1 --><button ng-if="leg.segments.length > 1" type="button" ng-click="smViewDetails()" title="Hide Details" class="pos-absolute-bottom-right btn btn-default btn-details-collapse hidden-md hidden-lg ng-scope"><i class="fa fa-toggle-up"></i></button><!-- end ngIf: leg.segments.length > 1 -->
            </div>
        </div><!-- end ngRepeat: leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse --><!-- ngInclude: 'resultItem.html' --><div ng-include="'resultItem.html'" ng-repeat="leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse" ng-model="leg" ng-show="isVisible() &amp;&amp; isFilterAllowed() &amp;&amp; isFlightDetailsFilterAllowed() &amp;&amp; isAdvancedFilterAllowed()" ng-controller="legController" class="ng-pristine ng-untouched ng-valid ng-scope ng-hide">
            <div ng-show="leg.selectedClass === undefined" data-operating-airline="CO" ng-class="{'has-segments': leg.segments.length > 1, 'leg-details-hidden': !smDetailsVisible, 'just-for-you': personalizationService.isApplicableToPersona(leg) }" class="results-item ng-scope leg-details-hidden">
                <div ng-show="policyService.violatesRules(leg)" class="pos-absolute-full-height out-of-policy"></div>
                <!-- ngRepeat: segment in leg.segments track by $index --><div ng-repeat="segment in leg.segments track by $index" ng-controller="segmentController" ng-class="{'leg-segment-nth': $index > 0}" class="row leg-segment ng-scope">
                <dl class="just-for-you-cover col-md-2 col-xs-3 col-xs-offset-9 col-md-offset-10 pos-absolute-full-height">
                    <!-- ngIf: $index == 0 --><dt ng-if="$index == 0" education-popup="http://search/personalizedSearch" icon-type="2" icon-color="orange" direction="bottom|right" override-position-relative="true" class="pos-absolute-full-parent ng-scope ng-isolate-scope"><ng-transclude>
                    <h4 class="ng-scope">Just for you</h4>
                </ng-transclude><div class="education-element-2 educational-color-orange" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|right" ns-popover-timeout="0"></div></dt><!-- end ngIf: $index == 0 -->
                    <!-- ngIf: $index > 0 -->
                </dl>
                <div class="col-airline col-md-2 col-xs-3 text-center">
                    <!--.gamification(ng-if="$index === 0") Collect {{ leg.gamificationPoints }} upsell points--><img ng-src="images/app/logos/co.jpg" alt="Airline logo" class="airline-logo-gamification" src="images/app/logos/co.jpg">
                    <div class="flight-code hidden-sm hidden-xs ng-binding">CO-86</div>
                    <!-- ngIf: $index == 0 && leg.segments.length == 1 --><div ng-if="$index == 0 &amp;&amp; leg.segments.length == 1" class="airline-data-sm hidden-md hidden-lg text-center ng-scope">
                    <div class="flight-code ng-binding">CO-86</div>
                    <div class="flight-equipment ng-binding">(767 jet)</div>
                </div><!-- end ngIf: $index == 0 && leg.segments.length == 1 -->
                </div>
                <div class="flight-details col-md-4 col-md-offset-2 hidden-sm hidden-xs">
                    <div class="row top">
                        <div class="col-xs-4 time-from"><span class="ng-binding">17:50</span></div>
                        <div class="col-xs-4 time-to"><span class="ng-binding">07:35</span></div>
                        <div class="col-xs-4 time-duration"><span class="ng-binding">07h 45m</span></div>
                    </div>
                    <div class="row bottom text-left text-gray">
                        <div class="col-xs-4 iata-from"><strong class="ng-binding">JFK</strong></div>
                        <div class="pos-absolute col-xs-3 col-xs-offset-1 arrow-picture"></div>
                        <div class="col-xs-4 iata-to"><strong class="ng-binding">CDG(767 jet)</strong></div>
                        <div class="col-xs-4 percent-on-time text-dark"><strong class="ng-binding">78 %</strong><span>&nbsp;on time</span></div>
                    </div>
                </div>
                <!-- ngIf: $index == 0 --><div ng-if="$index == 0" class="flight-details-sm flight-details-shortcut col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">17:50</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <!-- ngIf: leg.segments.length > 1 -->
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">07:35</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">JFK</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">CDG</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 && leg.segments.length == 1 --><div ng-if="ancillaries.included &amp;&amp; ancillaries.included.length > 0 &amp;&amp; leg.segments.length == 1" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price ng-scope">
                <div class="text-center">Included in price</div>
                <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries center-block ng-scope">
                <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
            </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
            </div><!-- end ngIf: ancillaries.included && ancillaries.included.length > 0 && leg.segments.length == 1 -->
                <!-- ngIf: leg.segments.length > 1 -->
            </div><!-- end ngIf: $index == 0 -->
                <!-- ngIf: leg.segments.length > 1 -->
                <div ng-class="{'has-optional-extras': policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0}" class="col-md-3 col-md-offset-4 col-ancillaries hidden-sm hidden-xs has-optional-extras">
                    <div ng-show="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price">
                        <div education-popup="http://search/ancillariesIncludedInPrice" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Included </span><br class="ng-scope"><span class="ng-scope">in price</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
                    </div>
                    <div ng-show="policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0" class="row optional-extras">
                        <div education-popup="http://search/ancillariesOptional" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Optional </span><br class="ng-scope"><span class="ng-scope">extras</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.optional] --><!-- ngInclude: 'inline_ancillary.html' --><ul ng-repeat="ancillaries in [ancillaries.optional]" ng-include="'inline_ancillary.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/second_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">100</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/third_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">200</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.optional] -->
                    </div>
                </div>
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="col-md-1 col-fares pos-absolute-full-height col-md-offset-9 text-dark hidden-sm hidden-xs ng-scope">
                <div class="text-gray ng-binding">Econ Flex</div>
                <div class="strong ng-binding">economy</div>
                <div class="show-all-fares pos-absolute-bottom-left border-top-colored"><a ng-click="showAllFares(leg)">Show all<span class="arrow-part"> fares&nbsp;<span class="fa fa-angle-right"></span></span></a></div>
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="price-block col-md-2 col-xs-3 col-xs-offset-6 col-md-offset-1 ng-scope">
                <p><span class="currency"></span><span class="price ng-binding">931</span></p>
                <!-- ngIf: roundTripPrice(leg) > 0 -->
                <div ng-show="leg.combinable" ng-init="leg.combinable = true" ng-class="selectionMode" class="book">
                    <label ng-class="{ 'orange-color-unselect': leg.selected === true }" class="btn btn-primary select-btn">
                        <input type="checkbox" ng-model="leg.selected" ng-click="toggleFlight(leg)" class="hidden ng-pristine ng-untouched ng-valid"><span ng-show="selectionMode == 'book'" class="ng-binding">Select</span><span ng-show="selectionMode == 'compare'" class="ng-binding ng-hide">Compare</span>
                    </label>
                </div>
                <!-- ngIf: personalizationService.isApplicableToPersona(leg) -->
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: leg.segments.length > 1 && !leg.segments.length == $index -->
                <!-- ngIf: $index == 0 --><label ng-if="$index == 0" class="select-flight ng-scope">
                <input type="checkbox" ng-click="selectFlightToCompare(leg)" class="hidden"><span class="checkbox"></span>
            </label><!-- end ngIf: $index == 0 -->
                <div class="vr col-md-offset-9 border-right-colored hidden-sm hidden-xs"></div>
                <div class="vr col-md-offset-10 border-right-colored hidden-sm hidden-xs"></div>
            </div><!-- end ngRepeat: segment in leg.segments track by $index -->
                <!-- ngIf: leg.segments.length > 1 -->
            </div>
        </div><!-- end ngRepeat: leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse --><!-- ngInclude: 'resultItem.html' --><div ng-include="'resultItem.html'" ng-repeat="leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse" ng-model="leg" ng-show="isVisible() &amp;&amp; isFilterAllowed() &amp;&amp; isFlightDetailsFilterAllowed() &amp;&amp; isAdvancedFilterAllowed()" ng-controller="legController" class="ng-pristine ng-untouched ng-valid ng-scope">
            <div ng-show="leg.selectedClass === undefined" data-operating-airline="DM" ng-class="{'has-segments': leg.segments.length > 1, 'leg-details-hidden': !smDetailsVisible, 'just-for-you': personalizationService.isApplicableToPersona(leg) }" class="results-item ng-scope has-segments leg-details-hidden">
                <div ng-show="policyService.violatesRules(leg)" class="pos-absolute-full-height out-of-policy ng-hide"></div>
                <!-- ngRepeat: segment in leg.segments track by $index --><div ng-repeat="segment in leg.segments track by $index" ng-controller="segmentController" ng-class="{'leg-segment-nth': $index > 0}" class="row leg-segment ng-scope">
                <dl class="just-for-you-cover col-md-2 col-xs-3 col-xs-offset-9 col-md-offset-10 pos-absolute-full-height">
                    <!-- ngIf: $index == 0 --><dt ng-if="$index == 0" education-popup="http://search/personalizedSearch" icon-type="2" icon-color="orange" direction="bottom|right" override-position-relative="true" class="pos-absolute-full-parent ng-scope ng-isolate-scope"><ng-transclude>
                    <h4 class="ng-scope">Just for you</h4>
                </ng-transclude><div class="education-element-2 educational-color-orange" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|right" ns-popover-timeout="0"></div></dt><!-- end ngIf: $index == 0 -->
                    <!-- ngIf: $index > 0 -->
                </dl>
                <div class="col-airline col-md-2 col-xs-3 text-center">
                    <!--.gamification(ng-if="$index === 0") Collect {{ leg.gamificationPoints }} upsell points--><img ng-src="images/app/logos/dm.jpg" alt="Airline logo" class="airline-logo-gamification" src="images/app/logos/dm.jpg">
                    <div class="flight-code hidden-sm hidden-xs ng-binding">DM-69</div>
                    <!-- ngIf: $index == 0 && leg.segments.length == 1 -->
                </div>
                <div class="flight-details col-md-4 col-md-offset-2 hidden-sm hidden-xs">
                    <div class="row top">
                        <div class="col-xs-4 time-from"><span class="ng-binding">18:15</span></div>
                        <div class="col-xs-4 time-to"><span class="ng-binding">06:20</span></div>
                        <div class="col-xs-4 time-duration"><span class="ng-binding">07h 05m</span></div>
                    </div>
                    <div class="row bottom text-left text-gray">
                        <div class="col-xs-4 iata-from"><strong class="ng-binding">JFK</strong></div>
                        <div class="pos-absolute col-xs-3 col-xs-offset-1 arrow-picture"></div>
                        <div class="col-xs-4 iata-to"><strong class="ng-binding">LHR(747)</strong></div>
                        <div class="col-xs-4 percent-on-time text-dark"><strong class="ng-binding">78 %</strong><span>&nbsp;on time</span></div>
                    </div>
                </div>
                <!-- ngIf: $index == 0 --><div ng-if="$index == 0" class="flight-details-sm flight-details-shortcut col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">18:15</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <!-- ngIf: leg.segments.length > 1 --><div ng-if="leg.segments.length > 1" class="stops col-xs-offset-5 col-xs-2 ng-binding ng-scope">1 stop</div><!-- end ngIf: leg.segments.length > 1 -->
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">11:25</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">JFK</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">CDG</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 && leg.segments.length == 1 -->
                <!-- ngIf: leg.segments.length > 1 --><div ng-if="leg.segments.length > 1" class="row view-details text-center ng-scope">
                <button type="button" ng-click="smViewDetails()" class="btn btn-success btn-details">View Details</button>
            </div><!-- end ngIf: leg.segments.length > 1 -->
            </div><!-- end ngIf: $index == 0 -->
                <!-- ngIf: leg.segments.length > 1 --><div ng-if="leg.segments.length > 1" class="flight-details-sm col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">18:15</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">06:20</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">JFK</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">LHR</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 --><div ng-if="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price ng-scope included-ancillaries-solo">
                <div class="text-center">Included in price</div>
                <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries center-block ng-scope">
                <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Meal &amp; Bar" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Fast Track" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/fast_track_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/fast_track_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Lounge" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/lounge_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/lounge_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
            </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
            </div><!-- end ngIf: ancillaries.included && ancillaries.included.length > 0 -->
            </div><!-- end ngIf: leg.segments.length > 1 -->
                <div ng-class="{'has-optional-extras': policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0}" class="col-md-3 col-md-offset-4 col-ancillaries hidden-sm hidden-xs">
                    <div ng-show="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price included-ancillaries-solo">
                        <div education-popup="http://search/ancillariesIncludedInPrice" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Included </span><br class="ng-scope"><span class="ng-scope">in price</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Meal &amp; Bar" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Fast Track" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/fast_track_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/fast_track_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Lounge" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/lounge_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/lounge_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
                    </div>
                    <div ng-show="policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0" class="row optional-extras ng-hide">
                        <div education-popup="http://search/ancillariesOptional" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Optional </span><br class="ng-scope"><span class="ng-scope">extras</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.optional] --><!-- ngInclude: 'inline_ancillary.html' --><ul ng-repeat="ancillaries in [ancillaries.optional]" ng-include="'inline_ancillary.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.optional] -->
                    </div>
                </div>
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="col-md-1 col-fares pos-absolute-full-height col-md-offset-9 text-dark hidden-sm hidden-xs ng-scope">
                <div class="text-gray ng-binding">Non-Flex</div>
                <div class="strong ng-binding">economy</div>
                <div class="show-all-fares pos-absolute-bottom-left border-top-colored"><a ng-click="showAllFares(leg)">Show all<span class="arrow-part"> fares&nbsp;<span class="fa fa-angle-right"></span></span></a></div>
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="price-block col-md-2 col-xs-3 col-xs-offset-6 col-md-offset-1 ng-scope">
                <p><span class="currency"></span><span class="price ng-binding">840</span></p>
                <!-- ngIf: roundTripPrice(leg) > 0 -->
                <div ng-show="leg.combinable" ng-init="leg.combinable = true" ng-class="selectionMode" class="book">
                    <label ng-class="{ 'orange-color-unselect': leg.selected === true }" class="btn btn-primary select-btn">
                        <input type="checkbox" ng-model="leg.selected" ng-click="toggleFlight(leg)" class="hidden ng-pristine ng-untouched ng-valid"><span ng-show="selectionMode == 'book'" class="ng-binding">Select</span><span ng-show="selectionMode == 'compare'" class="ng-binding ng-hide">Compare</span>
                    </label>
                </div>
                <!-- ngIf: personalizationService.isApplicableToPersona(leg) -->
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: leg.segments.length > 1 && !leg.segments.length == $index --><div ng-if="leg.segments.length > 1 &amp;&amp; !leg.segments.length == $index" class="hr col-md-10 col-xs-9 ng-scope"></div><!-- end ngIf: leg.segments.length > 1 && !leg.segments.length == $index -->
                <!-- ngIf: $index == 0 --><label ng-if="$index == 0" class="select-flight ng-scope">
                <input type="checkbox" ng-click="selectFlightToCompare(leg)" class="hidden"><span class="checkbox"></span>
            </label><!-- end ngIf: $index == 0 -->
                <div class="vr col-md-offset-9 border-right-colored hidden-sm hidden-xs"></div>
                <div class="vr col-md-offset-10 border-right-colored hidden-sm hidden-xs"></div>
            </div><!-- end ngRepeat: segment in leg.segments track by $index --><div ng-repeat="segment in leg.segments track by $index" ng-controller="segmentController" ng-class="{'leg-segment-nth': $index > 0}" class="row leg-segment ng-scope leg-segment-nth">
                <dl class="just-for-you-cover col-md-2 col-xs-3 col-xs-offset-9 col-md-offset-10 pos-absolute-full-height">
                    <!-- ngIf: $index == 0 -->
                    <!-- ngIf: $index > 0 --><dt ng-if="$index > 0" class="pos-absolute-full-parent ng-scope"></dt><!-- end ngIf: $index > 0 -->
                </dl>
                <div class="col-airline col-md-2 col-xs-3 text-center">
                    <!--.gamification(ng-if="$index === 0") Collect {{ leg.gamificationPoints }} upsell points--><img ng-src="images/app/logos/dm.jpg" alt="Airline logo" class="airline-logo-gamification" src="images/app/logos/dm.jpg">
                    <div class="flight-code hidden-sm hidden-xs ng-binding">DM-76</div>
                    <!-- ngIf: $index == 0 && leg.segments.length == 1 -->
                </div>
                <div class="flight-details col-md-4 col-md-offset-2 hidden-sm hidden-xs">
                    <div class="row top">
                        <div class="col-xs-4 time-from"><span class="ng-binding">09:05</span></div>
                        <div class="col-xs-4 time-to"><span class="ng-binding">11:25</span></div>
                        <div class="col-xs-4 time-duration"><span class="ng-binding">01h 20m</span></div>
                    </div>
                    <div class="row bottom text-left text-gray">
                        <div class="col-xs-4 iata-from"><strong class="ng-binding">LHR</strong></div>
                        <div class="pos-absolute col-xs-3 col-xs-offset-1 arrow-picture"></div>
                        <div class="col-xs-4 iata-to"><strong class="ng-binding">CDG(A320)</strong></div>
                        <div class="col-xs-4 percent-on-time text-dark"><strong class="ng-binding">98 %</strong><span>&nbsp;on time</span></div>
                    </div>
                </div>
                <!-- ngIf: $index == 0 -->
                <!-- ngIf: leg.segments.length > 1 --><div ng-if="leg.segments.length > 1" class="flight-details-sm col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">09:05</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">11:25</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">LHR</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">CDG</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 --><div ng-if="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price ng-scope included-ancillaries-solo">
                <div class="text-center">Included in price</div>
                <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries center-block ng-scope">
                <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Priority Boarding" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/priority_boarding_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/priority_boarding_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Fast Track" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/fast_track_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/fast_track_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Lounge" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/lounge_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/lounge_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
            </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
            </div><!-- end ngIf: ancillaries.included && ancillaries.included.length > 0 -->
            </div><!-- end ngIf: leg.segments.length > 1 -->
                <div ng-class="{'has-optional-extras': policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0}" class="col-md-3 col-md-offset-4 col-ancillaries hidden-sm hidden-xs">
                    <div ng-show="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price included-ancillaries-solo">
                        <div education-popup="http://search/ancillariesIncludedInPrice" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Included </span><br class="ng-scope"><span class="ng-scope">in price</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Priority Boarding" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/priority_boarding_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/priority_boarding_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Fast Track" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/fast_track_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/fast_track_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Lounge" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/lounge_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/lounge_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
                    </div>
                    <div ng-show="policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0" class="row optional-extras ng-hide">
                        <div education-popup="http://search/ancillariesOptional" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Optional </span><br class="ng-scope"><span class="ng-scope">extras</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.optional] --><!-- ngInclude: 'inline_ancillary.html' --><ul ng-repeat="ancillaries in [ancillaries.optional]" ng-include="'inline_ancillary.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.optional] -->
                    </div>
                </div>
                <!-- ngIf: !leg.segments.length == $index -->
                <!-- ngIf: !leg.segments.length == $index -->
                <!-- ngIf: leg.segments.length > 1 && !leg.segments.length == $index -->
                <!-- ngIf: $index == 0 -->
                <div class="vr col-md-offset-9 border-right-colored hidden-sm hidden-xs"></div>
                <div class="vr col-md-offset-10 border-right-colored hidden-sm hidden-xs"></div>
            </div><!-- end ngRepeat: segment in leg.segments track by $index -->
                <!-- ngIf: leg.segments.length > 1 --><button ng-if="leg.segments.length > 1" type="button" ng-click="smViewDetails()" title="Hide Details" class="pos-absolute-bottom-right btn btn-default btn-details-collapse hidden-md hidden-lg ng-scope"><i class="fa fa-toggle-up"></i></button><!-- end ngIf: leg.segments.length > 1 -->
            </div>
        </div><!-- end ngRepeat: leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse --><!-- ngInclude: 'resultItem.html' --><div ng-include="'resultItem.html'" ng-repeat="leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse" ng-model="leg" ng-show="isVisible() &amp;&amp; isFilterAllowed() &amp;&amp; isFlightDetailsFilterAllowed() &amp;&amp; isAdvancedFilterAllowed()" ng-controller="legController" class="ng-pristine ng-untouched ng-valid ng-scope">
            <div ng-show="leg.selectedClass === undefined" data-operating-airline="DM" ng-class="{'has-segments': leg.segments.length > 1, 'leg-details-hidden': !smDetailsVisible, 'just-for-you': personalizationService.isApplicableToPersona(leg) }" class="results-item ng-scope has-segments leg-details-hidden">
                <div ng-show="policyService.violatesRules(leg)" class="pos-absolute-full-height out-of-policy ng-hide"></div>
                <!-- ngRepeat: segment in leg.segments track by $index --><div ng-repeat="segment in leg.segments track by $index" ng-controller="segmentController" ng-class="{'leg-segment-nth': $index > 0}" class="row leg-segment ng-scope">
                <dl class="just-for-you-cover col-md-2 col-xs-3 col-xs-offset-9 col-md-offset-10 pos-absolute-full-height">
                    <!-- ngIf: $index == 0 --><dt ng-if="$index == 0" education-popup="http://search/personalizedSearch" icon-type="2" icon-color="orange" direction="bottom|right" override-position-relative="true" class="pos-absolute-full-parent ng-scope ng-isolate-scope"><ng-transclude>
                    <h4 class="ng-scope">Just for you</h4>
                </ng-transclude><div class="education-element-2 educational-color-orange" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|right" ns-popover-timeout="0"></div></dt><!-- end ngIf: $index == 0 -->
                    <!-- ngIf: $index > 0 -->
                </dl>
                <div class="col-airline col-md-2 col-xs-3 text-center">
                    <!--.gamification(ng-if="$index === 0") Collect {{ leg.gamificationPoints }} upsell points--><img ng-src="images/app/logos/dm.jpg" alt="Airline logo" class="airline-logo-gamification" src="images/app/logos/dm.jpg">
                    <div class="flight-code hidden-sm hidden-xs ng-binding">DM-71</div>
                    <!-- ngIf: $index == 0 && leg.segments.length == 1 -->
                </div>
                <div class="flight-details col-md-4 col-md-offset-2 hidden-sm hidden-xs">
                    <div class="row top">
                        <div class="col-xs-4 time-from"><span class="ng-binding">20:45</span></div>
                        <div class="col-xs-4 time-to"><span class="ng-binding">08:40</span></div>
                        <div class="col-xs-4 time-duration"><span class="ng-binding">06h 55m</span></div>
                    </div>
                    <div class="row bottom text-left text-gray">
                        <div class="col-xs-4 iata-from"><strong class="ng-binding">JFK</strong></div>
                        <div class="pos-absolute col-xs-3 col-xs-offset-1 arrow-picture"></div>
                        <div class="col-xs-4 iata-to"><strong class="ng-binding">LHR(747)</strong></div>
                        <div class="col-xs-4 percent-on-time text-dark"><strong class="ng-binding">78 %</strong><span>&nbsp;on time</span></div>
                    </div>
                </div>
                <!-- ngIf: $index == 0 --><div ng-if="$index == 0" class="flight-details-sm flight-details-shortcut col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">20:45</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <!-- ngIf: leg.segments.length > 1 --><div ng-if="leg.segments.length > 1" class="stops col-xs-offset-5 col-xs-2 ng-binding ng-scope">1 stop</div><!-- end ngIf: leg.segments.length > 1 -->
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">13:00</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">JFK</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">CDG</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 && leg.segments.length == 1 -->
                <!-- ngIf: leg.segments.length > 1 --><div ng-if="leg.segments.length > 1" class="row view-details text-center ng-scope">
                <button type="button" ng-click="smViewDetails()" class="btn btn-success btn-details">View Details</button>
            </div><!-- end ngIf: leg.segments.length > 1 -->
            </div><!-- end ngIf: $index == 0 -->
                <!-- ngIf: leg.segments.length > 1 --><div ng-if="leg.segments.length > 1" class="flight-details-sm col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">20:45</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">08:40</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">JFK</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">LHR</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 --><div ng-if="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price ng-scope included-ancillaries-solo">
                <div class="text-center">Included in price</div>
                <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries center-block ng-scope">
                <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Meal &amp; Bar" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Fast Track" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/fast_track_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/fast_track_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Lounge" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/lounge_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/lounge_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
            </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
            </div><!-- end ngIf: ancillaries.included && ancillaries.included.length > 0 -->
            </div><!-- end ngIf: leg.segments.length > 1 -->
                <div ng-class="{'has-optional-extras': policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0}" class="col-md-3 col-md-offset-4 col-ancillaries hidden-sm hidden-xs">
                    <div ng-show="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price included-ancillaries-solo">
                        <div education-popup="http://search/ancillariesIncludedInPrice" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Included </span><br class="ng-scope"><span class="ng-scope">in price</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Meal &amp; Bar" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Fast Track" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/fast_track_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/fast_track_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Lounge" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/lounge_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/lounge_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
                    </div>
                    <div ng-show="policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0" class="row optional-extras ng-hide">
                        <div education-popup="http://search/ancillariesOptional" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Optional </span><br class="ng-scope"><span class="ng-scope">extras</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.optional] --><!-- ngInclude: 'inline_ancillary.html' --><ul ng-repeat="ancillaries in [ancillaries.optional]" ng-include="'inline_ancillary.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.optional] -->
                    </div>
                </div>
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="col-md-1 col-fares pos-absolute-full-height col-md-offset-9 text-dark hidden-sm hidden-xs ng-scope">
                <div class="text-gray ng-binding">Non-Flex</div>
                <div class="strong ng-binding">economy</div>
                <div class="show-all-fares pos-absolute-bottom-left border-top-colored"><a ng-click="showAllFares(leg)">Show all<span class="arrow-part"> fares&nbsp;<span class="fa fa-angle-right"></span></span></a></div>
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="price-block col-md-2 col-xs-3 col-xs-offset-6 col-md-offset-1 ng-scope">
                <p><span class="currency"></span><span class="price ng-binding">840</span></p>
                <!-- ngIf: roundTripPrice(leg) > 0 -->
                <div ng-show="leg.combinable" ng-init="leg.combinable = true" ng-class="selectionMode" class="book">
                    <label ng-class="{ 'orange-color-unselect': leg.selected === true }" class="btn btn-primary select-btn">
                        <input type="checkbox" ng-model="leg.selected" ng-click="toggleFlight(leg)" class="hidden ng-pristine ng-untouched ng-valid"><span ng-show="selectionMode == 'book'" class="ng-binding">Select</span><span ng-show="selectionMode == 'compare'" class="ng-binding ng-hide">Compare</span>
                    </label>
                </div>
                <!-- ngIf: personalizationService.isApplicableToPersona(leg) -->
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: leg.segments.length > 1 && !leg.segments.length == $index --><div ng-if="leg.segments.length > 1 &amp;&amp; !leg.segments.length == $index" class="hr col-md-10 col-xs-9 ng-scope"></div><!-- end ngIf: leg.segments.length > 1 && !leg.segments.length == $index -->
                <!-- ngIf: $index == 0 --><label ng-if="$index == 0" class="select-flight ng-scope">
                <input type="checkbox" ng-click="selectFlightToCompare(leg)" class="hidden"><span class="checkbox"></span>
            </label><!-- end ngIf: $index == 0 -->
                <div class="vr col-md-offset-9 border-right-colored hidden-sm hidden-xs"></div>
                <div class="vr col-md-offset-10 border-right-colored hidden-sm hidden-xs"></div>
            </div><!-- end ngRepeat: segment in leg.segments track by $index --><div ng-repeat="segment in leg.segments track by $index" ng-controller="segmentController" ng-class="{'leg-segment-nth': $index > 0}" class="row leg-segment ng-scope leg-segment-nth">
                <dl class="just-for-you-cover col-md-2 col-xs-3 col-xs-offset-9 col-md-offset-10 pos-absolute-full-height">
                    <!-- ngIf: $index == 0 -->
                    <!-- ngIf: $index > 0 --><dt ng-if="$index > 0" class="pos-absolute-full-parent ng-scope"></dt><!-- end ngIf: $index > 0 -->
                </dl>
                <div class="col-airline col-md-2 col-xs-3 text-center">
                    <!--.gamification(ng-if="$index === 0") Collect {{ leg.gamificationPoints }} upsell points--><img ng-src="images/app/logos/dm.jpg" alt="Airline logo" class="airline-logo-gamification" src="images/app/logos/dm.jpg">
                    <div class="flight-code hidden-sm hidden-xs ng-binding">DM-78</div>
                    <!-- ngIf: $index == 0 && leg.segments.length == 1 -->
                </div>
                <div class="flight-details col-md-4 col-md-offset-2 hidden-sm hidden-xs">
                    <div class="row top">
                        <div class="col-xs-4 time-from"><span class="ng-binding">10:45</span></div>
                        <div class="col-xs-4 time-to"><span class="ng-binding">13:00</span></div>
                        <div class="col-xs-4 time-duration"><span class="ng-binding">01h 15m</span></div>
                    </div>
                    <div class="row bottom text-left text-gray">
                        <div class="col-xs-4 iata-from"><strong class="ng-binding">LHR</strong></div>
                        <div class="pos-absolute col-xs-3 col-xs-offset-1 arrow-picture"></div>
                        <div class="col-xs-4 iata-to"><strong class="ng-binding">CDG(A320)</strong></div>
                        <div class="col-xs-4 percent-on-time text-dark"><strong class="ng-binding">98 %</strong><span>&nbsp;on time</span></div>
                    </div>
                </div>
                <!-- ngIf: $index == 0 -->
                <!-- ngIf: leg.segments.length > 1 --><div ng-if="leg.segments.length > 1" class="flight-details-sm col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">10:45</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">13:00</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">LHR</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">CDG</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 --><div ng-if="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price ng-scope included-ancillaries-solo">
                <div class="text-center">Included in price</div>
                <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries center-block ng-scope">
                <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Priority Boarding" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/priority_boarding_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/priority_boarding_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Fast Track" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/fast_track_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/fast_track_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Lounge" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/lounge_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/lounge_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
            </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
            </div><!-- end ngIf: ancillaries.included && ancillaries.included.length > 0 -->
            </div><!-- end ngIf: leg.segments.length > 1 -->
                <div ng-class="{'has-optional-extras': policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0}" class="col-md-3 col-md-offset-4 col-ancillaries hidden-sm hidden-xs">
                    <div ng-show="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price included-ancillaries-solo">
                        <div education-popup="http://search/ancillariesIncludedInPrice" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Included </span><br class="ng-scope"><span class="ng-scope">in price</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Priority Boarding" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/priority_boarding_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/priority_boarding_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Fast Track" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/fast_track_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/fast_track_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Lounge" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/lounge_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/lounge_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
                    </div>
                    <div ng-show="policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0" class="row optional-extras ng-hide">
                        <div education-popup="http://search/ancillariesOptional" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Optional </span><br class="ng-scope"><span class="ng-scope">extras</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.optional] --><!-- ngInclude: 'inline_ancillary.html' --><ul ng-repeat="ancillaries in [ancillaries.optional]" ng-include="'inline_ancillary.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.optional] -->
                    </div>
                </div>
                <!-- ngIf: !leg.segments.length == $index -->
                <!-- ngIf: !leg.segments.length == $index -->
                <!-- ngIf: leg.segments.length > 1 && !leg.segments.length == $index -->
                <!-- ngIf: $index == 0 -->
                <div class="vr col-md-offset-9 border-right-colored hidden-sm hidden-xs"></div>
                <div class="vr col-md-offset-10 border-right-colored hidden-sm hidden-xs"></div>
            </div><!-- end ngRepeat: segment in leg.segments track by $index -->
                <!-- ngIf: leg.segments.length > 1 --><button ng-if="leg.segments.length > 1" type="button" ng-click="smViewDetails()" title="Hide Details" class="pos-absolute-bottom-right btn btn-default btn-details-collapse hidden-md hidden-lg ng-scope"><i class="fa fa-toggle-up"></i></button><!-- end ngIf: leg.segments.length > 1 -->
            </div>
        </div><!-- end ngRepeat: leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse --><!-- ngInclude: 'resultItem.html' --><div ng-include="'resultItem.html'" ng-repeat="leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse" ng-model="leg" ng-show="isVisible() &amp;&amp; isFilterAllowed() &amp;&amp; isFlightDetailsFilterAllowed() &amp;&amp; isAdvancedFilterAllowed()" ng-controller="legController" class="ng-pristine ng-untouched ng-valid ng-scope ng-hide">
            <div ng-show="leg.selectedClass === undefined" data-operating-airline="CO" ng-class="{'has-segments': leg.segments.length > 1, 'leg-details-hidden': !smDetailsVisible, 'just-for-you': personalizationService.isApplicableToPersona(leg) }" class="results-item ng-scope leg-details-hidden">
                <div ng-show="policyService.violatesRules(leg)" class="pos-absolute-full-height out-of-policy"></div>
                <!-- ngRepeat: segment in leg.segments track by $index --><div ng-repeat="segment in leg.segments track by $index" ng-controller="segmentController" ng-class="{'leg-segment-nth': $index > 0}" class="row leg-segment ng-scope">
                <dl class="just-for-you-cover col-md-2 col-xs-3 col-xs-offset-9 col-md-offset-10 pos-absolute-full-height">
                    <!-- ngIf: $index == 0 --><dt ng-if="$index == 0" education-popup="http://search/personalizedSearch" icon-type="2" icon-color="orange" direction="bottom|right" override-position-relative="true" class="pos-absolute-full-parent ng-scope ng-isolate-scope"><ng-transclude>
                    <h4 class="ng-scope">Just for you</h4>
                </ng-transclude><div class="education-element-2 educational-color-orange" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|right" ns-popover-timeout="0"></div></dt><!-- end ngIf: $index == 0 -->
                    <!-- ngIf: $index > 0 -->
                </dl>
                <div class="col-airline col-md-2 col-xs-3 text-center">
                    <!--.gamification(ng-if="$index === 0") Collect {{ leg.gamificationPoints }} upsell points--><img ng-src="images/app/logos/co.jpg" alt="Airline logo" class="airline-logo-gamification" src="images/app/logos/co.jpg">
                    <div class="flight-code hidden-sm hidden-xs ng-binding">CO-96</div>
                    <!-- ngIf: $index == 0 && leg.segments.length == 1 --><div ng-if="$index == 0 &amp;&amp; leg.segments.length == 1" class="airline-data-sm hidden-md hidden-lg text-center ng-scope">
                    <div class="flight-code ng-binding">CO-96</div>
                    <div class="flight-equipment ng-binding">(767 jet)</div>
                </div><!-- end ngIf: $index == 0 && leg.segments.length == 1 -->
                </div>
                <div class="flight-details col-md-4 col-md-offset-2 hidden-sm hidden-xs">
                    <div class="row top">
                        <div class="col-xs-4 time-from"><span class="ng-binding">20:50</span></div>
                        <div class="col-xs-4 time-to"><span class="ng-binding">10:35</span></div>
                        <div class="col-xs-4 time-duration"><span class="ng-binding">07h 45m</span></div>
                    </div>
                    <div class="row bottom text-left text-gray">
                        <div class="col-xs-4 iata-from"><strong class="ng-binding">JFK</strong></div>
                        <div class="pos-absolute col-xs-3 col-xs-offset-1 arrow-picture"></div>
                        <div class="col-xs-4 iata-to"><strong class="ng-binding">CDG(767 jet)</strong></div>
                        <div class="col-xs-4 percent-on-time text-dark"><strong class="ng-binding">78 %</strong><span>&nbsp;on time</span></div>
                    </div>
                </div>
                <!-- ngIf: $index == 0 --><div ng-if="$index == 0" class="flight-details-sm flight-details-shortcut col-xs-6 col-xs-offset-3 hidden-md hidden-lg ng-scope">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span class="ng-binding">20:50</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <!-- ngIf: leg.segments.length > 1 -->
                    <div class="col-xs-5 time-to text-right"><span class="ng-binding">10:35</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5 ng-binding">JFK</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right ng-binding">CDG</div>
                </div>
                <!-- ngIf: ancillaries.included && ancillaries.included.length > 0 && leg.segments.length == 1 --><div ng-if="ancillaries.included &amp;&amp; ancillaries.included.length > 0 &amp;&amp; leg.segments.length == 1" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price ng-scope">
                <div class="text-center">Included in price</div>
                <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries center-block ng-scope">
                <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
            </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
            </div><!-- end ngIf: ancillaries.included && ancillaries.included.length > 0 && leg.segments.length == 1 -->
                <!-- ngIf: leg.segments.length > 1 -->
            </div><!-- end ngIf: $index == 0 -->
                <!-- ngIf: leg.segments.length > 1 -->
                <div ng-class="{'has-optional-extras': policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0}" class="col-md-3 col-md-offset-4 col-ancillaries hidden-sm hidden-xs has-optional-extras">
                    <div ng-show="ancillaries.included &amp;&amp; ancillaries.included.length > 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length > 0}" class="row included-in-price">
                        <div education-popup="http://search/ancillariesIncludedInPrice" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Included </span><br class="ng-scope"><span class="ng-scope">in price</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.all] --><!-- ngInclude: 'inline_ancillary_included.html' --><ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Snacks &amp; Drinks" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/meal_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/meal_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Entertainment" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/entertainment_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/entertainment_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Seat" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/economy_comfort_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/economy_comfort_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="In-flight WiFi usage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/wifi_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/wifi_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Hand Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/hand_baggage_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/hand_baggage_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/first_bag_green.png" alt="" class="ng-scope" src="images/css/icons/ancillary/first_bag_green.png"><!-- end ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/second_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="Baggage" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt="" class="ng-scope" src="images/css/icons/ancillary/third_bag_gray.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: !ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: personalizationService.isApplicableToPersona(leg) && ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isPersonalizedAncillary(ancillary, persona) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --></li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.all] -->
                    </div>
                    <div ng-show="policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length > 0" class="row optional-extras">
                        <div education-popup="http://search/ancillariesOptional" class="col-md-3 text-center ng-isolate-scope" icon-type="1" direction="bottom|left" icon-color="blue" style="position:relative;"><ng-transclude><span class="ng-scope">Optional </span><br class="ng-scope"><span class="ng-scope">extras</span></ng-transclude><div class="education-element-1 educational-color-blue" ns-popover="" ns-popover-template="education.html" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|left" ns-popover-timeout="0"></div></div>
                        <!-- ngRepeat: ancillaries in [ancillaries.optional] --><!-- ngInclude: 'inline_ancillary.html' --><ul ng-repeat="ancillaries in [ancillaries.optional]" ng-include="'inline_ancillary.html'" class="ancillaries col-md-9 center-block ng-scope">
                        <!-- ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/second_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/second_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">100</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' --><li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="Baggage" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container ng-scope"><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/third_bag.png" alt="" class="icon ng-scope" src="images/css/icons/ancillary/third_bag.png"><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) && !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) --><!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) && ancillaryService.isSelectedOptionalAncillary(segment, ancillary) -->
                        <!-- ngIf: ancillaryService.isOptionalAncillary(ancillary) --><p ng-if="ancillaryService.isOptionalAncillary(ancillary)" class="ng-binding ng-scope">200</p><!-- end ngIf: ancillaryService.isOptionalAncillary(ancillary) -->
                    </li><!-- end ngRepeat: ancillary in ancillaries | orderBy:'sortOrder' -->
                    </ul><!-- end ngRepeat: ancillaries in [ancillaries.optional] -->
                    </div>
                </div>
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="col-md-1 col-fares pos-absolute-full-height col-md-offset-9 text-dark hidden-sm hidden-xs ng-scope">
                <div class="text-gray ng-binding">Econ Flex</div>
                <div class="strong ng-binding">economy</div>
                <div class="show-all-fares pos-absolute-bottom-left border-top-colored"><a ng-click="showAllFares(leg)">Show all<span class="arrow-part"> fares&nbsp;<span class="fa fa-angle-right"></span></span></a></div>
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: !leg.segments.length == $index --><div ng-if="!leg.segments.length == $index" class="price-block col-md-2 col-xs-3 col-xs-offset-6 col-md-offset-1 ng-scope">
                <p><span class="currency"></span><span class="price ng-binding">931</span></p>
                <!-- ngIf: roundTripPrice(leg) > 0 -->
                <div ng-show="leg.combinable" ng-init="leg.combinable = true" ng-class="selectionMode" class="book">
                    <label ng-class="{ 'orange-color-unselect': leg.selected === true }" class="btn btn-primary select-btn">
                        <input type="checkbox" ng-model="leg.selected" ng-click="toggleFlight(leg)" class="hidden ng-pristine ng-untouched ng-valid"><span ng-show="selectionMode == 'book'" class="ng-binding">Select</span><span ng-show="selectionMode == 'compare'" class="ng-binding ng-hide">Compare</span>
                    </label>
                </div>
                <!-- ngIf: personalizationService.isApplicableToPersona(leg) -->
            </div><!-- end ngIf: !leg.segments.length == $index -->
                <!-- ngIf: leg.segments.length > 1 && !leg.segments.length == $index -->
                <!-- ngIf: $index == 0 --><label ng-if="$index == 0" class="select-flight ng-scope">
                <input type="checkbox" ng-click="selectFlightToCompare(leg)" class="hidden"><span class="checkbox"></span>
            </label><!-- end ngIf: $index == 0 -->
                <div class="vr col-md-offset-9 border-right-colored hidden-sm hidden-xs"></div>
                <div class="vr col-md-offset-10 border-right-colored hidden-sm hidden-xs"></div>
            </div><!-- end ngRepeat: segment in leg.segments track by $index -->
                <!-- ngIf: leg.segments.length > 1 -->
            </div>
        </div><!-- end ngRepeat: leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse -->
        </div><!-- end ngRepeat: direction in ['outbound', 'inbound'] -->
        </div>
        </div>
    </div>
</div>
<script data-main="scripts/main" src="scripts/require.js"></script>
<script type="text/ng-template" id="landing-page.html">
    <div class="landing-page">
        <div class="container">
            <div>
                <h1>IATA NDC-Powered Corporate Booking Tool Demonstrator</h1>
            </div>
            <div>
                <h2>Background and context</h2>
                <p class="text-justify">
                    IATA has involved core industry stakeholders in defining a new standard for the exchange of information in airline retail.
                    This New Distribution Capability (NDC) will enable the travel industry to transform the way air products are retailed to corporations,
                    by addressing the industrys current distribution limitations: product differentiation and time-to market, access to full and rich air content and transparent shopping experience.
                    IATA's NDC standard benefits the business traveller, the corporate, the agency, the GDS providers, technology providers and the airlines.
                </p>
                <p class="text-justify">
                    The purpose of this Demonstrator is to provide visual representation of how an "NDC-Powered" Corporate Booking Tool could benefit all parties, particularly the business travel buyer and the business traveller.
                    It provides a sand-box for interested parties to explore *some* of the unique aspects of how NDC might help improve the business travel landscape.
                </p>
                <p class="text-justify">
                    This is an educational sandbox, not a system. IATA has no intention of building a system. NDC is simply a standard.
                    Read more and stay updated on the <a href="http://www.iata.org/ndc">IATA NDC program website.</a>
                </p>
            </div>
            <div>
                <h2>How best to explore the sandbox</h2>
                <p class="text-justify"> You can start anywhere you wish, by clicking on a menu item that closest resembles your interests.
                <ul class="default">
                    <li>The Personas section sets the context of different users and what roles and rights they have. Clicking on a user type will take you to a search page with their profile activated.</li>
                    <li>The Search section is where one can search for flights, based on the user role selected in Personas. This is where you can explore optional ancillary purchases, easy like-for-like comparison of alternatives and various other aspects.</li>
                    <li>The Admin section summarizes the policy set-up for which this Sandbox is configured.</li>
                    <li>
                        The Reporting section gives a taster for the type of visualizations Corporate Booking Tools might use with NDC-powered data. Clicking here configures you as the Travel Manager Persona, so bear that
                        in mind if you do subsequent searches.
                    </li>
                </ul>
                </p>
                <p class="text-justify"> If you prefer to rather what a video outlining the various aspects then click<a href=" https://www.youtube.com/watch?v=ZNgihpXInJ4&amp;feature=youtu.be">here.</a> Also available shortly in Chinese, Spanish, French, Portuguese, German.</p>
            </div>
            <div>
                <h2 education-popup="http://landingPage">Educational content as you navigate the sandbox</h2>
                <p class="text-justify">
                    Throughout the Demonstrator you will notice educational alert icons such as the one to the top left of this paragraph.
                    This highlights unique features that NDC could enable in Corporate Booking Tools.
                    Simply hover over the alert to better understand the specific feature.
                </p>
            </div>
            <div>
                <h2>Approvals</h2>
                <p class="text-justify"></p>
                <p class="text-justify">
                    This Demonstrator does not attempt to cover all aspects of a corporate booking tool.
                    Some common features of normal booking tools are missing from this Demonstrator. These include approval for example.
                </p>
                <p class="text-justify">
                    Whilst approval is missing from the demonstrator, it should be said that NDC would enrich the type of information available to
                    approvers, both for pre-trip and in-trip approvals, as shown below. Typically these approvals are made by busy executives on a mobile device
                    but e-mail or web approval are also naturally possible.
                </p>
            </div>
            <div class="row image-row">
                <div class="col-sm-4"><img src="images/app/approval/preTripApproval.png" class="img-responsive"></div>
                <div class="col-sm-4"><img src="images/app/approval/midTripApproval.png" class="img-responsive"></div>
            </div>
            <div>
                <h2>Ancillary purchases during travel</h2>
                <p class="text-justify">
                    This Demonstrator doesn't focus on Traveller Tools, for bookings and related services once a trip is initiated. However, an NDC-Powered solution would
                    certainly benefit travellers whilst they are on the road.
                    With NDC, one can now push additional service information to mobile and enable the purchase of ancillaries on the go.
                    This information gets tied back to the original order and enhances real-time reporting and approval of all aspects of airline spend.
                </p>
            </div>
            <div class="row image-row">
                <div class="col-sm-4"><img src="images/app/travellerTools/AncillaryOnMobileFastTrackScreen01.jpg" class="img-responsive"></div>
                <div class="col-sm-4"><img src="images/app/travellerTools/AncillaryOnMobileFastTrackScreen02.jpg" class="img-responsive"></div>
                <div class="col-sm-4"><img src="images/app/travellerTools/AncillaryOnMobileFastTrackScreen03.jpg" class="img-responsive"></div>
            </div>
            <div>
                <h2>Disclaimer</h2>
                <p class="text-justify">
                    This demonstrator is for illustrative and educational purposes only.  The fares and availability information are made up and hard-coded and any similarity to existing Airlines are purely coincidental.
                    The ancillary images that feature herein have been extracted from publicly available data, but the Airlines these images belong to are in no way indicating that they are NDC compliant, or that they will be adopting NDC.
                </p>
            </div>
            <div class="row">
                <div class="col-sm-2"><a href="http://www.iata.org"><img src="images/app/logo-iata-2012.png"></a></div>
                <div class="col-sm-2"><a href="http://www.ross.consulting"><img src="images/app/logo-ross-consulting.png"></a></div>
                <div class="col-sm-2"><a href="http://www.festive-road.com"><img src="images/app/logo-festive-road.png"></a></div>
                <div class="col-sm-2"><a href="http://www.travel-think.com.com"><img src="images/app/logo-travel-think.png"></a></div>
                <div class="col-sm-2"><a href="http://www.thoughtworks.com"><img src="images/app/logo-tw-200.png" class="logo-tw"></a></div>
            </div>
            <div class="text-justify">
                <p>
                    Version 2.0 of this Demonstrator has been developed by Ross Consulting. It updated version 1.0 (developed by Thoughtworks), based on
                    a gap analysis performed by Festive Road. TravelThink assisted in the Gap Analysis and the educational content prepared as part of the Version 2.0 upgrade.
                </p>
            </div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="admin.html">
    <div ng-controller="adminController" class="admin-page">
        <div class="container-fluid">
            <div admin-table ng-repeat="tableRow in tables track by $index" class="row header-row"></div>
            <div admin-table admin-table-template="distribution-table-row.html" class="row header-row"></div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="table-row.html">
    <div class="col-lg-4 col-lg-offset-1 col-lg-offset-right-1 col-md-6 admin-table-box">
        <div class="row header-section-admin header-text">
            <div ng-if="tableRow[0].header.button" class="col-xs-6 text-left">
                <div ng-if="tableRow[0].header.text == 'Ancillaries'" education-popup="http://admin/PoliciesOnAncillaryPurchase"></div><span>{{ tableRow[0].header.text }}</span>
            </div>
            <div ng-if="tableRow[0].header.button" class="col-xs-6 text-right button-container">
                <button class="btn btn-warning btn-new-policies pull-right">+ New Policies</button>
            </div>
            <div ng-if="!tableRow[0].header.button" class="col-md-12 text-left"><span>{{ tableRow[0].header.text }}</span></div>
        </div>
        <div ng-include="'admin-table-body-header.html'" ng-if="!tableRow[0].header.hideBodyHeader" class="row content-section-admin"></div>
        <div ng-repeat="row in tableRow[0].body track by $index" ng-class="{'gray' : $index != 0 &amp;&amp; $index%2 != 0, 'bottom' : $index != 5 }" ng-include="'admin-table-body-content.html'" class="row content-section-admin table-border"></div>
        <div ng-if="tableRow[0].view" ng-include="tableRow[0].view.name" class="row content-section-admin table-border"></div>
    </div>
    <div ng-if="tableRow[1]" class="col-lg-4 col-lg-offset-right-2 col-md-6 admin-table-box">
        <div class="row header-section-admin header-text">
            <div ng-if="tableRow[1].header.button" class="col-xs-6 text-left">
                <div ng-if="tableRow[1].header.text == 'Content'" education-popup="http://admin/PoliciesOnContent" direction="bottom|left"></div><span>{{ tableRow[1].header.text }}</span>
            </div>
            <div ng-if="tableRow[1].header.button" class="col-xs-6 text-right button-container">
                <button class="btn btn-warning btn-new-policies pull-right">+ New Policies</button>
            </div>
            <div ng-if="!tableRow[1].header.button" class="col-md-12 text-left"><span>{{ tableRow[1].header.text }}</span></div>
        </div>
        <div ng-include="'admin-table-body-header.html'" class="row content-section-admin"></div>
        <div ng-class="{'gray' : $index != 0 &amp;&amp; $index%2 != 0, 'bottom' : $index != 6 }" ng-repeat="row in tableRow[1].body track by $index" ng-include="'admin-table-body-content.html'" class="row content-section-admin table-border"></div>
        <div ng-if="tableRow[1].view" class="row content-section-admin table-border bottom empty gray"></div>
        <div ng-if="tableRow[1].view" ng-include="tableRow[1].view.name" class="row content-section-admin no-padding"></div>
    </div>
</script>
<script type="text/ng-template" id="distribution-table-row.html">
    <div class="col-lg-4 col-lg-offset-1 col-lg-offset-right-1 col-md-6 admin-table-box">
        <div class="row header-section-admin header-text">
            <div ng-if="!distributionTable.header.button" class="col-md-12 text-left">
                <div ng-if="distributionTable.header.text == 'Distribution channels'" education-popup="http://admin/PoliciesOnDistibutionChannels" direction="top|left"></div><span>{{ distributionTable.header.text }}</span>
            </div>
            <div ng-if="distributionTable.header.button" class="col-xs-6 text-left"><span>{{ distributionTable.header.text }}</span></div>
            <div ng-if="distributionTable.header.button" class="col-xs-6 text-right">
                <button class="btn btn-warning btn-new-policies pull-right">+ New Policies</button>
            </div>
        </div>
        <div ng-include="'distribution-table-body-header.html'" ng-if="!distributionTable.header.hideBodyHeader" class="row content-section-admin"></div>
        <div ng-repeat="row in distributionTable.body track by $index" ng-class="{'gray' : $index != 0 &amp;&amp; $index%2 != 0, 'bottom' : $index != 5 }" ng-include="'distribution-table-body-content.html'" class="row content-section-admin table-border"></div>
        <div ng-if="tableRow.view" ng-include="tableRow.view.name" class="row content-section-admin table-border"></div>
    </div>
</script>
<script type="text/ng-template" id="admin-ancillaries-table-appendix.html">
    <div class="col-xs-7">Baggage Allowed</div>
    <div class="col-xs-1 no-padding-left">
        <input type="number" name="baggage_1" value="3" min="1" max="3" disabled>
    </div>
    <div class="col-xs-1 col-xs-offset-1 no-padding-left">
        <input type="number" name="baggage_2" value="3" min="1" max="3" disabled>
    </div>
    <div class="col-xs-1 col-xs-offset-1 no-padding-left">
        <input type="number" name="baggage_3" value="3" min="1" max="3" disabled>
    </div>
</script>
<script type="text/ng-template" id="admin-carriers-table-appendix.html">
    <div class="col-xs-6 table-border right">
        <div class="row carriers-text table-border bottom">
            <div class="col-xs-9"><span>Preferred Carriers</span></div>
            <div class="col-xs-3">
                <button class="btn btn-warning btn-xs btn-new-carrier">+Add</button>
            </div>
        </div>
        <div class="row carriers-text table-border gray">
            <div class="col-xs-9"><span class="carrier-span">Demeter Air</span></div>
            <div class="col-xs-3 no-padding-right text-center"><i class="do-padding-top fa fa-trash-o fa-2"></i></div>
        </div>
    </div>
    <div class="col-xs-6">
        <div class="row carriers-text table-border bottom">
            <div class="col-xs-9"><span>Blacklisted Carriers</span></div>
            <div class="col-xs-3">
                <button class="btn btn-warning btn-xs btn-new-carrier">+Add</button>
            </div>
        </div>
        <div class="row carriers-text table-border gray">
            <div class="col-xs-9"><span class="carrier-span">Hypnos Air</span></div>
            <div class="col-xs-3 no-padding-right text-center"><i class="do-padding-top fa fa-trash-o fa-2"></i></div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="admin-table-body-header.html">
    <div class="col-xs-6 col-xs-offset-6">
        <div class="col-xs-4 text-center border-orange">Normal</div>
        <div class="col-xs-4 text-center border-purple">Exec</div>
        <div class="col-xs-4 text-center border-red">Director</div>
    </div>
</script>
<script type="text/ng-template" id="distribution-table-body-header.html">
    <div class="col-xs-6 col-xs-offset-6 row-eq-height">
        <div class="col-xs-4 text-center border-orange">GDS</div>
        <div class="col-xs-4 text-center border-purple">Direct Connect</div>
        <div class="col-xs-4 text-center border-red">Aggregator A</div>
    </div>
</script>
<script type="text/ng-template" id="admin-table-body-content.html">
    <div class="col-xs-7">{{ row.text }}</div>
    <div class="col-xs-1 checkboxes-green text-center">
        <label>
            <input type="checkbox" ng-model="row.checkboxes.normal" ng-change="" disabled class="hidden"><span class="checkbox"></span>
        </label>
    </div>
    <div class="col-xs-1 col-xs-offset-1 checkboxes-green text-center">
        <label>
            <input type="checkbox" ng-model="row.checkboxes.exec" ng-change="" disabled class="hidden"><span class="checkbox"></span>
        </label>
    </div>
    <div class="col-xs-1 col-xs-offset-1 checkboxes-green text-center">
        <label>
            <input type="checkbox" ng-model="row.checkboxes.dir" ng-change="" disabled class="hidden"><span class="checkbox"></span>
        </label>
    </div>
</script>
<script type="text/ng-template" id="distribution-table-body-content.html">
    <div class="col-xs-7">{{ row.text }}</div>
    <div class="col-xs-1 checkboxes-green text-center">
        <label>
            <input type="checkbox" ng-model="row.checkboxes.gdc" ng-change="" disabled class="hidden"><span class="checkbox"></span>
        </label>
    </div>
    <div class="col-xs-1 col-xs-offset-1 checkboxes-green text-center">
        <label>
            <input type="checkbox" ng-model="row.checkboxes.directConn" ng-change="" disabled class="hidden"><span class="checkbox"></span>
        </label>
    </div>
    <div class="col-xs-1 col-xs-offset-1 checkboxes-green text-center">
        <label>
            <input type="checkbox" ng-model="row.checkboxes.aggA" ng-change="" disabled class="hidden"><span class="checkbox"></span>
        </label>
    </div>
</script>
<script type="text/ng-template" id="personas.html">
    <div class="persona-page">
        <div class="container">
            <div class="row">
                <h1 education-popup="http://personas">Personas</h1>
            </div>
            <div ng-repeat="persona in personasList | orderBy:'order'" class="row">
                <div ng-class="persona.cssClass" ng-click="setPersona(persona)" class="persona">
                    <div class="persona-decoration">
                        <div class="persona-image"><img ng-src="{{persona.image}}" class="persona-picture"></div>
                        <div class="persona-bio">
                            <h3>{{persona.name}}</h3><span class="user-level">{{persona.group}}</span>
                        </div>
                    </div>
                    <ul class="access-levels">
                        <li ng-repeat="level in persona.levels">{{level}}</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="reports.html">
    <div ng-controller="reportsController" class="reports-page">
        <div class="container-fluid content-custom-container">
            <div ng-show="reportType == 'ancillary_info'" class="ancillary-report">
                <div ng-include="'report-header.html'" class="row page-header-custom"></div>
                <div class="row info-table">
                    <div class="col-md-7 table-container-custom col-md-offset-1">
                        <div class="row table-header-red row-eq-height">
                            <div class="col-md-9 text-left table-row-red"><span class="strong">Booked Ancillaries</span><span>(Optional extras in unbundled fares)</span></div>
                            <div class="col-md-3 text-right table-row-red button-row pos-relative">
                                <button class="btn btn-warning btn-new-policies">+ Export to excell</button><i class="fa fa-file-excel-o excell-icon pos-absolute"></i>
                            </div>
                        </div>
                        <div class="row table-header-green text-center row-eq-height">
                            <div class="col-xs-5 table-row-green border-green text-left"><span>Ancillary</span></div>
                            <div class="col-xs-2 table-row-green border-orange"><span>Number of bookings</span></div>
                            <div class="col-xs-2 table-row-green border-purple"><span>Spend (EUR)</span></div>
                            <div class="col-xs-1 table-row-green border-red"><span>Average Cost (EUR)</span></div>
                            <div class="col-xs-1 table-row-green border-teal"><span>Short Haul</span></div>
                            <div class="col-xs-1 table-row-green border-yellow"><span>Long Haul</span></div>
                        </div>
                        <div ng-repeat="ancillary in bookedAncillaries track by $index" ng-class="{ 'gray': $index != 0 &amp;&amp; $index%2 != 0 }" class="row content-row text-center border-bottom clearfix">
                            <div class="col-xs-5 text-left"><img src="{{ ancillary.icon }}" width="20px" height="20px" class="pull-left image-circle"><span>{{ ancillary.text }}</span></div>
                            <div class="col-xs-2"><span>{{ ancillary.bookings | ancillaryReport }}</span></div>
                            <div class="col-xs-2"><span>{{ ancillary.spend | ancillaryReport }}</span></div>
                            <div class="col-xs-1 text-right"><span>{{ ancillary.cost | ancillaryReport }}</span></div>
                            <div class="col-xs-1 text-right"><span>{{ ancillary.short | ancillaryReport }}</span></div>
                            <div class="col-xs-1 text-right"><span>{{ ancillary.long | ancillaryReport }}</span></div>
                        </div>
                        <div class="row content-row text-center border-bottom text-color-green">
                            <div class="col-xs-5 content-cell total-padding"><span class="capital">Total</span></div>
                            <div class="col-xs-2 content-cell"><span>{{ getTotal('bookings', bookedAncillaries) }}</span></div>
                            <div class="col-xs-2 content-cell"><span>{{ getTotal('spend', bookedAncillaries) }}</span></div>
                            <div class="col-xs-1 content-cell text-right"><span>{{ getTotal('cost', bookedAncillaries) }}</span></div>
                            <div class="col-xs-1 content-cell text-right"><span>{{ getTotal('short', bookedAncillaries) }}</span></div>
                            <div class="col-xs-1 content-cell text-right"><span>{{ getTotal('long', bookedAncillaries) }}</span></div>
                        </div>
                    </div>
                </div>
                <div class="row info-table">
                    <div class="col-md-7 table-container-custom col-md-offset-1">
                        <div class="row table-header-red row-eq-height">
                            <div class="col-md-9 text-left table-row-red"><span class="strong">Included Ancillaries</span><span>(Bundled into Fare)</span></div>
                            <div class="col-md-3 text-right table-row-red button-row pos-relative">
                                <button class="btn btn-warning btn-new-policies">+ Export to excell</button><i class="fa fa-file-excel-o excell-icon pos-absolute"></i>
                            </div>
                        </div>
                        <div class="row table-header-green text-center row-eq-height">
                            <div class="col-xs-5 table-row-green border-green text-left"><span>Ancillary</span></div>
                            <div class="col-xs-3 table-row-green border-orange"><span>Number of inclusions</span></div>
                            <div class="col-xs-2 table-row-green border-purple"><span>Included in Short Haul</span></div>
                            <div class="col-xs-2 table-row-green border-red"><span>Included in Long Haul</span></div>
                        </div>
                        <div ng-repeat="ancillary in includedAncillaries track by $index" ng-class="{ 'gray': $index != 0 &amp;&amp; $index%2 != 0 }" class="row content-row text-center border-bottom">
                            <div class="col-xs-5 text-left"><img src="{{ ancillary.icon }}" width="20px" height="20px" class="pull-left image-circle"><span>{{ ancillary.text }}</span></div>
                            <div class="col-xs-3"><span>{{ ancillary.inclusions | ancillaryReport }}</span></div>
                            <div class="col-xs-2"><span>{{ ancillary.short | ancillaryReport }}</span></div>
                            <div class="col-xs-2"><span>{{ ancillary.long | ancillaryReport }}</span></div>
                        </div>
                        <div class="row content-row text-center border-bottom text-color-green">
                            <div class="col-xs-5 content-cell total-padding"><span class="capital">Total</span></div>
                            <div class="col-xs-3 content-cell"><span>{{ getTotal('inclusions', includedAncillaries) }}</span></div>
                            <div class="col-xs-2 content-cell"><span>{{ getTotal('short', includedAncillaries) }}</span></div>
                            <div class="col-xs-2 content-cell"><span>{{ getTotal('long', includedAncillaries) }}</span></div>
                        </div>
                    </div>
                </div>
            </div>
            <div ng-show="reportType == 'ancillary_dashboard'" class="ancillary-report">
                <div ng-include="'dashboard-header.html'" class="row page-header-custom"></div>
                <div class="row"><img ng-src="images/css/backgrounds/reporting.png" width="100%" height="100%"></div>
            </div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="report-header.html">
    <div education-popup="http://reports/ancillaries/ancillaryInfoReport" class="col-sm-7 page-name">
        <h4 class="strong capital">Ancillary Report Info</h4>
    </div>
    <div class="col-sm-1 col-xs-3 col-sm-offset-1 text-center options"><span class="label label-warning">Today</span></div>
    <div class="col-sm-1 col-xs-3 text-center options border-right"><span>This Week</span></div>
    <div class="col-sm-1 col-xs-3 text-center options border-right"><span>This Month</span></div>
    <div class="col-sm-1 col-xs-3 text-center options"><span>This Year</span></div>
</script>
<script type="text/ng-template" id="dashboard-header.html">
    <div education-popup="http://reports/ancillaries/ancillaryDashboard" class="col-sm-7 page-name">
        <h4 class="strong capital">Ancillary Dashboard</h4>
    </div>
</script>
<script type="text/ng-template" id="search.html">
    <div class="progress">
        <div class="contentWrapper">
            <div class="content"></div>
        </div>
    </div>
    <!--.side.hidden-xs
      .side-bar-tabs
        .side-bar-tab.upsell(data-tab-content="#upsell-side") Upsell
        .side-bar-tab.policy.active(data-tab-content="#profile-side") Policy

      //.side-bar
        #upsell-side.side-bar-section
          .nano
            .sliderContent
              include sidebar/upsell

        #profile-side.side-bar-section
          .nano
            .sliderContent
              include sidebar/policyYe

      -->
    <div id="tmc_journey" class="container-fluid">
        <div class="search-container">
            <div ng-click="hideSearchPanel = !hideSearchPanel" class="row mobile-search-panel visible-xs">
                <div class="col-xs-10">
                    <div class="row">
                        <div class="col-xs-12 text-center"><span>{{ originName }}&nbsp;<span class="strong">({{ origin }})&nbsp;</span></span><span>- {{ destinationName }}&nbsp;<span class="strong">({{ destination }})</span></span></div>
                    </div>
                    <div class="text-center">{{ departureDate | date:cbtDateWithYearFormat }}</div>
                </div>
                <div class="col-xs-2 search-panel-icon"><i class="fa fa-search"></i></div>
            </div>
            <div ng-init="hideSearchPanel=true" ng-class="{ 'hidden-xs': hideSearchPanel }" class="row search-row">
                <div class="col-md-5 col-search-fields">
                    <div class="search-panel from-to">
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <div class="col-sm-3">
                                        <label for="from" title="From" class="bs-height">From</label>
                                    </div>
                                    <div class="col-sm-9">
                                        <input id="from" type="text" name="origin" ng-model="origin" disabled class="form-control">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <div class="col-sm-3">
                                        <label for="destination" title="To" class="bs-height">To</label>
                                    </div>
                                    <div class="col-sm-9">
                                        <input id="to" type="text" name="destination" ng-model="destination" disabled class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-5 col-search-fields">
                    <div class="search-panel">
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group has-feedback">
                                    <div class="col-sm-3">
                                        <label title="Departure" class="bs-height control-label">Depart</label>
                                    </div>
                                    <div class="col-sm-9">
                                        <input id="from-date" type="text" name="origin-date" ng-click="departureDate.opened = !departureDate.opened" uib-datepicker-popup="{{ format }}" is-open="departureDate.opened" datepicker-options="dateOptions" show-weeks="false" ng-model="departureDate" disabled class="form-control"><i class="form-control-feedback"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group has-feedback">
                                    <div class="col-sm-3">
                                        <label title="Return" class="bs-height control-label">Return</label>
                                    </div>
                                    <div class="col-sm-9">
                                        <input id="to-date" type="text" name="destination-date" ng-click="returnDate.opened = !returnDate.opened" uib-datepicker-popup="{{ format }}" is-open="returnDate.opened" datepicker-options="dateOptions" ng-model="returnDate" disabled class="form-control"><i class="form-control-feedback"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-2 col-search-btn">
                    <div class="search-btn">
                        <button ng-click="collapseAdvancedFilters()" class="btn btn-warning btn-block-binoculars"><span class="fa fa-binoculars"></span></button>
                        <div class="search-btn-wrapper">
                            <button id="search" type="submit" ng-click="triggerSearch(); hideSearchPanel = !hideSearchPanel" ng-disabled="ancillaryService.loaded" class="btn btn-warning btn-block-search">SEARCH<span class="fa fa-search pull-right"></span></button>
                        </div>
                    </div>
                    <div ng-controller="filtersController" class="personalized-search capital clearfix">
                        <div education-popup="http://search/personalizedSearchToggle" direction="bottom|right" class="pull-left"><span class="personalized-text">Personalized search</span></div>
                        <div ng-if="! isPersonalizedOutOfPolicy()" class="pull-right">
                            <label class="switch">
                                <input type="checkbox" ng-model="personalization.status" ng-change="setPersonalization(); changeSortOrder()" class="switch-input"><span data-on="On" data-off="Off" class="switch-label"></span><span class="switch-handle"></span>
                            </label>
                        </div>
                        <div ng-if="isPersonalizedOutOfPolicy()" ns-popover ns-popover-template="out-of-policy.html" ns-popover-trigger="click" ns-popover-placement="bottom|right" ns-popover-timeout="-1" ns-popover-hide-on-click="false" ns-popover-theme="ns-popover-filters-green-bar-theme flight-details-filter" class="pull-right">
                            <label class="switch">
                                <input type="checkbox" class="switch-input"><span data-on="On" data-off="Off" class="switch-label"></span><span class="switch-handle"></span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div uib-collapse="isCollapsed" ng-include="'form-filters.html'" class="search-row filters-advanced"></div>
        </div>
        <div id="results-container" ng-controller="resultsController" class="results-container">
            <div id="results-view" ng-include="'results.html'"></div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="inline_ancillary.html">
    <li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ng-class="{privilege: ancillary.isCompanyPrivileged, purchased: ancillaryService.isSelectedOptionalAncillary(segment, ancillary)}" ancillary-popup="ancillary" ancillary-popup-optional="true" title="{{ancillary.title}}" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="ancillary-popover-container"><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/{{ancillary.type}}.png" alt="" class="icon"><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/{{ancillary.type}}_orange.png" alt="" class="icon">
        <p ng-if="ancillaryService.isOptionalAncillary(ancillary)">&#8364{{ancillary.price}}</p>
    </li>
</script>
<script type="text/ng-template" id="inline_ancillary_included.html">
    <li ng-repeat="ancillary in ancillaries | orderBy:'sortOrder'" ancillary-popup="ancillary" title="{{ancillary.title}}" class="ancillary-popover-container"><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/{{ancillary.type}}_gray.png" ng-hide="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" alt=""><img ng-if="!ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/{{ancillary.type}}_green.png" alt=""><span ng-if="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" class="freebie-ancillary">FREEBIE</span><img ng-if="personalizationService.isApplicableToPersona(leg) &amp;&amp; ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" ng-src="images/css/icons/ancillary/{{ancillary.type}}_blue.png" alt=""><img ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/{{ancillary.type}}_orange.png" alt=""></li>
</script>
<script type="text/ng-template" id="results.html">
    <e ng-if="noVisibleResults" class="no-results">
        <h3>No results found</h3>
        <p><b>Sorry, we couldn't find any flights for your selection. Please refine the filters or search again with different parameters.</b></p>
    </e>
    <div ng-repeat="direction in ['outbound', 'inbound']" ng-cloak ng-show="journeys[direction] &amp;&amp; !noVisibleResults">
        <div id="filters-container" ng-if="showResultsContainer">
            <div class="row header-results-bar-section">
                <div education-popup="http://search/comparisonAlternatives" icon-color="orange" class="col-md-2 col-xs-3 text-center">
                    <div ng-click="doCompare()" class="header-results-bar-option selection-denied hidden-xs hidden-sm"><span>Compare</span></div>
                    <div ng-click="doCompare()" class="header-results-bar-option selection-denied hidden-md hidden-lg"><span class="fa fa-files-o"></span></div>
                </div>
                <!--.col-md-1.col-xs-3
            .header-results-bar-option.selection-denied
              span.filter-picture Airline
            -->
                <div class="col-md-4 col-xs-6 text-left">
                    <div ns-popover ns-popover-template="flight-details.html" ns-popover-trigger="click" ns-popover-placement="bottom|left" ns-popover-timeout="-1" ns-popover-hide-on-click="false" ns-popover-theme="ns-popover-filters-green-bar-theme flight-details-filter" class="header-results-bar-option selection-denied text-center"><span class="filter-picture">Flight Details</span></div>
                </div>
                <div education-popup="http://search/ancillariesServicesRichContent" icon-color="orange" class="col-md-3 hidden-sm hidden-xs text-left">
                    <div ns-popover ns-popover-template="ancillary-services.html" ns-popover-trigger="click" ns-popover-placement="bottom|left" ns-popover-timeout="-1" ns-popover-theme="ns-popover-filters-green-bar-theme" class="header-results-bar-option selection-denied text-center"><span class="filter-picture">Ancillary Services</span></div>
                </div>
                <div class="col-md-1 hidden-sm hidden-xs">
                    <div ns-popover ns-popover-template="flexibility.html" ns-popover-trigger="click" ns-popover-placement="bottom|left" ns-popover-timeout="-1" ns-popover-theme="ns-popover-filters-green-bar-theme" class="header-results-bar-option selection-denied"><span class="filter-picture">Flexibility</span></div>
                </div>
                <div class="col-md-2 col-xs-3 pos-relative">
                    <div ns-popover ns-popover-template="sort-by-filter.html" ns-popover-trigger="click" ns-popover-placement="bottom|right" ns-popover-timeout="-1" ns-popover-theme="ns-popover-filters-green-bar-theme" class="header-results-bar-option selection-denied sort-by-filter text-center"><span>Sort by:&nbsp;</span><span class="sort-by-span">{{ getSortType() }}</span><i ng-if="sortOrder === 'asc'" ng-click="changeSortOrder('desc')" class="sort-type-caret fa fa-caret-down"></i><i ng-if="sortOrder === 'desc'" ng-click="changeSortOrder('asc')" class="sort-type-caret fa fa-caret-up"></i></div>
                </div>
            </div>
            <div class="results-panel-direction">{{direction.charAt(0).toUpperCase() + direction.slice(1);}}</div>
        </div>
        <div ng-include="'resultItem.html'" ng-repeat="leg in flights = journeys[direction] | orderBy:[shouldGroupByCombinable(direction), flightSortExpression[$parent.flightsSortedBy]]:reverse" ng-model="leg" ng-cloak ng-show="isVisible() &amp;&amp; isFilterAllowed() &amp;&amp; isFlightDetailsFilterAllowed() &amp;&amp; isAdvancedFilterAllowed()" ng-controller="legController"></div>
    </div>
</script>
<script type="text/ng-template" id="resultItem.html">
    <div ng-cloak ng-show="leg.selectedClass === undefined" data-operating-airline="{{leg.operatingAirline}}" ng-class="{'has-segments': leg.segments.length &gt; 1, 'leg-details-hidden': !smDetailsVisible, 'just-for-you': personalizationService.isApplicableToPersona(leg) }" class="results-item">
        <div ng-show="policyService.violatesRules(leg)" class="pos-absolute-full-height out-of-policy"></div>
        <div ng-repeat="segment in leg.segments track by $index" ng-controller="segmentController" ng-class="{'leg-segment-nth': $index &gt; 0}" class="row leg-segment">
            <dl class="just-for-you-cover col-md-2 col-xs-3 col-xs-offset-9 col-md-offset-10 pos-absolute-full-height">
                <dt ng-if="$index == 0" education-popup="http://search/personalizedSearch" icon-type="2" icon-color="orange" direction="bottom|right" override-position-relative="true" class="pos-absolute-full-parent">
                <h4>Just for you</h4>
                </dt>
                <dt ng-if="$index &gt; 0" class="pos-absolute-full-parent"></dt>
            </dl>
            <div class="col-airline col-md-2 col-xs-3 text-center">
                <!--.gamification(ng-if="$index === 0") Collect {{ leg.gamificationPoints }} upsell points--><img ng-src="{{leg.operatingAirlineLogo}}" alt="Airline logo" class="airline-logo-gamification">
                <div class="flight-code hidden-sm hidden-xs">{{segment.airlineData.flightCode}}</div>
                <div ng-if="$index == 0 &amp;&amp; leg.segments.length == 1" class="airline-data-sm hidden-md hidden-lg text-center">
                    <div class="flight-code">{{segment.airlineData.flightCode}}</div>
                    <div class="flight-equipment">({{segment.equipment}})</div>
                </div>
            </div>
            <div class="flight-details col-md-4 col-md-offset-2 hidden-sm hidden-xs">
                <div class="row top">
                    <div class="col-xs-4 time-from"><span>{{segment.schedule.departureDateString | dateStringFilter}}</span></div>
                    <div class="col-xs-4 time-to"><span>{{segment.schedule.arrivalDateString | dateStringFilter}}</span></div>
                    <div class="col-xs-4 time-duration"><span>{{segment.schedule.duration | duration }}</span></div>
                </div>
                <div class="row bottom text-left text-gray">
                    <div class="col-xs-4 iata-from"><strong>{{segment.schedule.origin}}</strong></div>
                    <div class="pos-absolute col-xs-3 col-xs-offset-1 arrow-picture"></div>
                    <div class="col-xs-4 iata-to"><strong>{{segment.schedule.destination}}({{segment.equipment}})</strong></div>
                    <div class="col-xs-4 percent-on-time text-dark"><strong>{{segment.onTime.valueHumanized}} %</strong><span>&nbsp;on time</span></div>
                </div>
            </div>
            <div ng-if="$index == 0" class="flight-details-sm flight-details-shortcut col-xs-6 col-xs-offset-3 hidden-md hidden-lg">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span>{{segment.schedule.departureDateString | dateStringFilter}}</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <div ng-if="leg.segments.length &gt; 1" class="stops col-xs-offset-5 col-xs-2">{{leg.stopOvers}}</div>
                    <div class="col-xs-5 time-to text-right"><span>{{leg.segments[leg.segments.length-1].schedule.arrivalDateString | dateStringFilter}}</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5">{{segment.schedule.origin}}</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right">{{leg.segments[leg.segments.length-1].schedule.destination}}</div>
                </div>
                <div ng-if="ancillaries.included &amp;&amp; ancillaries.included.length &gt; 0 &amp;&amp; leg.segments.length == 1" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length &gt; 0}" class="row included-in-price">
                    <div class="text-center">Included in price</div>
                    <ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries center-block"></ul>
                </div>
                <div ng-if="leg.segments.length &gt; 1" class="row view-details text-center">
                    <button type="button" ng-click="smViewDetails()" class="btn btn-success btn-details">View Details</button>
                </div>
            </div>
            <div ng-if="leg.segments.length &gt; 1" class="flight-details-sm col-xs-6 col-xs-offset-3 hidden-md hidden-lg">
                <div class="row time-from-to">
                    <div class="col-xs-5 time-from"><span>{{segment.schedule.departureDateString | dateStringFilter}}</span></div>
                    <div class="col-xs-2 arrow-picture"></div>
                    <div class="col-xs-5 time-to text-right"><span>{{segment.schedule.arrivalDateString | dateStringFilter}}</span></div>
                </div>
                <div class="row iata-from-to text-gray">
                    <div class="col-xs-5">{{segment.schedule.origin}}</div>
                    <div class="col-xs-5 col-xs-offset-2 text-right">{{segment.schedule.destination}}</div>
                </div>
                <div ng-if="ancillaries.included &amp;&amp; ancillaries.included.length &gt; 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length &gt; 0}" class="row included-in-price">
                    <div class="text-center">Included in price</div>
                    <ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries center-block"></ul>
                </div>
            </div>
            <div ng-class="{'has-optional-extras': policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length &gt; 0}" class="col-md-3 col-md-offset-4 col-ancillaries hidden-sm hidden-xs">
                <div ng-show="ancillaries.included &amp;&amp; ancillaries.included.length &gt; 0" ng-class="{'included-ancillaries-solo':!ancillaries.optional.length &gt; 0}" class="row included-in-price">
                    <div education-popup="http://search/ancillariesIncludedInPrice" class="col-md-3 text-center">Included <br />in price</div>
                    <ul ng-repeat="ancillaries in [ancillaries.all]" ng-include="'inline_ancillary_included.html'" class="ancillaries col-md-9 center-block"></ul>
                </div>
                <div ng-show="policyService.enableOptionalAncillaries() &amp;&amp; ancillaries.optional.length &gt; 0" class="row optional-extras">
                    <div education-popup="http://search/ancillariesOptional" class="col-md-3 text-center">Optional <br />extras</div>
                    <ul ng-repeat="ancillaries in [ancillaries.optional]" ng-include="'inline_ancillary.html'" class="ancillaries col-md-9 center-block"></ul>
                </div>
            </div>
            <div ng-if="!leg.segments.length == $index" class="col-md-1 col-fares pos-absolute-full-height col-md-offset-9 text-dark hidden-sm hidden-xs">
                <div class="text-gray">{{ farePriceService.getSelectedFarePrice(leg).name}}</div>
                <div class="strong">{{ farePriceService.getSelectedFarePrice(leg).class}}</div>
                <div class="show-all-fares pos-absolute-bottom-left border-top-colored"><a ng-click="showAllFares(leg)">Show all<span class="arrow-part"> fares&nbsp;<span class="fa fa-angle-right"></span></span></a></div>
            </div>
            <div ng-if="!leg.segments.length == $index" class="price-block col-md-2 col-xs-3 col-xs-offset-6 col-md-offset-1">
                <p><span class="currency"></span><span class="price">{{ farePriceService.getRoundTripAncillariesPrice(leg).price + roundTripPrice(leg) }}</span></p>
                <div ng-if="roundTripPrice(leg) &gt; 0" class="optionals"><span>Including <br /> {{ roundTripPrice(leg) }} optionals for roundTrip</span></div>
                <div ng-cloak ng-show="leg.combinable" ng-init="leg.combinable = true" ng-class="selectionMode">
                    <label ng-class="{ 'orange-color-unselect': leg.selected === true }" class="btn btn-primary select-btn">
                        <input type="checkbox" ng-model="leg.selected" ng-click="toggleFlight(leg)" class="hidden"><span ng-cloak ng-show="selectionMode == 'book'">{{ leg.selected === true ? "Unselect" : "Select" }}</span><span ng-cloak ng-show="selectionMode == 'compare'">{{ leg.selected === true ? "Unselect" : "Compare" }}</span>
                    </label>
                </div>
                <div ng-if="personalizationService.isApplicableToPersona(leg)" class="optionals personalization-optionals"><span>EUR {{ roundTripFreeBieCost(leg, persona) }} <br /> EXTRA BUNDLED FREE</span></div>
            </div>
            <div ng-if="leg.segments.length &gt; 1 &amp;&amp; !leg.segments.length == $index" class="hr col-md-10 col-xs-9"></div>
            <label ng-if="$index == 0" class="select-flight">
                <input type="checkbox" ng-click="selectFlightToCompare(leg)" class="hidden"><span class="checkbox"></span>
            </label>
            <div class="vr col-md-offset-9 border-right-colored hidden-sm hidden-xs"></div>
            <div class="vr col-md-offset-10 border-right-colored hidden-sm hidden-xs"></div>
        </div>
        <button ng-if="leg.segments.length &gt; 1" type="button" ng-click="smViewDetails()" title="Hide Details" class="pos-absolute-bottom-right btn btn-default btn-details-collapse hidden-md hidden-lg"><i class="fa fa-toggle-up"></i></button>
    </div>
</script>
<script type="text/ng-template" id="checkout.html">
    <div class="container-fluid checkout-page">
        <div class="row selected-flight">
            <div class="col-xs-12 selected-flight-text text-center strong"><span>Selected Flight</span></div>
        </div>
        <div ng-repeat="direction in ['outbound', 'inbound'] track by $index" class="row outbound-ticket-body">
            <div class="strong outbound-ticket text-capitalize">{{ direction }}</div>
            <div ng-repeat="segment in flight[direction].segments" ng-class="{ 'border-no-bottom' : flight[direction].segments.length &gt; 1 &amp;&amp; flight[direction].segments.length-1 == $index }" class="col-xs-12 ticket-body-segment">
                <div class="col-xs-12 segment-optionals row-eq-height text-center">
                    <div class="col-md-2 col-sm-3 col-xs-3">
                        <div class="airline-logo"><img ng-src="{{ flight[direction].operatingAirlineLogo }}" alt="Airline logo"></div>
                        <div>{{ segment.airlineData.flightCode }}</div>
                    </div>
                    <div class="col-md-2 col-sm-3 col-xs-3 time-and-from">
                        <div>
                            <div class="time-from"><span class="icon"><span class="capital">{{ segment.schedule.origin | airportName }}&nbsp;</span><span class="strong">({{ segment.schedule.origin }})</span></span></div>
                        </div>
                        <div><span class="strong">{{segment.schedule.departureDateString | dateStringFilter}}</span></div>
                    </div>
                    <div class="col-xs-1 arrow-picture"></div>
                    <div class="col-md-2 col-sm-3 col-xs-3 time-and-from">
                        <div>
                            <div class="time-to"><span class="icon capital">{{ segment.schedule.destination | airportName }}&nbsp;<span class="strong">({{ segment.schedule.destination }})</span></span></div>
                        </div>
                        <div><span class="strong">{{segment.schedule.arrivalDateString | dateStringFilter}}</span></div>
                    </div>
                    <div class="col-md-3 visible-md visible-lg fare-price">
                        <div><span>{{ farePriceService.getSelectedFarePrice(flight[direction]).name }}&nbsp;</span><span class="strong">{{ farePriceService.getSelectedFarePrice(flight[direction]).class }}</span></div>
                        <div><span class="jet">({{ segment.equipment }} jet)</span></div>
                    </div>
                    <div ng-if="$index === 0" class="col-xs-2 ticket-body-price text-right"><span class="euro"></span><span class="price">{{ getFairPrice(flight) }}</span></div>
                </div>
                <div class="col-sm-12 visible-sm visible-xs fare-price text-center">
                    <div><span>{{ farePriceService.getSelectedFarePrice(flight[direction]).name }}&nbsp;</span><span class="strong">{{ farePriceService.getSelectedFarePrice(flight[direction]).class }}</span></div>
                    <div><span class="jet">({{ segment.equipment }} jet)</span></div>
                </div>
                <div ng-if="segmentOptionalAncillaries(segment.ancillaries)" class="col-xs-12 optionals">
                    <div education-popup="http://checkout/optionalExtras" class="col-xs-3 col-md-2 text-center optionals-extra">Optional extras</div>
                    <div ng-controller="ancillaryController" class="col-xs-9 col-md-10">
                        <div class="row top-row">
                            <div class="col-xs-9 selected-ancillaries-block">
                                <div ng-repeat="ancillary in segment.ancillaries" ng-if="ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-hide="personalizationService.isApplicableToPersona(flight[direction]) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" ng-controller="ancillaryController" class="selected-ancillaries center-block">
                                    <label>
                                        <input type="checkbox" ng-model="optional.selected" checked="isSelectedOptional" class="hidden"><span class="checkbox"></span>
                                    </label><img ng-src="images/css/icons/ancillary/{{ ancillary.type }}_orange.png"><span class="ancillary-price strong"> {{ ancillary.price }}</span>
                                </div>
                                <div ng-repeat="ancillary in segment.ancillaries" ng-if="personalizationService.isApplicableToPersona(flight[direction]) &amp;&amp; ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" ng-controller="ancillaryController" class="selected-ancillaries personalized center-block pos-relative"><span class="personalized-text">FREEBIE</span><img ng-src="images/css/icons/ancillary/{{ ancillary.type }}_blue.png"><span class="ancillary-price strong"> {{ ancillary.price }}</span></div>
                            </div>
                            <div ng-if="!ancillaryService.isAllOptionalAncillariesDeselected(segment)" class="col-xs-3 ticket-body-price text-right"><span class="euro"></span><span class="price">{{ itineraryPriceService.getSelectedOptionalsPrice(flight[direction]) }}</span></div>
                        </div>
                        <div ng-class="{ 'border-no-top' : optionalTopBorder }" class="row bottom-row">
                            <div ng-repeat="ancillary in segment.ancillaries" ng-if="ancillaryService.isOptionalAncillary(ancillary) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-hide="personalizationService.isApplicableToPersona(flight[direction]) &amp;&amp; ancillaryService.isPersonalizedAncillary(ancillary, persona)" ng-controller="ancillaryController" class="unselected-ancillaries center-block">
                                <label>
                                    <input type="checkbox" ng-model="optional.selected" checked="isSelectedOptional" class="hidden"><span class="checkbox"></span>
                                </label><img ng-src="images/css/icons/ancillary/{{ ancillary.type }}.png"><span class="ancillary-price strong"> {{ ancillary.price }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div ng-if="$index === 1" class="col-xs-12 total-section text-right"><span class="total-text">Total</span><span class="euro total"></span><span class="price">{{ getFairPrice(flight) }}</span></div>
        </div>
        <div class="row return-section">
            <div class="col-xs-6 text-left return-section-text"><i class="fa fa-chevron-left"></i><a href="/#search/noReset">BACK</a></div>
            <div class="col-xs-6 text-right return-section-button"><a href="/#/itinerary" class="btn btn-primary select-btn capital">Book</a></div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="itinerary.html">
    <div class="container-fluid itinerary-page">
        <div class="row header-row">
            <div class="col-xs-7 text-left"><span class="itinerary-header">Your Itinerary</span><span class="flight-number">No. 16789</span></div>
            <div class="col-xs-5 your-itinerary text-right nowrap">
                <div class="total-price"><span>Total Price &nbsp;&nbsp;</span><span class="euro"></span><span class="price">{{ totalPrice(farePriceService.getSelectedFarePrice(itinerary.legs.inbound).price) }}</span></div>
                <div ng-if="totalAncillariesPrice() &gt; 0" class="included-in-price">(Includes {{ totalAncillariesPrice() }} optionals)</div>
            </div>
        </div>
        <div ng-repeat="direction in ['outbound', 'inbound']" class="directions">
            <div ng-repeat="segment in itinerary.legs[direction].segments track by $index" ng-controller="itineraryController" class="leg-segment">
                <div ng-if="$first" class="row header-block">
                    <div class="col-md-2 col-xs-2 text-capitalize text-center strong h-direction">{{ direction }}</div>
                    <div class="col-md-4 col-md-push-6 col-xs-10 h-buttons-col text-right">
                        <button class="btn btn-primary online-checkin">Online Check-In</button>
                        <button class="btn btn-primary export-to">Export To Calendar</button>
                    </div>
                    <div class="col-md-6 col-md-pull-4 h-from-to-col">
                        <div class="time-from"><span class="icon"><span class="capital">{{ segment.schedule.origin | airportCity }}&nbsp;</span><span class="strong">({{ segment.schedule.origin }})</span></span></div>
                        <div class="arrow-picture"></div>
                        <div class="time-to"><span class="icon"><span class="capital">{{ getDestination(itinerary.legs[direction]) | airportCity }}&nbsp;</span><span class="strong">({{ getDestination(itinerary.legs[direction]) }})</span></span></div>
                        <div class="time-duration nowrap hidden-xs"><span class="icon">{{itinerary.legs[direction].schedule.duration | duration }}</span></div>
                    </div>
                </div>
                <div class="row segment-row text-left">
                    <div class="col-md-2 col-xs-3 text-center airline-logo-container">
                        <div class="airline-logo te"><img ng-src="{{ itinerary.legs[direction].operatingAirlineLogo }}" alt="Airline logo"></div>
                        <div class="flight-code">{{ segment.airlineData.flightCode }}</div>
                    </div>
                    <div class="col-md-1 col-sm-2 col-xs-3 time-duration nowrap"><span class="icon">{{ segment.schedule.duration | duration }}</span></div>
                    <div class="col-md-6 col-sm-7 col-xs-6">
                        <div class="row bordered-row-bottom from-to-row">
                            <div class="col-md-10 col-xs-12">
                                <div class="time-from"><span class="icon">{{segment.schedule.departureDateString | dateStringFilter}}</span></div><span class="nowrap"><span class="airport-name hidden-xs">{{ segment.schedule.origin | airportName}} &nbsp;</span><span class="airport-code strong">({{ segment.schedule.origin }})</span></span>
                            </div>
                            <div class="col-md-2 nowrap hidden-sm hidden-xs"><span>Terminal &nbsp;</span><span class="strong">5</span></div>
                        </div>
                        <div class="row from-to-row">
                            <div class="col-md-10 col-xs-12">
                                <div class="time-to"><span class="icon">{{segment.schedule.arrivalDateString | dateStringFilter}}</span></div><span class="nowrap"><span class="airport-name hidden-xs">{{ segment.schedule.destination | airportName}} &nbsp;</span><span class="airport-code strong">({{ segment.schedule.destination }})</span></span>
                            </div>
                            <div class="col-md-2 nowrap hidden-sm hidden-xs"><span>Terminal &nbsp;</span><span class="strong">2</span></div>
                        </div>
                    </div>
                    <div class="col-md-1 hidden-sm hidden-xs text-center line-height-10 nowrap">{{ segment.onTime.valueHumanized }}% on time</div>
                    <div class="col-md-1 hidden-sm hidden-xs text-center line-height-10 no-padding-left">{{ itinerary.legs[direction].farePrices[0].name }}</div>
                    <div class="col-md-1 hidden-sm hidden-xs text-center line-height-10 nowrap no-padding-left">{{ segment.equipment }} &nbsp;</div>
                </div>
                <div class="row segment-row bordered">
                    <div class="col-md-2 hidden-sm hidden-xs border-part-hider"></div>
                    <div ng-if="ancillaryService.getIncludedAncillaries(segment).length" class="col-md-5 margin-top-15">
                        <div class="row optional-extras">
                            <div class="col-xs-3 nowrap">Included in price</div>
                            <div class="col-xs-6">
                                <ul class="included-ancillary center-block">
                                    <li ng-repeat="ancillary in ancillaryService.getIncludedAncillaries(segment)" class="ancillary"><img ng-src="images/css/icons/ancillary/{{ ancillary.type }}_green.png" class="ancillary-icon"></li>
                                    <li ng-if="ancillaryService.isPersonalizedAncillary(ancillary, persona) &amp;&amp; !ancillaryService.isSelectedOptionalAncillary(segment, ancillary) &amp;&amp; personalizationService.isApplicableToPersona(itinerary.legs[direction])" ng-repeat="ancillary in ancillaryService.getOptionalAncillaries(segment)" class="ancillary pos-relative"><span class="personalized-text">FREEBIE</span><img ng-src="images/css/icons/ancillary/{{ ancillary.type }}_blue.png" class="ancillary-icon"></li>
                                </ul>
                            </div>
                            <div ng-click="toggleAncillariesIncluded(segment)" class="col-xs-3 nowrap view-details"><a>View Details</a><i ng-class="{'fa-angle-double-down': section.included, 'fa-angle-double-up': !section.included}" class="fa"></i></div>
                        </div>
                    </div>
                    <div ng-if="!ancillaryService.isAllOptionalAncillariesDeselected(segment)" class="bordered-row-top hidden-md hidden-lg"></div>
                    <div ng-if="!ancillaryService.isAllOptionalAncillariesDeselected(segment)" ng-class="{ 'hidden-xs hidden-sm': !section.included}" class="col-md-5">
                        <div class="row optional-extras">
                            <div education-popup="http://itinerary/optionalExtras" class="col-xs-3 nowrap margin-top-15">Optional Extras</div>
                            <div class="col-xs-6">
                                <ul class="optional-ancillary center-block">
                                    <li ng-if="ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-repeat="ancillary in ancillaryService.getOptionalAncillaries(segment)" class="ancillary"><img ng-hide="ancillaryService.isPersonalizedAncillary(ancillary, persona) &amp;&amp; personalizationService.isApplicableToPersona(itinerary.legs[direction])" ng-src="images/css/icons/ancillary/{{ ancillary.type }}_orange.png" class="ancillary-icon">
                                        <p>{{ ancillary.price }}</p>
                                    </li>
                                </ul>
                            </div>
                            <div ng-click="toggleAncillariesOptional(segment)" class="col-xs-3 nowrap margin-top-15 view-details"><a>View Details</a><i ng-class="{'fa-angle-double-down': section.optional, 'fa-angle-double-up': !section.optional}" class="fa"></i></div>
                        </div>
                    </div>
                </div>
                <div uib-collapse="section.included" ng-model="section.included" ng-class="{ 'a-included': !section.included}" class="row ancillaries-dropdown">
                    <dl ng-repeat="ancillary in flightAncillariesIncluded" class="row">
                        <dt class="col-xs-6 col-sm-4 col-md-3 col-sm-offset-2">
                        <h3>{{ ancillary.title }}</h3>
                        <p>{{ ancillary.description }}</p>
                        </dt>
                        <dd class="col-xs-6 col-sm-4"><img ng-src="{{ ancillary.imageUrl }}"></dd>
                    </dl>
                </div>
                <div uib-collapse="section.optional" ng-model="section.optional" ng-class="{ 'a-optional': !section.optional}" class="row ancillaries-dropdown">
                    <dl ng-repeat="ancillary in flightAncillariesOptional" class="row">
                        <dt class="col-xs-6 col-sm-4 col-md-3 col-sm-offset-2">
                        <h3>{{ ancillary.title }}</h3>
                        <p>{{ ancillary.description }}</p>
                        </dt>
                        <dd class="col-xs-6 col-sm-4"><img ng-src="{{ ancillary.imageUrl }}"></dd>
                    </dl>
                </div>
                <div ng-if="itinerary.legs[direction].segments[$index+1]" class="row segment-separator">
                    <div class="hr"></div>
                    <div class="col-xs-1 col-xs-offset-2 pos-relative">
                        <button class="btn btn-primary transfer-button"><span>{{ itinerary.legs[direction].segments[1].connectionTime | duration }}</span></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="compare.html">
    <div class="container-fluid compare-page">
        <div class="row text-center row-eq-height comparison-matrix-row">
            <div education-popup="http://compare/comparisonMatrix" class="col-md-3 comparison-matrix background-green"><span>Comparison Matrix</span></div>
            <div class="col-md-6">
                <div class="flight-direction"><span class="time-from"><span class="icon"><span class="strong-500">{{ origin | airportCity }}</span><span class="strong-700">&nbsp;({{ origin }})</span></span></span><span class="arrow-picture"></span><span class="time-to"><span class="icon"><span class="strong-500">{{ destination | airportCity }}</span><span class="strong-700">&nbsp;({{ destination }})</span></span></span></div>
            </div>
            <div class="col-md-3"><a href="/#search/noReset" class="back-to-quotes"><span>Return to Quotes</span><i class="fa fa-chevron-right"></i></a></div>
        </div>
        <div class="main-table">
            <table class="table table-responsive">
                <thead>
                <tr class="text-center">
                    <th>Airlines</th>
                    <th>Number of Stops</th>
                    <th ng-class="{ 'bg-white': ancillaryToDisplay &amp;&amp; ancillaryToDisplay === ancillary.type }" ng-repeat="ancillary in uniqueAncillariesFromFlights" ng-click="selectAncillariesToDisplay(ancillary.type)" class="clickable"><img ng-if="!ancillaryToDisplay || ancillaryToDisplay !== ancillary.type" ng-src="images/css/icons/ancillary/{{ ancillary.type }}_white.png"><img ng-if="ancillaryToDisplay &amp;&amp; ancillaryToDisplay === ancillary.type" ng-src="images/css/icons/ancillary/{{ ancillary.type }}_green.png">
                        <div ng-class="{ 'green': ancillaryToDisplay &amp;&amp; ancillaryToDisplay === ancillary.type }" class="ancillary-name">{{ ancillary | ancillaryName }}</div>
                    </th>
                    <th>Fare description</th>
                    <th>Total</th>
                </tr>
                </thead>
                <tbody ng-repeat="leg in flights track by $index" ng-class-even="'even-leg'">
                <tr ng-repeat="segment in leg.segments" ng-class-even="'even-segment'" class="text-center">
                    <td ng-if="!isTheSameAirline(leg)"><img ng-src="images/app/logos/{{ segment.airlineData.carryingAirlineCode.toLowerCase() }}.jpg"></td>
                    <td ng-if="isTheSameAirline(leg) &amp;&amp; $first" rowspan="2"><img ng-src="{{ leg.operatingAirlineLogo }}"></td>
                    <td ng-if="$first" rowspan="2">{{ leg.stopOvers }}</td>
                    <td ng-repeat="ancillary in segment.ancillaries">
                        <div ng-if="ancillary.fake"><span class="ancillary-span-x">X</span></div>
                        <div ng-if="ancillary.price === 0">
                            <label>
                                <input type="checkbox" readonly checked disabled class="hidden"><span class="checkbox"></span>
                            </label>
                        </div>
                        <div ng-if="ancillaryService.isPersonalizedAncillary(ancillary, persona) &amp;&amp; personalizationService.isEnabled()">
                            <div class="ancillary-details"><img ng-if="!ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/{{ ancillary.type }}_blue.png"></div>
                        </div>
                        <div ng-if="ancillary.price &gt; 0" ng-hide="ancillaryService.isPersonalizedAncillary(ancillary, persona) &amp;&amp; personalizationService.isEnabled()" ng-controller="ancillaryController" class="optional-ancillary-compare">
                            <label>
                                <input type="checkbox" ng-model="optional.selected" checked="isSelectedOptional" class="hidden"><span class="checkbox"></span>
                            </label>
                            <div class="ancillary-details"><img ng-if="!ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/{{ ancillary.type }}.png"><img ng-if="ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-src="images/css/icons/ancillary/{{ ancillary.type }}_orange.png"><span><strong>{{ ancillary.price }}</strong></span></div>
                        </div>
                    </td>
                    <td ng-if="$first" rowspan="2" class="fare-description">{{ leg.farePrices[$index].name }}</td>
                    <td ng-if="leg.segments.length == 1" ng-class="{ 'just-for-you-compare': personalizationService.isApplicableToPersona(leg) }" class="price-cell">
                        <dt ng-if="personalizationService.isApplicableToPersona(leg)" class="just-for-you-inscription">
                        <h4>Just for you</h4>
                        </dt>
                        <p><span class="currency"></span><span class="price">{{ flightPrice(leg) + farePriceService.getSelectedAncillariesPrice(leg)}}</span></p>
                        <div ng-if="farePriceService.getSelectedAncillariesPrice(leg) &gt; 0" class="optionals text-center"><span>Includes <br /> {{ farePriceService.getSelectedAncillariesPrice(leg) }} optionals</span></div>
                        <button ng-click="bookFlight(leg)" class="btn btn-primary select-btn">Select</button>
                        <div ng-if="personalizationService.isApplicableToPersona(leg) &amp;&amp; getFreebiePrice(leg) &gt; 0" class="personalized text-center"><span>EUR {{ getFreebiePrice(leg) }} EXTRA BUNDLED FREE</span></div>
                    </td>
                    <td ng-if="leg.segments.length &gt; 1 &amp;&amp; $index === 0" rowspan="2" ng-class="{ 'just-for-you-compare': personalizationService.isApplicableToPersona(leg) }" class="price-cell">
                        <dt ng-if="personalizationService.isApplicableToPersona(leg)" class="just-for-you-inscription">
                        <h4>Just for you</h4>
                        </dt>
                        <p><span class="currency"></span><span class="price">{{ flightPrice(leg) + farePriceService.getSelectedAncillariesPrice(leg)}}</span></p>
                        <div ng-if="farePriceService.getSelectedAncillariesPrice(leg) &gt; 0" class="optionals text-center"><span>Includes <br /> {{ farePriceService.getSelectedAncillariesPrice(leg) }} optionals</span></div>
                        <button ng-click="bookFlight(leg)" class="btn btn-primary select-btn">Select</button>
                        <div ng-if="personalizationService.isApplicableToPersona(leg) &amp;&amp; getFreebiePrice(leg) &gt; 0" class="personalized text-center"><span>EUR {{ getFreebiePrice(leg) }} EXTRA BUNDLED FREE</span></div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="legenda-table">
            <table class="table table-responsive">
                <tr>
                    <td>
                        <label>
                            <input type="checkbox" readonly checked disabled class="hidden"><span class="checkbox"></span>
                        </label><span class="legenda-text">Included in Price</span>
                    </td>
                    <td>
                        <label>
                            <input type="checkbox" class="hidden"><span class="checkbox"></span>
                        </label><span class="legenda-text">Unselected Optional Extras</span>
                    </td>
                    <td><span class="legenda-selected-ancillary"></span><span class="legenda-text">Selected Optional Extras</span></td>
                    <td><span class="legenda-freebie-ancillary"></span><span class="legenda-text">Freebie ancillary</span></td>
                    <td><span class="ancillary-span-x legenda-x-span">X</span><span class="legenda-text">Unavailable</span></td>
                </tr>
            </table>
        </div>
        <div ng-repeat="leg in flights" class="row ancillaries-list">
            <div class="text-center"><img ng-src="{{ leg.operatingAirlineLogo }}" height="65px"></div>
            <div ng-show="!ancillaryToDisplay || ancillaryToDisplay === ancillary.type" ng-repeat="ancillary in leg.ancillaries" ng-class="{'every-fourth-box': $index % 3 == 0}" class="col-sm-4 ancillary-box-list">
                <div class="ancillary-title-list">{{ ancillary.title }}</div>
                <div class="row ancillary-block">
                    <div class="col-xs-7"><img ng-src="{{ ancillary.imageUrl }}" width="100%"></div>
                    <div class="col-xs-5 ancillary-description-list">{{ ancillary.description }}</div>
                </div>
            </div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="education.html">
    <div class="educational-popover-template">
        <h3 ng-if="education.title" class="text-center">{{ education.title }}</h3>
        <p ng-if="education.text">{{ education.text }}</p><img ng-if="education.image" ng-src="{{ education.image }}">
        <ul ng-if="education.options" class="educational">
            <li ng-repeat="option in education.options">{{ option }}</li>
        </ul>
        <p ng-if="education.footer">{{ education.footer }}</p>
    </div>
</script>
<script type="text/ng-template" id="ancillary-popup.html">
    <div class="ancillary-box">
        <div ng-click="hidePopover()" class="ancillary-box-close">
            <div class="ancillary-box-cross">x</div>
        </div>
        <div ng-if="ancillary.galleryImages.length" class="ancillary-title int-top-rounded">
            <h2 ng-if="ancillary.isCompanyPrivileged">Company Privilege -</h2>
            <h3>{{ancillary.title}}</h3>
        </div>
        <div ng-if="ancillary.galleryImages.length" ng-controller="galleryController" class="slider">
            <div class="slide-croper"><img ng-repeat="image in ancillary.galleryImages" ng-swipe-right="showPrev()" ng-swipe-left="showNext()" ng-show="isActive($index)" ng-src="{{ image.url }}" class="slide ancillary-image"></div><a ng-click="showPrev()" class="arrow prev"></a><a ng-click="showNext()" class="arrow next"></a>
            <ul class="nav">
                <li ng-repeat="image in ancillary.galleryImages" ng-class="{'active':isActive($index)}"><img ng-src="{{ image.url }}" ng-click="showPhoto($index);"></li>
            </ul>
        </div>
        <div ng-if="policyService.enableImage('ancillary') &amp;&amp; !ancillary.galleryImages.length" class="image-croper"><img ng-src="{{ancillary.imageUrl}}" class="ancillary-image int-top-rounded picture"></div>
        <div ng-if="!ancillary.galleryImages.length" class="ancillary-title">
            <h2 ng-if="ancillary.isCompanyPrivileged">Company Privilege -</h2>
            <h3>{{ancillary.title}}</h3>
        </div>
        <p class="ancillary-description">{{ancillary.description}}</p>
        <div ng-if="ancillaryService.isOptionalAncillary(ancillary)" ng-hide="ancillaryService.isPersonalizedAncillary(ancillary, persona) &amp;&amp; personalizationService.isApplicableToPersona(leg)" class="ancillary-price-and-button clearfix ancillary-optional"><b><span class="ancillary-popover-price"><span> {{ ancillary.price }}</span></span></b>
            <div ng-if="policyService.enableOptionalAncillaries(ancillary)">
                <button ng-cloak ng-show="!ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-click="hidePopover(); ancillaryService.selectOptionalAncillary(segment, ancillary)" class="btn ancillary-popover-btn pull-right">SELECT</button>
                <button ng-cloak ng-show="ancillaryService.isSelectedOptionalAncillary(segment, ancillary)" ng-click="hidePopover(); ancillaryService.deselectOptionalAncillary(segment, ancillary)" class="btn ancillary-popover-btn pull-right">UNSELECT</button>
            </div>
            <div ng-if="!policyService.enableOptionalAncillaries(ancillary)" class="text-center">
                <button class="btn policy-not-allowed">OUT OF POLICY</button>
            </div>
        </div>
    </div>
</script>
<!--Filters bar templates-->
<script type="text/ng-template" id="sort-by-filter.html">
    <div class="triangle hidden-xs"></div>
    <div class="green-menu">
        <div class="green-menu-header">
            <ul ng-repeat="sortCriteria in flightsSortCriteria track by $index" ng-click="sortBy(sortCriteria.value)" class="filter-list-green selection-denied sort-by-ul">
                <li>{{ sortCriteria.label }}</li>
                <hr ng-if="pricesList.length-1 !== $index">
            </ul>
        </div>
    </div>
</script>
<script type="text/ng-template" id="flight-details.html">
    <div class="triangle hidden-xs"></div>
    <div ng-controller="filtersController" class="green-menu">
        <div class="green-menu-header"><span class="text-bold">DEPARTURE TIME</span></div>
        <div ng-init="outbound.from[direction] = 0; outbound.to[direction] = 23" class="noUI-slider-container">
            <div slider ng-from="outbound.from[direction]" ng-to="outbound.to[direction]" start="0" end="23" step="1"></div>
            <div class="noUI-slider-values">
                <div style="left: 0%" class="min"><span ng-bind="outbound.from[direction]"></span><span>:00</span></div>
                <div style="left: 90%" class="max"><span ng-bind="outbound.to[direction]"></span><span>:00</span></div>
            </div>
        </div>
        <hr>
        <div class="green-menu-header"><span class="text-bold">ARRIVAL TIME</span></div>
        <div ng-init="inbound.from[direction] = 0; inbound.to[direction] = 23" class="noUI-slider-container">
            <div slider ng-from="inbound.from[direction]" ng-to="inbound.to[direction]" start="0" end="23" step="1"></div>
            <div class="noUI-slider-values">
                <div style="left: 0%" class="min"><span ng-bind="inbound.from[direction]"></span><span>:00</span></div>
                <div style="left: 90%" class="max"><span ng-bind="inbound.to[direction]"></span><span>:00</span></div>
            </div>
        </div>
        <hr>
        <div class="green-menu-header"><span class="text-bold">DURATION</span></div>
        <div ng-init="duration.to = 14; duration.max[direction] = duration.to" class="noUI-slider-container">
            <div slider ng-model="duration.max[direction]" start="0" end="{{duration.to}}" step="1" class="single-handle"></div>
            <div class="noUI-slider-values">
                <div style="left: 0%" class="min"><span>0h</span></div>
                <div style="left: 95%" class="max"><span ng-bind="duration.to"></span><span>h</span></div>
            </div>
        </div>
        <hr>
        <div class="green-menu-header"><span class="text-bold">STOPS</span></div>
        <ul class="row">
            <li class="col-sm-3">
                <label class="stop-type-label">ANY
                    <input type="radio" ng-model="stop.type[direction]" value="Any"><span class="pull-left"></span>
                </label>
            </li>
            <li class="col-sm-3">
                <label class="stop-type-label">DIRECT
                    <input type="radio" ng-model="stop.type[direction]" value="Direct"><span class="pull-left"></span>
                </label>
            </li>
            <li class="col-sm-3">
                <label class="stop-type-label">1 STOP
                    <input type="radio" ng-model="stop.type[direction]" value="1 stop"><span class="pull-left"></span>
                </label>
            </li>
            <li class="col-sm-3">
                <label class="stop-type-label">2+ STOPS
                    <input type="radio" ng-model="stop.type[direction]" value="2 stop"><span class="pull-left"></span>
                </label>
            </li>
        </ul>
    </div>
</script>
<script type="text/ng-template" id="ancillary-services.html">
    <div class="triangle"></div>
    <div ng-controller="filtersController" class="green-menu">
        <div class="green-menu-header"><span class="text-bold">AIRPORT</span></div>
        <ul class="filter-list-green selection-denied">
            <li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isAirportAncillary(ancillary)">
                <label>{{ancillary | ancillaryName}}
                    <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden"><span class="checkbox"></span>
                </label>
            </li>
        </ul>
        <hr class="col-md-10">
        <div class="green-menu-header"><span class="text-bold">IN FLIGHT</span></div>
        <ul class="filter-list-green selection-denied">
            <li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isInFlightAncillary(ancillary)">
                <label>{{ancillary | ancillaryName}}
                    <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden"><span class="checkbox"></span>
                </label>
            </li>
        </ul>
        <hr class="col-md-10">
        <div class="green-menu-header"><span class="text-bold">BAGGAGE</span></div>
        <ul class="filter-list-green selection-denied">
            <li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isBagAncillary(ancillary)">
                <label>{{ancillary | ancillaryName}}
                    <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden"><span class="checkbox"></span>
                </label>
            </li>
        </ul>
    </div>
</script>
<script type="text/ng-template" id="flexibility.html">
    <div class="triangle"></div>
    <div ng-controller="filtersController" class="green-menu">
        <div class="green-menu-header">
            <ul ng-repeat="price in pricesList track by $index" class="filter-list-green selection-denied">
                <li>
                    <label class="text-bold">{{ price.name }}
                        <input type="checkbox" ng-model="price.selected" ng-change="isSelectedPriceType(price)" class="hidden"><span class="checkbox"></span>
                    </label>
                </li>
                <hr ng-if="pricesList.length-1 !== $index">
            </ul>
        </div>
    </div>
</script>
<script type="text/ng-template" id="form-filters.html">
    <div class="row">
        <div ng-repeat="direction in ['outbound', 'inbound']" class="col-sm-6 form-filters no-side-padding">
            <div class="form-filters-direction text-center text-capitalize">{{ direction }}</div>
            <div ng-controller="advancedFiltersController" class="row">
                <div class="col-xs-4">
                    <div class="green-menu-header"><span class="text-bold">AIRPORT</span></div>
                    <ul class="filter-list-green form-filters-list selection-denied">
                        <li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isAirportAncillary(ancillary)">
                            <label>{{ancillary | ancillaryName}}
                                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden"><span class="checkbox"></span>
                            </label>
                        </li>
                    </ul>
                </div>
                <div class="col-xs-4">
                    <div class="green-menu-header"><span class="text-bold">IN FLIGHT</span></div>
                    <ul class="filter-list-green form-filters-list selection-denied">
                        <li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isInFlightAncillary(ancillary)">
                            <label>{{ancillary | ancillaryName}}
                                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden"><span class="checkbox"></span>
                            </label>
                        </li>
                    </ul>
                </div>
                <div class="col-xs-4">
                    <div class="green-menu-header"><span class="text-bold">BAGGAGE</span></div>
                    <ul class="filter-list-green form-filters-list selection-denied">
                        <li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isBagAncillary(ancillary)">
                            <label>{{ancillary | ancillaryName}}
                                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden"><span class="checkbox"></span>
                            </label>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="out-of-policy.html">
    <div class="text-center">
        <h4>This user does not have rights to access Personalized search content</h4>
        <button style="margin-bottom:10px" class="btn policy-not-allowed">OUT OF POLICY</button>
    </div>
</script>

<div id="nspopover-1" class="ns-popover-bottom-placement ns-popover-right-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Personalized search</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope">By switching on Personalized Search, a user can choose to be identified by airlines. In this case airlines will be able to:</p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Return either pre-negociated or on the fly packages and tailored upgrade options.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Return deals as per the traveller preference and status, taking into account frequent flyer details, preferred payment mechanisms, seat preferences and preferred ancillaries.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer --><p ng-if="education.footer" class="ng-binding ng-scope">Travel managers (admins) can control the level of personalization allowed and/or choose to switch off this feature and opt for purely anonymous search. Corporate rates can get returned regardless of the mode.</p><!-- end ngIf: education.footer -->
    </div>
</div><div id="nspopover-2" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none; top: 155px; left: 16px;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Compare alternatives</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope"> </p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Select two or more options per leg for comparison and then click the filter here to allow detailed comparison.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">A comparison matrix then enables one to fully compare these options across all aspects of interest.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-3" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-filters-green-bar-theme flight-details-filter ng-scope" style="position: absolute; display: none;">
    <div class="triangle hidden-xs"></div>
    <div ng-controller="filtersController" class="green-menu ng-scope">
        <div class="green-menu-header"><span class="text-bold">DEPARTURE TIME</span></div>
        <div ng-init="outbound.from[direction] = 0; outbound.to[direction] = 23" class="noUI-slider-container">
            <div slider="" ng-from="outbound.from[direction]" ng-to="outbound.to[direction]" start="0" end="23" step="1" class="ng-isolate-scope noUi-target noUi-ltr noUi-horizontal noUi-background"><div class="noUi-base"><div class="noUi-origin noUi-connect" data-style="left" style="left: 0%;"><div class="noUi-handle noUi-handle-lower"></div></div><div class="noUi-origin noUi-background" data-style="left" style="left: 100%;"><div class="noUi-handle noUi-handle-upper"></div></div></div></div>
            <div class="noUI-slider-values">
                <div style="left: 0%" class="min"><span ng-bind="outbound.from[direction]" class="ng-binding">0</span><span>:00</span></div>
                <div style="left: 90%" class="max"><span ng-bind="outbound.to[direction]" class="ng-binding">23</span><span>:00</span></div>
            </div>
        </div>
        <hr>
        <div class="green-menu-header"><span class="text-bold">ARRIVAL TIME</span></div>
        <div ng-init="inbound.from[direction] = 0; inbound.to[direction] = 23" class="noUI-slider-container">
            <div slider="" ng-from="inbound.from[direction]" ng-to="inbound.to[direction]" start="0" end="23" step="1" class="ng-isolate-scope noUi-target noUi-ltr noUi-horizontal noUi-background"><div class="noUi-base"><div class="noUi-origin noUi-connect" data-style="left" style="left: 0%;"><div class="noUi-handle noUi-handle-lower"></div></div><div class="noUi-origin noUi-background" data-style="left" style="left: 100%;"><div class="noUi-handle noUi-handle-upper"></div></div></div></div>
            <div class="noUI-slider-values">
                <div style="left: 0%" class="min"><span ng-bind="inbound.from[direction]" class="ng-binding">0</span><span>:00</span></div>
                <div style="left: 90%" class="max"><span ng-bind="inbound.to[direction]" class="ng-binding">23</span><span>:00</span></div>
            </div>
        </div>
        <hr>
        <div class="green-menu-header"><span class="text-bold">DURATION</span></div>
        <div ng-init="duration.to = 14; duration.max[direction] = duration.to" class="noUI-slider-container">
            <div slider="" ng-model="duration.max[direction]" start="0" end="14" step="1" class="single-handle ng-pristine ng-untouched ng-valid ng-isolate-scope noUi-target noUi-ltr noUi-horizontal noUi-background"><div class="noUi-base"><div class="noUi-origin noUi-stacking" data-style="left" style="left: 100%;"><div class="noUi-handle noUi-handle-lower"></div></div></div></div>
            <div class="noUI-slider-values">
                <div style="left: 0%" class="min"><span>0h</span></div>
                <div style="left: 95%" class="max"><span ng-bind="duration.to" class="ng-binding">14</span><span>h</span></div>
            </div>
        </div>
        <hr>
        <div class="green-menu-header"><span class="text-bold">STOPS</span></div>
        <ul class="row">
            <li class="col-sm-3">
                <label class="stop-type-label">ANY
                    <input type="radio" ng-model="stop.type[direction]" value="Any" class="ng-pristine ng-untouched ng-valid" name="191"><span class="pull-left"></span>
                </label>
            </li>
            <li class="col-sm-3">
                <label class="stop-type-label">DIRECT
                    <input type="radio" ng-model="stop.type[direction]" value="Direct" class="ng-pristine ng-untouched ng-valid" name="192"><span class="pull-left"></span>
                </label>
            </li>
            <li class="col-sm-3">
                <label class="stop-type-label">1 STOP
                    <input type="radio" ng-model="stop.type[direction]" value="1 stop" class="ng-pristine ng-untouched ng-valid" name="193"><span class="pull-left"></span>
                </label>
            </li>
            <li class="col-sm-3">
                <label class="stop-type-label">2+ STOPS
                    <input type="radio" ng-model="stop.type[direction]" value="2 stop" class="ng-pristine ng-untouched ng-valid" name="194"><span class="pull-left"></span>
                </label>
            </li>
        </ul>
    </div>
</div><div id="nspopover-4" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-filters-green-bar-theme ng-scope" style="position: absolute; display: none;">
    <div class="triangle"></div>
    <div ng-controller="filtersController" class="green-menu ng-scope">
        <div class="green-menu-header"><span class="text-bold">AIRPORT</span></div>
        <ul class="filter-list-green selection-denied">
            <!-- ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isAirportAncillary(ancillary)" class="ng-scope">
            <label class="ng-binding">Fast track
                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
            </label>
        </li><!-- end ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isAirportAncillary(ancillary)" class="ng-scope">
            <label class="ng-binding">Lounge
                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
            </label>
        </li><!-- end ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isAirportAncillary(ancillary)" class="ng-scope">
            <label class="ng-binding">Priority boarding
                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
            </label>
        </li><!-- end ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index -->
        </ul>
        <hr class="col-md-10">
        <div class="green-menu-header"><span class="text-bold">IN FLIGHT</span></div>
        <ul class="filter-list-green selection-denied">
            <!-- ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isInFlightAncillary(ancillary)" class="ng-scope">
            <label class="ng-binding">Entertainment
                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
            </label>
        </li><!-- end ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isInFlightAncillary(ancillary)" class="ng-scope">
            <label class="ng-binding">Economy comfort
                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
            </label>
        </li><!-- end ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isInFlightAncillary(ancillary)" class="ng-scope">
            <label class="ng-binding">Meal
                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
            </label>
        </li><!-- end ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isInFlightAncillary(ancillary)" class="ng-scope">
            <label class="ng-binding">Wifi
                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
            </label>
        </li><!-- end ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index -->
        </ul>
        <hr class="col-md-10">
        <div class="green-menu-header"><span class="text-bold">BAGGAGE</span></div>
        <ul class="filter-list-green selection-denied">
            <!-- ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isBagAncillary(ancillary)" class="ng-scope">
            <label class="ng-binding">First bag
                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
            </label>
        </li><!-- end ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isBagAncillary(ancillary)" class="ng-scope">
            <label class="ng-binding">Second bag
                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
            </label>
        </li><!-- end ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isBagAncillary(ancillary)" class="ng-scope">
            <label class="ng-binding">Third bag
                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
            </label>
        </li><!-- end ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index -->
        </ul>
    </div>
</div><div id="nspopover-5" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Rich content</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope">Users have access to rich information about any available flight. This enables the following:</p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">A like-for-like comparison of alternatives through clear visibility of product features and the ability to filter options by desired ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Increased productivity with easy fare and product comparison.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">An improved shopping experience, since NDC enables a range of media types to be returned (images, descriptions and even video).</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Easier access to new producs (within policy) as they become available from the airline.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The bundling and creation of unique products by suppliers (e.g. airline plus Netflix or Spotify etc).</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer --><p ng-if="education.footer" class="ng-binding ng-scope">Travel managers (admins) can control the level of access to this rich content in the Admin section.</p><!-- end ngIf: education.footer -->
    </div>
</div><div id="nspopover-6" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-filters-green-bar-theme ng-scope" style="position: absolute; display: none;">
    <div class="triangle"></div>
    <div ng-controller="filtersController" class="green-menu ng-scope">
        <div class="green-menu-header">
            <!-- ngRepeat: price in pricesList track by $index --><ul ng-repeat="price in pricesList track by $index" class="filter-list-green selection-denied ng-scope">
            <li>
                <label class="text-bold ng-binding">Non-Flex
                    <input type="checkbox" ng-model="price.selected" ng-change="isSelectedPriceType(price)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                </label>
            </li>
            <!-- ngIf: pricesList.length-1 !== $index --><hr ng-if="pricesList.length-1 !== $index" class="ng-scope"><!-- end ngIf: pricesList.length-1 !== $index -->
        </ul><!-- end ngRepeat: price in pricesList track by $index --><ul ng-repeat="price in pricesList track by $index" class="filter-list-green selection-denied ng-scope">
            <li>
                <label class="text-bold ng-binding">Semi-Flex
                    <input type="checkbox" ng-model="price.selected" ng-change="isSelectedPriceType(price)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                </label>
            </li>
            <!-- ngIf: pricesList.length-1 !== $index --><hr ng-if="pricesList.length-1 !== $index" class="ng-scope"><!-- end ngIf: pricesList.length-1 !== $index -->
        </ul><!-- end ngRepeat: price in pricesList track by $index --><ul ng-repeat="price in pricesList track by $index" class="filter-list-green selection-denied ng-scope">
            <li>
                <label class="text-bold ng-binding">Full-Flex
                    <input type="checkbox" ng-model="price.selected" ng-change="isSelectedPriceType(price)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                </label>
            </li>
            <!-- ngIf: pricesList.length-1 !== $index --><hr ng-if="pricesList.length-1 !== $index" class="ng-scope"><!-- end ngIf: pricesList.length-1 !== $index -->
        </ul><!-- end ngRepeat: price in pricesList track by $index --><ul ng-repeat="price in pricesList track by $index" class="filter-list-green selection-denied ng-scope">
            <li>
                <label class="text-bold ng-binding">Changeable
                    <input type="checkbox" ng-model="price.selected" ng-change="isSelectedPriceType(price)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                </label>
            </li>
            <!-- ngIf: pricesList.length-1 !== $index --><hr ng-if="pricesList.length-1 !== $index" class="ng-scope"><!-- end ngIf: pricesList.length-1 !== $index -->
        </ul><!-- end ngRepeat: price in pricesList track by $index --><ul ng-repeat="price in pricesList track by $index" class="filter-list-green selection-denied ng-scope">
            <li>
                <label class="text-bold ng-binding">Fully-Flex
                    <input type="checkbox" ng-model="price.selected" ng-change="isSelectedPriceType(price)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                </label>
            </li>
            <!-- ngIf: pricesList.length-1 !== $index --><hr ng-if="pricesList.length-1 !== $index" class="ng-scope"><!-- end ngIf: pricesList.length-1 !== $index -->
        </ul><!-- end ngRepeat: price in pricesList track by $index --><ul ng-repeat="price in pricesList track by $index" class="filter-list-green selection-denied ng-scope">
            <li>
                <label class="text-bold ng-binding">Econ Flex
                    <input type="checkbox" ng-model="price.selected" ng-change="isSelectedPriceType(price)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                </label>
            </li>
            <!-- ngIf: pricesList.length-1 !== $index --><hr ng-if="pricesList.length-1 !== $index" class="ng-scope"><!-- end ngIf: pricesList.length-1 !== $index -->
        </ul><!-- end ngRepeat: price in pricesList track by $index --><ul ng-repeat="price in pricesList track by $index" class="filter-list-green selection-denied ng-scope">
            <li>
                <label class="text-bold ng-binding">Refundable
                    <input type="checkbox" ng-model="price.selected" ng-change="isSelectedPriceType(price)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                </label>
            </li>
            <!-- ngIf: pricesList.length-1 !== $index -->
        </ul><!-- end ngRepeat: price in pricesList track by $index -->
        </div>
    </div>
</div><div id="nspopover-7" class="ns-popover-bottom-placement ns-popover-right-align ns-popover-filters-green-bar-theme ng-scope" style="position: absolute; display: none;">
    <div class="triangle hidden-xs"></div>
    <div class="green-menu">
        <div class="green-menu-header">
            <!-- ngRepeat: sortCriteria in flightsSortCriteria track by $index --><ul ng-repeat="sortCriteria in flightsSortCriteria track by $index" ng-click="sortBy(sortCriteria.value)" class="filter-list-green selection-denied sort-by-ul ng-scope">
            <li class="ng-binding">Price</li>
            <!-- ngIf: pricesList.length-1 !== $index --><hr ng-if="pricesList.length-1 !== $index" class="ng-scope"><!-- end ngIf: pricesList.length-1 !== $index -->
        </ul><!-- end ngRepeat: sortCriteria in flightsSortCriteria track by $index --><ul ng-repeat="sortCriteria in flightsSortCriteria track by $index" ng-click="sortBy(sortCriteria.value)" class="filter-list-green selection-denied sort-by-ul ng-scope">
            <li class="ng-binding">Departure</li>
            <!-- ngIf: pricesList.length-1 !== $index --><hr ng-if="pricesList.length-1 !== $index" class="ng-scope"><!-- end ngIf: pricesList.length-1 !== $index -->
        </ul><!-- end ngRepeat: sortCriteria in flightsSortCriteria track by $index --><ul ng-repeat="sortCriteria in flightsSortCriteria track by $index" ng-click="sortBy(sortCriteria.value)" class="filter-list-green selection-denied sort-by-ul ng-scope">
            <li class="ng-binding">Arrival</li>
            <!-- ngIf: pricesList.length-1 !== $index --><hr ng-if="pricesList.length-1 !== $index" class="ng-scope"><!-- end ngIf: pricesList.length-1 !== $index -->
        </ul><!-- end ngRepeat: sortCriteria in flightsSortCriteria track by $index --><ul ng-repeat="sortCriteria in flightsSortCriteria track by $index" ng-click="sortBy(sortCriteria.value)" class="filter-list-green selection-denied sort-by-ul ng-scope">
            <li class="ng-binding">Duration</li>
            <!-- ngIf: pricesList.length-1 !== $index --><hr ng-if="pricesList.length-1 !== $index" class="ng-scope"><!-- end ngIf: pricesList.length-1 !== $index -->
        </ul><!-- end ngRepeat: sortCriteria in flightsSortCriteria track by $index --><ul ng-repeat="sortCriteria in flightsSortCriteria track by $index" ng-click="sortBy(sortCriteria.value)" class="filter-list-green selection-denied sort-by-ul ng-scope">
            <li class="ng-binding">Personal</li>
            <!-- ngIf: pricesList.length-1 !== $index --><hr ng-if="pricesList.length-1 !== $index" class="ng-scope"><!-- end ngIf: pricesList.length-1 !== $index -->
        </ul><!-- end ngRepeat: sortCriteria in flightsSortCriteria track by $index --><ul ng-repeat="sortCriteria in flightsSortCriteria track by $index" ng-click="sortBy(sortCriteria.value)" class="filter-list-green selection-denied sort-by-ul ng-scope">
            <li class="ng-binding">Emission</li>
            <!-- ngIf: pricesList.length-1 !== $index --><hr ng-if="pricesList.length-1 !== $index" class="ng-scope"><!-- end ngIf: pricesList.length-1 !== $index -->
        </ul><!-- end ngRepeat: sortCriteria in flightsSortCriteria track by $index -->
        </div>
    </div>
</div><div id="nspopover-8" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Compare alternatives</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope"> </p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Select two or more options per leg for comparison and then click the filter here to allow detailed comparison.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">A comparison matrix then enables one to fully compare these options across all aspects of interest.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-9" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-filters-green-bar-theme flight-details-filter ng-scope" style="position: absolute; display: none;">
    <div class="triangle hidden-xs"></div>
    <div ng-controller="filtersController" class="green-menu ng-scope">
        <div class="green-menu-header"><span class="text-bold">DEPARTURE TIME</span></div>
        <div ng-init="outbound.from[direction] = 0; outbound.to[direction] = 23" class="noUI-slider-container">
            <div slider="" ng-from="outbound.from[direction]" ng-to="outbound.to[direction]" start="0" end="23" step="1" class="ng-isolate-scope noUi-target noUi-ltr noUi-horizontal noUi-background"><div class="noUi-base"><div class="noUi-origin noUi-connect" data-style="left" style="left: 0%;"><div class="noUi-handle noUi-handle-lower"></div></div><div class="noUi-origin noUi-background" data-style="left" style="left: 100%;"><div class="noUi-handle noUi-handle-upper"></div></div></div></div>
            <div class="noUI-slider-values">
                <div style="left: 0%" class="min"><span ng-bind="outbound.from[direction]" class="ng-binding">0</span><span>:00</span></div>
                <div style="left: 90%" class="max"><span ng-bind="outbound.to[direction]" class="ng-binding">23</span><span>:00</span></div>
            </div>
        </div>
        <hr>
        <div class="green-menu-header"><span class="text-bold">ARRIVAL TIME</span></div>
        <div ng-init="inbound.from[direction] = 0; inbound.to[direction] = 23" class="noUI-slider-container">
            <div slider="" ng-from="inbound.from[direction]" ng-to="inbound.to[direction]" start="0" end="23" step="1" class="ng-isolate-scope noUi-target noUi-ltr noUi-horizontal noUi-background"><div class="noUi-base"><div class="noUi-origin noUi-connect" data-style="left" style="left: 0%;"><div class="noUi-handle noUi-handle-lower"></div></div><div class="noUi-origin noUi-background" data-style="left" style="left: 100%;"><div class="noUi-handle noUi-handle-upper"></div></div></div></div>
            <div class="noUI-slider-values">
                <div style="left: 0%" class="min"><span ng-bind="inbound.from[direction]" class="ng-binding">0</span><span>:00</span></div>
                <div style="left: 90%" class="max"><span ng-bind="inbound.to[direction]" class="ng-binding">23</span><span>:00</span></div>
            </div>
        </div>
        <hr>
        <div class="green-menu-header"><span class="text-bold">DURATION</span></div>
        <div ng-init="duration.to = 14; duration.max[direction] = duration.to" class="noUI-slider-container">
            <div slider="" ng-model="duration.max[direction]" start="0" end="14" step="1" class="single-handle ng-pristine ng-untouched ng-valid ng-isolate-scope noUi-target noUi-ltr noUi-horizontal noUi-background"><div class="noUi-base"><div class="noUi-origin noUi-stacking" data-style="left" style="left: 100%;"><div class="noUi-handle noUi-handle-lower"></div></div></div></div>
            <div class="noUI-slider-values">
                <div style="left: 0%" class="min"><span>0h</span></div>
                <div style="left: 95%" class="max"><span ng-bind="duration.to" class="ng-binding">14</span><span>h</span></div>
            </div>
        </div>
        <hr>
        <div class="green-menu-header"><span class="text-bold">STOPS</span></div>
        <ul class="row">
            <li class="col-sm-3">
                <label class="stop-type-label">ANY
                    <input type="radio" ng-model="stop.type[direction]" value="Any" class="ng-pristine ng-untouched ng-valid" name="201"><span class="pull-left"></span>
                </label>
            </li>
            <li class="col-sm-3">
                <label class="stop-type-label">DIRECT
                    <input type="radio" ng-model="stop.type[direction]" value="Direct" class="ng-pristine ng-untouched ng-valid" name="202"><span class="pull-left"></span>
                </label>
            </li>
            <li class="col-sm-3">
                <label class="stop-type-label">1 STOP
                    <input type="radio" ng-model="stop.type[direction]" value="1 stop" class="ng-pristine ng-untouched ng-valid" name="203"><span class="pull-left"></span>
                </label>
            </li>
            <li class="col-sm-3">
                <label class="stop-type-label">2+ STOPS
                    <input type="radio" ng-model="stop.type[direction]" value="2 stop" class="ng-pristine ng-untouched ng-valid" name="204"><span class="pull-left"></span>
                </label>
            </li>
        </ul>
    </div>
</div><div id="nspopover-10" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-filters-green-bar-theme ng-scope" style="position: absolute; display: none;">
    <div class="triangle"></div>
    <div ng-controller="filtersController" class="green-menu ng-scope">
        <div class="green-menu-header"><span class="text-bold">AIRPORT</span></div>
        <ul class="filter-list-green selection-denied">
            <!-- ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isAirportAncillary(ancillary)" class="ng-scope">
            <label class="ng-binding">Fast track
                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
            </label>
        </li><!-- end ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isAirportAncillary(ancillary)" class="ng-scope">
            <label class="ng-binding">Lounge
                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
            </label>
        </li><!-- end ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isAirportAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isAirportAncillary(ancillary)" class="ng-scope">
            <label class="ng-binding">Priority boarding
                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
            </label>
        </li><!-- end ngIf: ancillaryService.isAirportAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index -->
        </ul>
        <hr class="col-md-10">
        <div class="green-menu-header"><span class="text-bold">IN FLIGHT</span></div>
        <ul class="filter-list-green selection-denied">
            <!-- ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isInFlightAncillary(ancillary)" class="ng-scope">
            <label class="ng-binding">Entertainment
                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
            </label>
        </li><!-- end ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isInFlightAncillary(ancillary)" class="ng-scope">
            <label class="ng-binding">Economy comfort
                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
            </label>
        </li><!-- end ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isInFlightAncillary(ancillary)" class="ng-scope">
            <label class="ng-binding">Meal
                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
            </label>
        </li><!-- end ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isInFlightAncillary(ancillary)" class="ng-scope">
            <label class="ng-binding">Wifi
                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
            </label>
        </li><!-- end ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isInFlightAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index -->
        </ul>
        <hr class="col-md-10">
        <div class="green-menu-header"><span class="text-bold">BAGGAGE</span></div>
        <ul class="filter-list-green selection-denied">
            <!-- ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isBagAncillary(ancillary)" class="ng-scope">
            <label class="ng-binding">First bag
                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
            </label>
        </li><!-- end ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isBagAncillary(ancillary)" class="ng-scope">
            <label class="ng-binding">Second bag
                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
            </label>
        </li><!-- end ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><li ng-repeat="ancillary in journeys track by $index" ng-if="ancillaryService.isBagAncillary(ancillary)" class="ng-scope">
            <label class="ng-binding">Third bag
                <input type="checkbox" ng-model="ancillary.selected" ng-change="isSelectedAncillary(ancillary)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
            </label>
        </li><!-- end ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index --><!-- ngIf: ancillaryService.isBagAncillary(ancillary) --><!-- end ngRepeat: ancillary in journeys track by $index -->
        </ul>
    </div>
</div><div id="nspopover-11" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Rich content</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope">Users have access to rich information about any available flight. This enables the following:</p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">A like-for-like comparison of alternatives through clear visibility of product features and the ability to filter options by desired ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Increased productivity with easy fare and product comparison.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">An improved shopping experience, since NDC enables a range of media types to be returned (images, descriptions and even video).</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Easier access to new producs (within policy) as they become available from the airline.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The bundling and creation of unique products by suppliers (e.g. airline plus Netflix or Spotify etc).</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer --><p ng-if="education.footer" class="ng-binding ng-scope">Travel managers (admins) can control the level of access to this rich content in the Admin section.</p><!-- end ngIf: education.footer -->
    </div>
</div><div id="nspopover-12" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-filters-green-bar-theme ng-scope" style="position: absolute; display: none;">
    <div class="triangle"></div>
    <div ng-controller="filtersController" class="green-menu ng-scope">
        <div class="green-menu-header">
            <!-- ngRepeat: price in pricesList track by $index --><ul ng-repeat="price in pricesList track by $index" class="filter-list-green selection-denied ng-scope">
            <li>
                <label class="text-bold ng-binding">Non-Flex
                    <input type="checkbox" ng-model="price.selected" ng-change="isSelectedPriceType(price)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                </label>
            </li>
            <!-- ngIf: pricesList.length-1 !== $index --><hr ng-if="pricesList.length-1 !== $index" class="ng-scope"><!-- end ngIf: pricesList.length-1 !== $index -->
        </ul><!-- end ngRepeat: price in pricesList track by $index --><ul ng-repeat="price in pricesList track by $index" class="filter-list-green selection-denied ng-scope">
            <li>
                <label class="text-bold ng-binding">Semi-Flex
                    <input type="checkbox" ng-model="price.selected" ng-change="isSelectedPriceType(price)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                </label>
            </li>
            <!-- ngIf: pricesList.length-1 !== $index --><hr ng-if="pricesList.length-1 !== $index" class="ng-scope"><!-- end ngIf: pricesList.length-1 !== $index -->
        </ul><!-- end ngRepeat: price in pricesList track by $index --><ul ng-repeat="price in pricesList track by $index" class="filter-list-green selection-denied ng-scope">
            <li>
                <label class="text-bold ng-binding">Full-Flex
                    <input type="checkbox" ng-model="price.selected" ng-change="isSelectedPriceType(price)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                </label>
            </li>
            <!-- ngIf: pricesList.length-1 !== $index --><hr ng-if="pricesList.length-1 !== $index" class="ng-scope"><!-- end ngIf: pricesList.length-1 !== $index -->
        </ul><!-- end ngRepeat: price in pricesList track by $index --><ul ng-repeat="price in pricesList track by $index" class="filter-list-green selection-denied ng-scope">
            <li>
                <label class="text-bold ng-binding">Changeable
                    <input type="checkbox" ng-model="price.selected" ng-change="isSelectedPriceType(price)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                </label>
            </li>
            <!-- ngIf: pricesList.length-1 !== $index --><hr ng-if="pricesList.length-1 !== $index" class="ng-scope"><!-- end ngIf: pricesList.length-1 !== $index -->
        </ul><!-- end ngRepeat: price in pricesList track by $index --><ul ng-repeat="price in pricesList track by $index" class="filter-list-green selection-denied ng-scope">
            <li>
                <label class="text-bold ng-binding">Fully-Flex
                    <input type="checkbox" ng-model="price.selected" ng-change="isSelectedPriceType(price)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                </label>
            </li>
            <!-- ngIf: pricesList.length-1 !== $index --><hr ng-if="pricesList.length-1 !== $index" class="ng-scope"><!-- end ngIf: pricesList.length-1 !== $index -->
        </ul><!-- end ngRepeat: price in pricesList track by $index --><ul ng-repeat="price in pricesList track by $index" class="filter-list-green selection-denied ng-scope">
            <li>
                <label class="text-bold ng-binding">Econ Flex
                    <input type="checkbox" ng-model="price.selected" ng-change="isSelectedPriceType(price)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                </label>
            </li>
            <!-- ngIf: pricesList.length-1 !== $index --><hr ng-if="pricesList.length-1 !== $index" class="ng-scope"><!-- end ngIf: pricesList.length-1 !== $index -->
        </ul><!-- end ngRepeat: price in pricesList track by $index --><ul ng-repeat="price in pricesList track by $index" class="filter-list-green selection-denied ng-scope">
            <li>
                <label class="text-bold ng-binding">Refundable
                    <input type="checkbox" ng-model="price.selected" ng-change="isSelectedPriceType(price)" class="hidden ng-pristine ng-untouched ng-valid"><span class="checkbox"></span>
                </label>
            </li>
            <!-- ngIf: pricesList.length-1 !== $index -->
        </ul><!-- end ngRepeat: price in pricesList track by $index -->
        </div>
    </div>
</div><div id="nspopover-13" class="ns-popover-bottom-placement ns-popover-right-align ns-popover-filters-green-bar-theme ng-scope" style="position: absolute; display: none;">
    <div class="triangle hidden-xs"></div>
    <div class="green-menu">
        <div class="green-menu-header">
            <!-- ngRepeat: sortCriteria in flightsSortCriteria track by $index --><ul ng-repeat="sortCriteria in flightsSortCriteria track by $index" ng-click="sortBy(sortCriteria.value)" class="filter-list-green selection-denied sort-by-ul ng-scope">
            <li class="ng-binding">Price</li>
            <!-- ngIf: pricesList.length-1 !== $index --><hr ng-if="pricesList.length-1 !== $index" class="ng-scope"><!-- end ngIf: pricesList.length-1 !== $index -->
        </ul><!-- end ngRepeat: sortCriteria in flightsSortCriteria track by $index --><ul ng-repeat="sortCriteria in flightsSortCriteria track by $index" ng-click="sortBy(sortCriteria.value)" class="filter-list-green selection-denied sort-by-ul ng-scope">
            <li class="ng-binding">Departure</li>
            <!-- ngIf: pricesList.length-1 !== $index --><hr ng-if="pricesList.length-1 !== $index" class="ng-scope"><!-- end ngIf: pricesList.length-1 !== $index -->
        </ul><!-- end ngRepeat: sortCriteria in flightsSortCriteria track by $index --><ul ng-repeat="sortCriteria in flightsSortCriteria track by $index" ng-click="sortBy(sortCriteria.value)" class="filter-list-green selection-denied sort-by-ul ng-scope">
            <li class="ng-binding">Arrival</li>
            <!-- ngIf: pricesList.length-1 !== $index --><hr ng-if="pricesList.length-1 !== $index" class="ng-scope"><!-- end ngIf: pricesList.length-1 !== $index -->
        </ul><!-- end ngRepeat: sortCriteria in flightsSortCriteria track by $index --><ul ng-repeat="sortCriteria in flightsSortCriteria track by $index" ng-click="sortBy(sortCriteria.value)" class="filter-list-green selection-denied sort-by-ul ng-scope">
            <li class="ng-binding">Duration</li>
            <!-- ngIf: pricesList.length-1 !== $index --><hr ng-if="pricesList.length-1 !== $index" class="ng-scope"><!-- end ngIf: pricesList.length-1 !== $index -->
        </ul><!-- end ngRepeat: sortCriteria in flightsSortCriteria track by $index --><ul ng-repeat="sortCriteria in flightsSortCriteria track by $index" ng-click="sortBy(sortCriteria.value)" class="filter-list-green selection-denied sort-by-ul ng-scope">
            <li class="ng-binding">Personal</li>
            <!-- ngIf: pricesList.length-1 !== $index --><hr ng-if="pricesList.length-1 !== $index" class="ng-scope"><!-- end ngIf: pricesList.length-1 !== $index -->
        </ul><!-- end ngRepeat: sortCriteria in flightsSortCriteria track by $index --><ul ng-repeat="sortCriteria in flightsSortCriteria track by $index" ng-click="sortBy(sortCriteria.value)" class="filter-list-green selection-denied sort-by-ul ng-scope">
            <li class="ng-binding">Emission</li>
            <!-- ngIf: pricesList.length-1 !== $index --><hr ng-if="pricesList.length-1 !== $index" class="ng-scope"><!-- end ngIf: pricesList.length-1 !== $index -->
        </ul><!-- end ngRepeat: sortCriteria in flightsSortCriteria track by $index -->
        </div>
    </div>
</div><div id="nspopover-14" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Included ancillaries</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope">Ancillaries that are bundled into the price are clearly listed. Users can:</p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Enjoy a like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Access to detailed information about the ancillaries (with images and galleries of images being available).</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-15" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Purchase optional ancillaries (unbundled fares)</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope"> </p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">NDC provides rich content and clear indications of included and optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel bookers can select and purchase one or more optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Optional ancillaries can be selected here or on check-out or on the road.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The total price is dynamically updated allowing for like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel managers/admin users can control who gets access to optional ancillaries through Policy configuration.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Airlines can better showcase their product and unique offerings.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-16" class="ns-popover-bottom-placement ns-popover-right-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Personalized shopping</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Just-for-you specials can be pre-configured through supplier negotiations that leverage rich information on traveller behavior.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel buyers can create tailored corporate agreements with suppliers.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The specials can also created on-the-fly by suppliers wanting to reward travellers who meet a profile.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The user is never worse off as an improved traveller experience gets created.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-17" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Included ancillaries</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope">Ancillaries that are bundled into the price are clearly listed. Users can:</p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Enjoy a like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Access to detailed information about the ancillaries (with images and galleries of images being available).</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-18" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Purchase optional ancillaries (unbundled fares)</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope"> </p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">NDC provides rich content and clear indications of included and optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel bookers can select and purchase one or more optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Optional ancillaries can be selected here or on check-out or on the road.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The total price is dynamically updated allowing for like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel managers/admin users can control who gets access to optional ancillaries through Policy configuration.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Airlines can better showcase their product and unique offerings.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-19" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Included ancillaries</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope">Ancillaries that are bundled into the price are clearly listed. Users can:</p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Enjoy a like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Access to detailed information about the ancillaries (with images and galleries of images being available).</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-20" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Purchase optional ancillaries (unbundled fares)</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope"> </p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">NDC provides rich content and clear indications of included and optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel bookers can select and purchase one or more optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Optional ancillaries can be selected here or on check-out or on the road.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The total price is dynamically updated allowing for like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel managers/admin users can control who gets access to optional ancillaries through Policy configuration.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Airlines can better showcase their product and unique offerings.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-21" class="ns-popover-bottom-placement ns-popover-right-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Personalized shopping</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Just-for-you specials can be pre-configured through supplier negotiations that leverage rich information on traveller behavior.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel buyers can create tailored corporate agreements with suppliers.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The specials can also created on-the-fly by suppliers wanting to reward travellers who meet a profile.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The user is never worse off as an improved traveller experience gets created.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-22" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Included ancillaries</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope">Ancillaries that are bundled into the price are clearly listed. Users can:</p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Enjoy a like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Access to detailed information about the ancillaries (with images and galleries of images being available).</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-23" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Purchase optional ancillaries (unbundled fares)</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope"> </p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">NDC provides rich content and clear indications of included and optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel bookers can select and purchase one or more optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Optional ancillaries can be selected here or on check-out or on the road.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The total price is dynamically updated allowing for like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel managers/admin users can control who gets access to optional ancillaries through Policy configuration.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Airlines can better showcase their product and unique offerings.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-24" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Included ancillaries</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope">Ancillaries that are bundled into the price are clearly listed. Users can:</p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Enjoy a like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Access to detailed information about the ancillaries (with images and galleries of images being available).</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-25" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Purchase optional ancillaries (unbundled fares)</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope"> </p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">NDC provides rich content and clear indications of included and optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel bookers can select and purchase one or more optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Optional ancillaries can be selected here or on check-out or on the road.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The total price is dynamically updated allowing for like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel managers/admin users can control who gets access to optional ancillaries through Policy configuration.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Airlines can better showcase their product and unique offerings.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-26" class="ns-popover-bottom-placement ns-popover-right-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Personalized shopping</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Just-for-you specials can be pre-configured through supplier negotiations that leverage rich information on traveller behavior.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel buyers can create tailored corporate agreements with suppliers.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The specials can also created on-the-fly by suppliers wanting to reward travellers who meet a profile.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The user is never worse off as an improved traveller experience gets created.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-27" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Included ancillaries</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope">Ancillaries that are bundled into the price are clearly listed. Users can:</p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Enjoy a like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Access to detailed information about the ancillaries (with images and galleries of images being available).</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-28" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Purchase optional ancillaries (unbundled fares)</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope"> </p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">NDC provides rich content and clear indications of included and optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel bookers can select and purchase one or more optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Optional ancillaries can be selected here or on check-out or on the road.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The total price is dynamically updated allowing for like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel managers/admin users can control who gets access to optional ancillaries through Policy configuration.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Airlines can better showcase their product and unique offerings.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-29" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Included ancillaries</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope">Ancillaries that are bundled into the price are clearly listed. Users can:</p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Enjoy a like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Access to detailed information about the ancillaries (with images and galleries of images being available).</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-30" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Purchase optional ancillaries (unbundled fares)</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope"> </p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">NDC provides rich content and clear indications of included and optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel bookers can select and purchase one or more optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Optional ancillaries can be selected here or on check-out or on the road.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The total price is dynamically updated allowing for like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel managers/admin users can control who gets access to optional ancillaries through Policy configuration.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Airlines can better showcase their product and unique offerings.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-31" class="ns-popover-bottom-placement ns-popover-right-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Personalized shopping</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Just-for-you specials can be pre-configured through supplier negotiations that leverage rich information on traveller behavior.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel buyers can create tailored corporate agreements with suppliers.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The specials can also created on-the-fly by suppliers wanting to reward travellers who meet a profile.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The user is never worse off as an improved traveller experience gets created.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-32" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Included ancillaries</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope">Ancillaries that are bundled into the price are clearly listed. Users can:</p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Enjoy a like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Access to detailed information about the ancillaries (with images and galleries of images being available).</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-33" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Purchase optional ancillaries (unbundled fares)</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope"> </p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">NDC provides rich content and clear indications of included and optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel bookers can select and purchase one or more optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Optional ancillaries can be selected here or on check-out or on the road.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The total price is dynamically updated allowing for like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel managers/admin users can control who gets access to optional ancillaries through Policy configuration.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Airlines can better showcase their product and unique offerings.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-34" class="ns-popover-bottom-placement ns-popover-right-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Personalized shopping</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Just-for-you specials can be pre-configured through supplier negotiations that leverage rich information on traveller behavior.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel buyers can create tailored corporate agreements with suppliers.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The specials can also created on-the-fly by suppliers wanting to reward travellers who meet a profile.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The user is never worse off as an improved traveller experience gets created.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-35" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Included ancillaries</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope">Ancillaries that are bundled into the price are clearly listed. Users can:</p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Enjoy a like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Access to detailed information about the ancillaries (with images and galleries of images being available).</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-36" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Purchase optional ancillaries (unbundled fares)</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope"> </p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">NDC provides rich content and clear indications of included and optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel bookers can select and purchase one or more optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Optional ancillaries can be selected here or on check-out or on the road.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The total price is dynamically updated allowing for like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel managers/admin users can control who gets access to optional ancillaries through Policy configuration.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Airlines can better showcase their product and unique offerings.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-37" class="ns-popover-bottom-placement ns-popover-right-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Personalized shopping</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Just-for-you specials can be pre-configured through supplier negotiations that leverage rich information on traveller behavior.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel buyers can create tailored corporate agreements with suppliers.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The specials can also created on-the-fly by suppliers wanting to reward travellers who meet a profile.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The user is never worse off as an improved traveller experience gets created.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-38" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Included ancillaries</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope">Ancillaries that are bundled into the price are clearly listed. Users can:</p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Enjoy a like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Access to detailed information about the ancillaries (with images and galleries of images being available).</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-39" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Purchase optional ancillaries (unbundled fares)</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope"> </p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">NDC provides rich content and clear indications of included and optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel bookers can select and purchase one or more optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Optional ancillaries can be selected here or on check-out or on the road.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The total price is dynamically updated allowing for like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel managers/admin users can control who gets access to optional ancillaries through Policy configuration.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Airlines can better showcase their product and unique offerings.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-40" class="ns-popover-bottom-placement ns-popover-right-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Personalized shopping</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Just-for-you specials can be pre-configured through supplier negotiations that leverage rich information on traveller behavior.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel buyers can create tailored corporate agreements with suppliers.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The specials can also created on-the-fly by suppliers wanting to reward travellers who meet a profile.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The user is never worse off as an improved traveller experience gets created.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-41" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Included ancillaries</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope">Ancillaries that are bundled into the price are clearly listed. Users can:</p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Enjoy a like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Access to detailed information about the ancillaries (with images and galleries of images being available).</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-42" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Purchase optional ancillaries (unbundled fares)</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope"> </p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">NDC provides rich content and clear indications of included and optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel bookers can select and purchase one or more optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Optional ancillaries can be selected here or on check-out or on the road.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The total price is dynamically updated allowing for like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel managers/admin users can control who gets access to optional ancillaries through Policy configuration.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Airlines can better showcase their product and unique offerings.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-43" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Included ancillaries</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope">Ancillaries that are bundled into the price are clearly listed. Users can:</p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Enjoy a like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Access to detailed information about the ancillaries (with images and galleries of images being available).</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-44" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Purchase optional ancillaries (unbundled fares)</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope"> </p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">NDC provides rich content and clear indications of included and optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel bookers can select and purchase one or more optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Optional ancillaries can be selected here or on check-out or on the road.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The total price is dynamically updated allowing for like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel managers/admin users can control who gets access to optional ancillaries through Policy configuration.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Airlines can better showcase their product and unique offerings.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-45" class="ns-popover-bottom-placement ns-popover-right-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Personalized shopping</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Just-for-you specials can be pre-configured through supplier negotiations that leverage rich information on traveller behavior.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel buyers can create tailored corporate agreements with suppliers.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The specials can also created on-the-fly by suppliers wanting to reward travellers who meet a profile.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The user is never worse off as an improved traveller experience gets created.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-46" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Included ancillaries</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope">Ancillaries that are bundled into the price are clearly listed. Users can:</p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Enjoy a like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Access to detailed information about the ancillaries (with images and galleries of images being available).</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-47" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Purchase optional ancillaries (unbundled fares)</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope"> </p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">NDC provides rich content and clear indications of included and optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel bookers can select and purchase one or more optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Optional ancillaries can be selected here or on check-out or on the road.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The total price is dynamically updated allowing for like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel managers/admin users can control who gets access to optional ancillaries through Policy configuration.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Airlines can better showcase their product and unique offerings.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-48" class="ns-popover-bottom-placement ns-popover-right-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Personalized shopping</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Just-for-you specials can be pre-configured through supplier negotiations that leverage rich information on traveller behavior.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel buyers can create tailored corporate agreements with suppliers.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The specials can also created on-the-fly by suppliers wanting to reward travellers who meet a profile.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The user is never worse off as an improved traveller experience gets created.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-49" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Included ancillaries</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope">Ancillaries that are bundled into the price are clearly listed. Users can:</p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Enjoy a like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Access to detailed information about the ancillaries (with images and galleries of images being available).</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-50" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Purchase optional ancillaries (unbundled fares)</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope"> </p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">NDC provides rich content and clear indications of included and optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel bookers can select and purchase one or more optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Optional ancillaries can be selected here or on check-out or on the road.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The total price is dynamically updated allowing for like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel managers/admin users can control who gets access to optional ancillaries through Policy configuration.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Airlines can better showcase their product and unique offerings.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-51" class="ns-popover-bottom-placement ns-popover-right-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Personalized shopping</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Just-for-you specials can be pre-configured through supplier negotiations that leverage rich information on traveller behavior.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel buyers can create tailored corporate agreements with suppliers.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The specials can also created on-the-fly by suppliers wanting to reward travellers who meet a profile.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The user is never worse off as an improved traveller experience gets created.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-52" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Included ancillaries</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope">Ancillaries that are bundled into the price are clearly listed. Users can:</p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Enjoy a like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Access to detailed information about the ancillaries (with images and galleries of images being available).</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-53" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Purchase optional ancillaries (unbundled fares)</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope"> </p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">NDC provides rich content and clear indications of included and optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel bookers can select and purchase one or more optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Optional ancillaries can be selected here or on check-out or on the road.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The total price is dynamically updated allowing for like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel managers/admin users can control who gets access to optional ancillaries through Policy configuration.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Airlines can better showcase their product and unique offerings.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-54" class="ns-popover-bottom-placement ns-popover-right-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Personalized shopping</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Just-for-you specials can be pre-configured through supplier negotiations that leverage rich information on traveller behavior.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel buyers can create tailored corporate agreements with suppliers.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The specials can also created on-the-fly by suppliers wanting to reward travellers who meet a profile.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The user is never worse off as an improved traveller experience gets created.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-55" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Included ancillaries</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope">Ancillaries that are bundled into the price are clearly listed. Users can:</p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Enjoy a like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Access to detailed information about the ancillaries (with images and galleries of images being available).</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-56" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Purchase optional ancillaries (unbundled fares)</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope"> </p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">NDC provides rich content and clear indications of included and optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel bookers can select and purchase one or more optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Optional ancillaries can be selected here or on check-out or on the road.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The total price is dynamically updated allowing for like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel managers/admin users can control who gets access to optional ancillaries through Policy configuration.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Airlines can better showcase their product and unique offerings.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-57" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Included ancillaries</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope">Ancillaries that are bundled into the price are clearly listed. Users can:</p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Enjoy a like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Access to detailed information about the ancillaries (with images and galleries of images being available).</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-58" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Purchase optional ancillaries (unbundled fares)</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope"> </p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">NDC provides rich content and clear indications of included and optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel bookers can select and purchase one or more optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Optional ancillaries can be selected here or on check-out or on the road.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The total price is dynamically updated allowing for like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel managers/admin users can control who gets access to optional ancillaries through Policy configuration.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Airlines can better showcase their product and unique offerings.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-59" class="ns-popover-bottom-placement ns-popover-right-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Personalized shopping</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Just-for-you specials can be pre-configured through supplier negotiations that leverage rich information on traveller behavior.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel buyers can create tailored corporate agreements with suppliers.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The specials can also created on-the-fly by suppliers wanting to reward travellers who meet a profile.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The user is never worse off as an improved traveller experience gets created.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-60" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Included ancillaries</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope">Ancillaries that are bundled into the price are clearly listed. Users can:</p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Enjoy a like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Access to detailed information about the ancillaries (with images and galleries of images being available).</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-61" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Purchase optional ancillaries (unbundled fares)</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope"> </p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">NDC provides rich content and clear indications of included and optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel bookers can select and purchase one or more optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Optional ancillaries can be selected here or on check-out or on the road.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The total price is dynamically updated allowing for like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel managers/admin users can control who gets access to optional ancillaries through Policy configuration.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Airlines can better showcase their product and unique offerings.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-62" class="ns-popover-bottom-placement ns-popover-right-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Personalized shopping</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Just-for-you specials can be pre-configured through supplier negotiations that leverage rich information on traveller behavior.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel buyers can create tailored corporate agreements with suppliers.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The specials can also created on-the-fly by suppliers wanting to reward travellers who meet a profile.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The user is never worse off as an improved traveller experience gets created.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-63" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Included ancillaries</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope">Ancillaries that are bundled into the price are clearly listed. Users can:</p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Enjoy a like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Access to detailed information about the ancillaries (with images and galleries of images being available).</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-64" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Purchase optional ancillaries (unbundled fares)</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope"> </p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">NDC provides rich content and clear indications of included and optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel bookers can select and purchase one or more optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Optional ancillaries can be selected here or on check-out or on the road.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The total price is dynamically updated allowing for like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel managers/admin users can control who gets access to optional ancillaries through Policy configuration.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Airlines can better showcase their product and unique offerings.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-65" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Included ancillaries</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope">Ancillaries that are bundled into the price are clearly listed. Users can:</p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Enjoy a like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Access to detailed information about the ancillaries (with images and galleries of images being available).</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-66" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Purchase optional ancillaries (unbundled fares)</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope"> </p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">NDC provides rich content and clear indications of included and optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel bookers can select and purchase one or more optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Optional ancillaries can be selected here or on check-out or on the road.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The total price is dynamically updated allowing for like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel managers/admin users can control who gets access to optional ancillaries through Policy configuration.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Airlines can better showcase their product and unique offerings.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-67" class="ns-popover-bottom-placement ns-popover-right-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Personalized shopping</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Just-for-you specials can be pre-configured through supplier negotiations that leverage rich information on traveller behavior.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel buyers can create tailored corporate agreements with suppliers.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The specials can also created on-the-fly by suppliers wanting to reward travellers who meet a profile.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The user is never worse off as an improved traveller experience gets created.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-68" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Included ancillaries</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope">Ancillaries that are bundled into the price are clearly listed. Users can:</p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Enjoy a like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Access to detailed information about the ancillaries (with images and galleries of images being available).</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-69" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Purchase optional ancillaries (unbundled fares)</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope"> </p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">NDC provides rich content and clear indications of included and optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel bookers can select and purchase one or more optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Optional ancillaries can be selected here or on check-out or on the road.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The total price is dynamically updated allowing for like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel managers/admin users can control who gets access to optional ancillaries through Policy configuration.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Airlines can better showcase their product and unique offerings.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-70" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Included ancillaries</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope">Ancillaries that are bundled into the price are clearly listed. Users can:</p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Enjoy a like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Access to detailed information about the ancillaries (with images and galleries of images being available).</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-71" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Purchase optional ancillaries (unbundled fares)</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope"> </p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">NDC provides rich content and clear indications of included and optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel bookers can select and purchase one or more optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Optional ancillaries can be selected here or on check-out or on the road.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The total price is dynamically updated allowing for like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel managers/admin users can control who gets access to optional ancillaries through Policy configuration.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Airlines can better showcase their product and unique offerings.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-72" class="ns-popover-bottom-placement ns-popover-right-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Personalized shopping</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Just-for-you specials can be pre-configured through supplier negotiations that leverage rich information on traveller behavior.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel buyers can create tailored corporate agreements with suppliers.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The specials can also created on-the-fly by suppliers wanting to reward travellers who meet a profile.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The user is never worse off as an improved traveller experience gets created.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-73" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Included ancillaries</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope">Ancillaries that are bundled into the price are clearly listed. Users can:</p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Enjoy a like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Access to detailed information about the ancillaries (with images and galleries of images being available).</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-74" class="ns-popover-bottom-placement ns-popover-left-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Purchase optional ancillaries (unbundled fares)</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><p ng-if="education.text" class="ng-binding ng-scope"> </p><!-- end ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">NDC provides rich content and clear indications of included and optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel bookers can select and purchase one or more optional ancillaries.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Optional ancillaries can be selected here or on check-out or on the road.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The total price is dynamically updated allowing for like-for-like comparison of alternatives.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel managers/admin users can control who gets access to optional ancillaries through Policy configuration.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Airlines can better showcase their product and unique offerings.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div><div id="nspopover-75" class="ns-popover-bottom-placement ns-popover-right-align ns-popover-list-theme ng-scope" style="position: absolute; display: none;">
    <div class="educational-popover-template">
        <!-- ngIf: education.title --><h3 ng-if="education.title" class="text-center ng-binding ng-scope">Personalized shopping</h3><!-- end ngIf: education.title -->
        <!-- ngIf: education.text --><!-- ngIf: education.image -->
        <!-- ngIf: education.options --><ul ng-if="education.options" class="educational ng-scope">
        <!-- ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Just-for-you specials can be pre-configured through supplier negotiations that leverage rich information on traveller behavior.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">Travel buyers can create tailored corporate agreements with suppliers.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The specials can also created on-the-fly by suppliers wanting to reward travellers who meet a profile.</li><!-- end ngRepeat: option in education.options --><li ng-repeat="option in education.options" class="ng-binding ng-scope">The user is never worse off as an improved traveller experience gets created.</li><!-- end ngRepeat: option in education.options -->
    </ul><!-- end ngIf: education.options -->
        <!-- ngIf: education.footer -->
    </div>
</div></body></html>